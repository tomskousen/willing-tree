(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function VD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zg={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function OD(){if(JT)return hc;JT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:u,ref:a!==void 0?a:null,props:l}}return hc.Fragment=e,hc.jsx=n,hc.jsxs=n,hc}var ew;function kD(){return ew||(ew=1,Zg.exports=OD()),Zg.exports}var v=kD(),Jg={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function jD(){if(tw)return Fe;tw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function E(F){return F===null||typeof F!="object"?null:(F=b&&F[b]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function k(F,ue,ge){this.props=F,this.context=ue,this.refs=M,this.updater=ge||S}k.prototype.isReactComponent={},k.prototype.setState=function(F,ue){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ue,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function V(){}V.prototype=k.prototype;function P(F,ue,ge){this.props=F,this.context=ue,this.refs=M,this.updater=ge||S}var q=P.prototype=new V;q.constructor=P,D(q,k.prototype),q.isPureReactComponent=!0;var se=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function j(F,ue,ge,he,Ie,Be){return ge=Be.ref,{$$typeof:t,type:F,key:ue,ref:ge!==void 0?ge:null,props:Be}}function A(F,ue){return j(F.type,ue,void 0,void 0,void 0,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function L(F){var ue={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ge){return ue[ge]})}var B=/\/+/g;function C(F,ue){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):ue.toString(36)}function I(){}function ve(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(I,I):(F.status="pending",F.then(function(ue){F.status==="pending"&&(F.status="fulfilled",F.value=ue)},function(ue){F.status==="pending"&&(F.status="rejected",F.reason=ue)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function we(F,ue,ge,he,Ie){var Be=typeof F;(Be==="undefined"||Be==="boolean")&&(F=null);var Oe=!1;if(F===null)Oe=!0;else switch(Be){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(F.$$typeof){case t:case e:Oe=!0;break;case g:return Oe=F._init,we(Oe(F._payload),ue,ge,he,Ie)}}if(Oe)return Ie=Ie(F),Oe=he===""?"."+C(F,0):he,se(Ie)?(ge="",Oe!=null&&(ge=Oe.replace(B,"$&/")+"/"),we(Ie,ue,ge,"",function(Mn){return Mn})):Ie!=null&&(N(Ie)&&(Ie=A(Ie,ge+(Ie.key==null||F&&F.key===Ie.key?"":(""+Ie.key).replace(B,"$&/")+"/")+Oe)),ue.push(Ie)),1;Oe=0;var At=he===""?".":he+":";if(se(F))for(var it=0;it<F.length;it++)he=F[it],Be=At+C(he,it),Oe+=we(he,ue,ge,Be,Ie);else if(it=E(F),typeof it=="function")for(F=it.call(F),it=0;!(he=F.next()).done;)he=he.value,Be=At+C(he,it++),Oe+=we(he,ue,ge,Be,Ie);else if(Be==="object"){if(typeof F.then=="function")return we(ve(F),ue,ge,he,Ie);throw ue=String(F),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Z(F,ue,ge){if(F==null)return F;var he=[],Ie=0;return we(F,he,"","",function(Be){return ue.call(ge,Be,Ie++)}),he}function te(F){if(F._status===-1){var ue=F._result;ue=ue(),ue.then(function(ge){(F._status===0||F._status===-1)&&(F._status=1,F._result=ge)},function(ge){(F._status===0||F._status===-1)&&(F._status=2,F._result=ge)}),F._status===-1&&(F._status=0,F._result=ue)}if(F._status===1)return F._result.default;throw F._result}var me=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Ne(){}return Fe.Children={map:Z,forEach:function(F,ue,ge){Z(F,function(){ue.apply(this,arguments)},ge)},count:function(F){var ue=0;return Z(F,function(){ue++}),ue},toArray:function(F){return Z(F,function(ue){return ue})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Fe.Component=k,Fe.Fragment=n,Fe.Profiler=a,Fe.PureComponent=P,Fe.StrictMode=s,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return X.H.useMemoCache(F)}},Fe.cache=function(F){return function(){return F.apply(null,arguments)}},Fe.cloneElement=function(F,ue,ge){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var he=D({},F.props),Ie=F.key,Be=void 0;if(ue!=null)for(Oe in ue.ref!==void 0&&(Be=void 0),ue.key!==void 0&&(Ie=""+ue.key),ue)!ce.call(ue,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ue.ref===void 0||(he[Oe]=ue[Oe]);var Oe=arguments.length-2;if(Oe===1)he.children=ge;else if(1<Oe){for(var At=Array(Oe),it=0;it<Oe;it++)At[it]=arguments[it+2];he.children=At}return j(F.type,Ie,void 0,void 0,Be,he)},Fe.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},Fe.createElement=function(F,ue,ge){var he,Ie={},Be=null;if(ue!=null)for(he in ue.key!==void 0&&(Be=""+ue.key),ue)ce.call(ue,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ie[he]=ue[he]);var Oe=arguments.length-2;if(Oe===1)Ie.children=ge;else if(1<Oe){for(var At=Array(Oe),it=0;it<Oe;it++)At[it]=arguments[it+2];Ie.children=At}if(F&&F.defaultProps)for(he in Oe=F.defaultProps,Oe)Ie[he]===void 0&&(Ie[he]=Oe[he]);return j(F,Be,void 0,void 0,null,Ie)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:h,render:F}},Fe.isValidElement=N,Fe.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:te}},Fe.memo=function(F,ue){return{$$typeof:p,type:F,compare:ue===void 0?null:ue}},Fe.startTransition=function(F){var ue=X.T,ge={};X.T=ge;try{var he=F(),Ie=X.S;Ie!==null&&Ie(ge,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Ne,me)}catch(Be){me(Be)}finally{X.T=ue}},Fe.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Fe.use=function(F){return X.H.use(F)},Fe.useActionState=function(F,ue,ge){return X.H.useActionState(F,ue,ge)},Fe.useCallback=function(F,ue){return X.H.useCallback(F,ue)},Fe.useContext=function(F){return X.H.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F,ue){return X.H.useDeferredValue(F,ue)},Fe.useEffect=function(F,ue,ge){var he=X.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(F,ue)},Fe.useId=function(){return X.H.useId()},Fe.useImperativeHandle=function(F,ue,ge){return X.H.useImperativeHandle(F,ue,ge)},Fe.useInsertionEffect=function(F,ue){return X.H.useInsertionEffect(F,ue)},Fe.useLayoutEffect=function(F,ue){return X.H.useLayoutEffect(F,ue)},Fe.useMemo=function(F,ue){return X.H.useMemo(F,ue)},Fe.useOptimistic=function(F,ue){return X.H.useOptimistic(F,ue)},Fe.useReducer=function(F,ue,ge){return X.H.useReducer(F,ue,ge)},Fe.useRef=function(F){return X.H.useRef(F)},Fe.useState=function(F){return X.H.useState(F)},Fe.useSyncExternalStore=function(F,ue,ge){return X.H.useSyncExternalStore(F,ue,ge)},Fe.useTransition=function(){return X.H.useTransition()},Fe.version="19.1.1",Fe}var nw;function $v(){return nw||(nw=1,Jg.exports=jD()),Jg.exports}var O=$v();const mn=VD(O);var ey={exports:{}},fc={},ty={exports:{}},ny={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function LD(){return sw||(sw=1,(function(t){function e(Z,te){var me=Z.length;Z.push(te);e:for(;0<me;){var Ne=me-1>>>1,F=Z[Ne];if(0<a(F,te))Z[Ne]=te,Z[me]=F,me=Ne;else break e}}function n(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var te=Z[0],me=Z.pop();if(me!==te){Z[0]=me;e:for(var Ne=0,F=Z.length,ue=F>>>1;Ne<ue;){var ge=2*(Ne+1)-1,he=Z[ge],Ie=ge+1,Be=Z[Ie];if(0>a(he,me))Ie<F&&0>a(Be,he)?(Z[Ne]=Be,Z[Ie]=me,Ne=Ie):(Z[Ne]=he,Z[ge]=me,Ne=ge);else if(Ie<F&&0>a(Be,me))Z[Ne]=Be,Z[Ie]=me,Ne=Ie;else break e}}return te}function a(Z,te){var me=Z.sortIndex-te.sortIndex;return me!==0?me:Z.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var d=[],p=[],g=1,b=null,E=3,S=!1,D=!1,M=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function se(Z){for(var te=n(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=Z)s(p),te.sortIndex=te.expirationTime,e(d,te);else break;te=n(p)}}function X(Z){if(M=!1,se(Z),!D)if(n(d)!==null)D=!0,ce||(ce=!0,C());else{var te=n(p);te!==null&&we(X,te.startTime-Z)}}var ce=!1,j=-1,A=5,N=-1;function L(){return k?!0:!(t.unstable_now()-N<A)}function B(){if(k=!1,ce){var Z=t.unstable_now();N=Z;var te=!0;try{e:{D=!1,M&&(M=!1,P(j),j=-1),S=!0;var me=E;try{t:{for(se(Z),b=n(d);b!==null&&!(b.expirationTime>Z&&L());){var Ne=b.callback;if(typeof Ne=="function"){b.callback=null,E=b.priorityLevel;var F=Ne(b.expirationTime<=Z);if(Z=t.unstable_now(),typeof F=="function"){b.callback=F,se(Z),te=!0;break t}b===n(d)&&s(d),se(Z)}else s(d);b=n(d)}if(b!==null)te=!0;else{var ue=n(p);ue!==null&&we(X,ue.startTime-Z),te=!1}}break e}finally{b=null,E=me,S=!1}te=void 0}}finally{te?C():ce=!1}}}var C;if(typeof q=="function")C=function(){q(B)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ve=I.port2;I.port1.onmessage=B,C=function(){ve.postMessage(null)}}else C=function(){V(B,0)};function we(Z,te){j=V(function(){Z(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var me=E;E=te;try{return Z()}finally{E=me}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(Z,te){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var me=E;E=Z;try{return te()}finally{E=me}},t.unstable_scheduleCallback=function(Z,te,me){var Ne=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ne+me:Ne):me=Ne,Z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=me+F,Z={id:g++,callback:te,priorityLevel:Z,startTime:me,expirationTime:F,sortIndex:-1},me>Ne?(Z.sortIndex=me,e(p,Z),n(d)===null&&Z===n(p)&&(M?(P(j),j=-1):M=!0,we(X,me-Ne))):(Z.sortIndex=F,e(d,Z),D||S||(D=!0,ce||(ce=!0,C()))),Z},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(Z){var te=E;return function(){var me=E;E=te;try{return Z.apply(this,arguments)}finally{E=me}}}})(ny)),ny}var iw;function UD(){return iw||(iw=1,ty.exports=LD()),ty.exports}var sy={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function BD(){if(rw)return bn;rw=1;var t=$v();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:p,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bn.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,g)},bn.flushSync=function(d){var p=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=p,s.p=g,s.d.f()}},bn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},bn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},bn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,b=h(g,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:S}):g==="script"&&s.d.X(d,{crossOrigin:b,integrity:E,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},bn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=h(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=h(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},bn.requestFormReset=function(d){s.d.r(d)},bn.unstable_batchedUpdates=function(d,p){return d(p)},bn.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},bn.useFormStatus=function(){return u.H.useHostTransitionStatus()},bn.version="19.1.1",bn}var aw;function FD(){if(aw)return sy.exports;aw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sy.exports=BD(),sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function zD(){if(ow)return fc;ow=1;var t=UD(),e=$v(),n=FD();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function d(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,c=r;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return h(m),i;if(y===c)return h(m),r;y=y.sibling}throw Error(s(188))}if(o.return!==c.return)o=m,c=y;else{for(var w=!1,x=m.child;x;){if(x===o){w=!0,o=m,c=y;break}if(x===c){w=!0,c=m,o=y;break}x=x.sibling}if(!w){for(x=y.child;x;){if(x===o){w=!0,o=y,c=m;break}if(x===c){w=!0,c=y,o=m;break}x=x.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function C(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case k:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case ce:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case q:return(i.displayName||"Context")+".Provider";case P:return(i._context.displayName||"Context")+".Consumer";case se:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case j:return r=i.displayName||null,r!==null?r:ve(i.type)||"Memo";case A:r=i._payload,i=i._init;try{return ve(i(r))}catch{}}return null}var we=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ne=[],F=-1;function ue(i){return{current:i}}function ge(i){0>F||(i.current=Ne[F],Ne[F]=null,F--)}function he(i,r){F++,Ne[F]=i.current,i.current=r}var Ie=ue(null),Be=ue(null),Oe=ue(null),At=ue(null);function it(i,r){switch(he(Oe,r),he(Be,i),he(Ie,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?RT(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=RT(r),i=IT(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ge(Ie),he(Ie,i)}function Mn(){ge(Ie),ge(Be),ge(Oe)}function is(i){i.memoizedState!==null&&he(At,i);var r=Ie.current,o=IT(r,i.type);r!==o&&(he(Be,i),he(Ie,o))}function ws(i){Be.current===i&&(ge(Ie),ge(Be)),At.current===i&&(ge(At),ac._currentValue=me)}var Gs=Object.prototype.hasOwnProperty,Ai=t.unstable_scheduleCallback,$s=t.unstable_cancelCallback,br=t.unstable_shouldYield,No=t.unstable_requestPaint,Vn=t.unstable_now,Ih=t.unstable_getCurrentPriorityLevel,Er=t.unstable_ImmediatePriority,z=t.unstable_UserBlockingPriority,Y=t.unstable_NormalPriority,ne=t.unstable_LowPriority,_e=t.unstable_IdlePriority,pe=t.log,fe=t.unstable_setDisableYieldValue,ye=null,Ae=null;function ze(i){if(typeof pe=="function"&&fe(i),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(ye,i)}catch{}}var rt=Math.clz32?Math.clz32:Ii,Ri=Math.log,rs=Math.LN2;function Ii(i){return i>>>=0,i===0?32:31-(Ri(i)/rs|0)|0}var xs=256,Ss=4194304;function Hn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ci(i,r,o){var c=i.pendingLanes;if(c===0)return 0;var m=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var x=c&134217727;return x!==0?(c=x&~y,c!==0?m=Hn(c):(w&=x,w!==0?m=Hn(w):o||(o=x&~i,o!==0&&(m=Hn(o))))):(x=c&~y,x!==0?m=Hn(x):w!==0?m=Hn(w):o||(o=c&~i,o!==0&&(m=Hn(o)))),m===0?0:r!==0&&r!==m&&(r&y)===0&&(y=m&-m,o=r&-r,y>=o||y===32&&(o&4194048)!==0)?r:m}function Ni(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Tr(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ou(){var i=xs;return xs<<=1,(xs&4194048)===0&&(xs=256),i}function lu(){var i=Ss;return Ss<<=1,(Ss&62914560)===0&&(Ss=4194304),i}function Di(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function Pi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function uu(i,r,o,c,m,y){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var x=i.entanglements,U=i.expirationTimes,W=i.hiddenUpdates;for(o=w&~o;0<o;){var ie=31-rt(o),oe=1<<ie;x[ie]=0,U[ie]=-1;var Q=W[ie];if(Q!==null)for(W[ie]=null,ie=0;ie<Q.length;ie++){var J=Q[ie];J!==null&&(J.lane&=-536870913)}o&=~oe}c!==0&&Ks(i,c,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~r))}function Ks(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-rt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|o&4194090}function cu(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var c=31-rt(o),m=1<<c;m&r|i[c]&r&&(i[c]|=r),o&=~m}}function wr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Do(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function xr(){var i=te.p;return i!==0?i:(i=window.event,i===void 0?32:KT(i.type))}function Ch(i,r){var o=te.p;try{return te.p=i,r()}finally{te.p=o}}var yt=Math.random().toString(36).slice(2),Wt="__reactFiber$"+yt,jt="__reactProps$"+yt,as="__reactContainer$"+yt,hu="__reactEvents$"+yt,tp="__reactListeners$"+yt,Sr="__reactHandles$"+yt,Nh="__reactResources$"+yt,Ia="__reactMarker$"+yt;function Ar(i){delete i[Wt],delete i[jt],delete i[hu],delete i[tp],delete i[Sr]}function Mi(i){var r=i[Wt];if(r)return r;for(var o=i.parentNode;o;){if(r=o[as]||o[Wt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=PT(i);i!==null;){if(o=i[Wt])return o;i=PT(i)}return r}i=o,o=i.parentNode}return null}function Ws(i){if(i=i[Wt]||i[as]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function Ys(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function An(i){var r=i[Nh];return r||(r=i[Nh]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(i){i[Ia]=!0}var fu=new Set,Po={};function As(i,r){Vi(i,r),Vi(i+"Capture",r)}function Vi(i,r){for(Po[i]=r,i=0;i<r.length;i++)fu.add(r[i])}var Dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ph={},Ca={};function Mh(i){return Gs.call(Ca,i)?!0:Gs.call(Ph,i)?!1:Dh.test(i)?Ca[i]=!0:(Ph[i]=!0,!1)}function Rr(i,r,o){if(Mh(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Qs(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function ln(i,r,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+c)}}var Na,Vh;function Oi(i){if(Na===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Na=r&&r[1]||"",Vh=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Na+i+Vh}var Mo=!1;function Vo(i,r){if(!i||Mo)return"";Mo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var Q=J}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(J){Q=J}i.call(oe.prototype)}}else{try{throw Error()}catch(J){Q=J}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],x=y[1];if(w&&x){var U=w.split(`
`),W=x.split(`
`);for(m=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(c===U.length||m===W.length)for(c=U.length-1,m=W.length-1;1<=c&&0<=m&&U[c]!==W[m];)m--;for(;1<=c&&0<=m;c--,m--)if(U[c]!==W[m]){if(c!==1||m!==1)do if(c--,m--,0>m||U[c]!==W[m]){var ie=`
`+U[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=m);break}}}finally{Mo=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Oi(o):""}function du(i){switch(i.tag){case 26:case 27:case 5:return Oi(i.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return Vo(i.type,!1);case 11:return Vo(i.type.render,!1);case 1:return Vo(i.type,!0);case 31:return Oi("Activity");default:return""}}function Oo(i){try{var r="";do r+=du(i),i=i.return;while(i);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function np(i){var r=mu(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),c=""+i[r];if(!i.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(i,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ko(i){i._valueTracker||(i._valueTracker=np(i))}function pu(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return i&&(c=mu(i)?i.checked?"true":"false":i.value),i=c,i!==o?(r.setValue(i),!0):!1}function Da(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sp=/[\n"\\]/g;function Lt(i){return i.replace(sp,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gn(i,r,o,c,m,y,w,x){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Rn(r)):i.value!==""+Rn(r)&&(i.value=""+Rn(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?Ir(i,w,Rn(r)):o!=null?Ir(i,w,Rn(o)):c!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+Rn(x):i.removeAttribute("name")}function Pa(i,r,o,c,m,y,w,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),r!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||r!=null))return;o=o!=null?""+Rn(o):"",r=r!=null?""+Rn(r):o,x||r===i.value||(i.value=r),i.defaultValue=r}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=x?i.checked:!!c,i.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Ir(i,r,o){r==="number"&&Da(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function ki(i,r,o,c){if(i=i.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=r.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&c&&(i[o].defaultSelected=!0)}else{for(o=""+Rn(o),r=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function ut(i,r,o){if(r!=null&&(r=""+Rn(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Rn(o):""}function Ma(i,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(s(92));if(we(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Rn(r),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c)}function os(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oh(i,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,o):typeof o!="number"||o===0||Va.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function gu(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in r)c=r[m],r.hasOwnProperty(m)&&o[m]!==c&&Oh(i,m,c)}else for(var y in r)r.hasOwnProperty(y)&&Oh(i,y,r[y])}function yu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(i){return rp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ji=null;function ls(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Li=null,Ui=null;function vu(i){var r=Ws(i);if(r&&(i=r.stateNode)){var o=i[jt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Gn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Lt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==i&&c.form===i.form){var m=c[jt]||null;if(!m)throw Error(s(90));Gn(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===i.form&&pu(c)}break e;case"textarea":ut(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&ki(i,!!o.multiple,r,!1)}}}var Xs=!1;function kh(i,r,o){if(Xs)return i(r,o);Xs=!0;try{var c=i(r);return c}finally{if(Xs=!1,(Li!==null||Ui!==null)&&(Nf(),Li&&(r=Li,i=Ui,Ui=Li=null,vu(r),i)))for(r=0;r<i.length;r++)vu(i[r])}}function Oa(i,r){var o=i.stateNode;if(o===null)return null;var c=o[jt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),us=!1;if(Rs)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){us=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{us=!1}var Zs=null,Cr=null,Bi=null;function _u(){if(Bi)return Bi;var i,r=Cr,o=r.length,c,m="value"in Zs?Zs.value:Zs.textContent,y=m.length;for(i=0;i<o&&r[i]===m[i];i++);var w=o-i;for(c=1;c<=w&&r[o-c]===m[y-c];c++);return Bi=m.slice(i,1<c?1-c:void 0)}function Js(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ei(){return!0}function bu(){return!1}function en(i){function r(o,c,m,y,w){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(o=i[x],this[x]=o?o(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ei:bu,this.isPropagationStopped=bu,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),r}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=en(nt),ja=g({},nt,{view:0,detail:0}),jh=en(ja),Uo,Bo,ti,La=g({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ti&&(ti&&i.type==="mousemove"?(Uo=i.screenX-ti.screenX,Bo=i.screenY-ti.screenY):Bo=Uo=0,ti=i),Uo)},movementY:function(i){return"movementY"in i?i.movementY:Bo}}),cs=en(La),Lh=g({},La,{dataTransfer:0}),ap=en(Lh),Ua=g({},ja,{relatedTarget:0}),Fo=en(Ua),Eu=g({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),zo=en(Eu),Uh=g({},nt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),qo=en(Uh),op=g({},nt,{data:0}),Tu=en(op),Ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Fh[i])?!!r[i]:!1}function Fa(){return wu}var zh=g({},ja,{key:function(i){if(i.key){var r=Ba[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Js(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Bh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(i){return i.type==="keypress"?Js(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Js(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ho=en(zh),qh=g({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=en(qh),Fi=g({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Hh=en(Fi),Gh=g({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),$h=en(Gh),Kh=g({},La,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Go=en(Kh),In=g({},nt,{newState:0,oldState:0}),Wh=en(In),Yh=[9,13,27,32],ni=Rs&&"CompositionEvent"in window,f=null;Rs&&"documentMode"in document&&(f=document.documentMode);var _=Rs&&"TextEvent"in window&&!f,T=Rs&&(!ni||f&&8<f&&11>=f),R=" ",$=!1;function ee(i,r){switch(i){case"keyup":return Yh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qe=!1;function Yt(i,r){switch(i){case"compositionend":return de(r);case"keypress":return r.which!==32?null:($=!0,R);case"textInput":return i=r.data,i===R&&$?null:i;default:return null}}function Xe(i,r){if(Qe)return i==="compositionend"||!ni&&ee(i,r)?(i=_u(),Bi=Cr=Zs=null,Qe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return T&&r.locale!=="ko"?null:r.data;default:return null}}var tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qt(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!tn[i.type]:r==="textarea"}function zi(i,r,o,c){Li?Ui?Ui.push(c):Ui=[c]:Li=c,r=kf(r,"onChange"),0<r.length&&(o=new Lo("onChange","change",null,o,c),i.push({event:o,listeners:r}))}var un=null,si=null;function Su(i){TT(i,0)}function Qh(i){var r=Ys(i);if(pu(r))return i}function q_(i,r){if(i==="change")return r}var H_=!1;if(Rs){var lp;if(Rs){var up="oninput"in document;if(!up){var G_=document.createElement("div");G_.setAttribute("oninput","return;"),up=typeof G_.oninput=="function"}lp=up}else lp=!1;H_=lp&&(!document.documentMode||9<document.documentMode)}function $_(){un&&(un.detachEvent("onpropertychange",K_),si=un=null)}function K_(i){if(i.propertyName==="value"&&Qh(si)){var r=[];zi(r,si,i,ls(i)),kh(Su,r)}}function c2(i,r,o){i==="focusin"?($_(),un=r,si=o,un.attachEvent("onpropertychange",K_)):i==="focusout"&&$_()}function h2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qh(si)}function f2(i,r){if(i==="click")return Qh(r)}function d2(i,r){if(i==="input"||i==="change")return Qh(r)}function m2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var $n=typeof Object.is=="function"?Object.is:m2;function Au(i,r){if($n(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Gs.call(r,m)||!$n(i[m],r[m]))return!1}return!0}function W_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Y_(i,r){var o=W_(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=r&&c>=r)return{node:o,offset:r-i};i=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=W_(o)}}function Q_(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Q_(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function X_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Da(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Da(i.document)}return r}function cp(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var p2=Rs&&"documentMode"in document&&11>=document.documentMode,$o=null,hp=null,Ru=null,fp=!1;function Z_(i,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fp||$o==null||$o!==Da(c)||(c=$o,"selectionStart"in c&&cp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ru&&Au(Ru,c)||(Ru=c,c=kf(hp,"onSelect"),0<c.length&&(r=new Lo("onSelect","select",null,r,o),i.push({event:r,listeners:c}),r.target=$o)))}function za(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Ko={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionrun:za("Transition","TransitionRun"),transitionstart:za("Transition","TransitionStart"),transitioncancel:za("Transition","TransitionCancel"),transitionend:za("Transition","TransitionEnd")},dp={},J_={};Rs&&(J_=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function qa(i){if(dp[i])return dp[i];if(!Ko[i])return i;var r=Ko[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in J_)return dp[i]=r[o];return i}var eb=qa("animationend"),tb=qa("animationiteration"),nb=qa("animationstart"),g2=qa("transitionrun"),y2=qa("transitionstart"),v2=qa("transitioncancel"),sb=qa("transitionend"),ib=new Map,mp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mp.push("scrollEnd");function Is(i,r){ib.set(i,r),As(r,[i])}var rb=new WeakMap;function hs(i,r){if(typeof i=="object"&&i!==null){var o=rb.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Oo(r)},rb.set(i,r),r)}return{value:i,source:r,stack:Oo(r)}}var fs=[],Wo=0,pp=0;function Xh(){for(var i=Wo,r=pp=Wo=0;r<i;){var o=fs[r];fs[r++]=null;var c=fs[r];fs[r++]=null;var m=fs[r];fs[r++]=null;var y=fs[r];if(fs[r++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}y!==0&&ab(o,m,y)}}function Zh(i,r,o,c){fs[Wo++]=i,fs[Wo++]=r,fs[Wo++]=o,fs[Wo++]=c,pp|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function gp(i,r,o,c){return Zh(i,r,o,c),Jh(i)}function Yo(i,r){return Zh(i,null,null,r),Jh(i)}function ab(i,r,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var m=!1,y=i.return;y!==null;)y.childLanes|=o,c=y.alternate,c!==null&&(c.childLanes|=o),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&r!==null&&(m=31-rt(o),i=y.hiddenUpdates,c=i[m],c===null?i[m]=[r]:c.push(r),r.lane=o|536870912),y):null}function Jh(i){if(50<Zu)throw Zu=0,Tg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Qo={};function _2(i,r,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(i,r,o,c){return new _2(i,r,o,c)}function yp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qi(i,r){var o=i.alternate;return o===null?(o=Kn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function ob(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ef(i,r,o,c,m,y){var w=0;if(c=i,typeof i=="function")yp(i)&&(w=1);else if(typeof i=="string")w=ED(i,o,Ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Kn(31,o,r,m),i.elementType=N,i.lanes=y,i;case D:return Ha(o.children,m,y,r);case M:w=8,m|=24;break;case k:return i=Kn(12,o,r,m|2),i.elementType=k,i.lanes=y,i;case X:return i=Kn(13,o,r,m),i.elementType=X,i.lanes=y,i;case ce:return i=Kn(19,o,r,m),i.elementType=ce,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:case q:w=10;break e;case P:w=9;break e;case se:w=11;break e;case j:w=14;break e;case A:w=16,c=null;break e}w=29,o=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=Kn(w,o,r,m),r.elementType=i,r.type=c,r.lanes=y,r}function Ha(i,r,o,c){return i=Kn(7,i,c,r),i.lanes=o,i}function vp(i,r,o){return i=Kn(6,i,null,r),i.lanes=o,i}function _p(i,r,o){return r=Kn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Xo=[],Zo=0,tf=null,nf=0,ds=[],ms=0,Ga=null,Hi=1,Gi="";function $a(i,r){Xo[Zo++]=nf,Xo[Zo++]=tf,tf=i,nf=r}function lb(i,r,o){ds[ms++]=Hi,ds[ms++]=Gi,ds[ms++]=Ga,Ga=i;var c=Hi;i=Gi;var m=32-rt(c)-1;c&=~(1<<m),o+=1;var y=32-rt(r)+m;if(30<y){var w=m-m%5;y=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Hi=1<<32-rt(r)+m|o<<m|c,Gi=y+i}else Hi=1<<y|o<<m|c,Gi=i}function bp(i){i.return!==null&&($a(i,1),lb(i,1,0))}function Ep(i){for(;i===tf;)tf=Xo[--Zo],Xo[Zo]=null,nf=Xo[--Zo],Xo[Zo]=null;for(;i===Ga;)Ga=ds[--ms],ds[ms]=null,Gi=ds[--ms],ds[ms]=null,Hi=ds[--ms],ds[ms]=null}var Cn=null,Rt=null,tt=!1,Ka=null,ii=!1,Tp=Error(s(519));function Wa(i){var r=Error(s(418,""));throw Nu(hs(r,i)),Tp}function ub(i){var r=i.stateNode,o=i.type,c=i.memoizedProps;switch(r[Wt]=i,r[jt]=c,o){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(o=0;o<ec.length;o++)$e(ec[o],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":$e("invalid",r),Pa(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ko(r);break;case"select":$e("invalid",r);break;case"textarea":$e("invalid",r),Ma(r,c.value,c.defaultValue,c.children),ko(r)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||AT(r.textContent,o)?(c.popover!=null&&($e("beforetoggle",r),$e("toggle",r)),c.onScroll!=null&&$e("scroll",r),c.onScrollEnd!=null&&$e("scrollend",r),c.onClick!=null&&(r.onclick=jf),r=!0):r=!1,r||Wa(i)}function cb(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Cn=Cn.return}}function Iu(i){if(i!==Cn)return!1;if(!tt)return cb(i),tt=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Lg(i.type,i.memoizedProps)),o=!o),o&&Rt&&Wa(i),cb(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(r===0){Rt=Ns(i.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;i=i.nextSibling}Rt=null}}else r===27?(r=Rt,Gr(i.type)?(i=zg,zg=null,Rt=i):Rt=r):Rt=Cn?Ns(i.stateNode.nextSibling):null;return!0}function Cu(){Rt=Cn=null,tt=!1}function hb(){var i=Ka;return i!==null&&(jn===null?jn=i:jn.push.apply(jn,i),Ka=null),i}function Nu(i){Ka===null?Ka=[i]:Ka.push(i)}var wp=ue(null),Ya=null,$i=null;function Nr(i,r,o){he(wp,r._currentValue),r._currentValue=o}function Ki(i){i._currentValue=wp.current,ge(wp)}function xp(i,r,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===o)break;i=i.return}}function Sp(i,r,o,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var w=m.child;y=y.firstContext;e:for(;y!==null;){var x=y;y=m;for(var U=0;U<r.length;U++)if(x.context===r[U]){y.lanes|=o,x=y.alternate,x!==null&&(x.lanes|=o),xp(y.return,o,i),c||(w=null);break e}y=x.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=o,y=w.alternate,y!==null&&(y.lanes|=o),xp(w,o,i),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Du(i,r,o,c){i=null;for(var m=r,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var x=m.type;$n(m.pendingProps.value,w.value)||(i!==null?i.push(x):i=[x])}}else if(m===At.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(ac):i=[ac])}m=m.return}i!==null&&Sp(r,i,o,c),r.flags|=262144}function sf(i){for(i=i.firstContext;i!==null;){if(!$n(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qa(i){Ya=i,$i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _n(i){return fb(Ya,i)}function rf(i,r){return Ya===null&&Qa(i),fb(i,r)}function fb(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},$i===null){if(i===null)throw Error(s(308));$i=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else $i=$i.next=r;return o}var b2=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},E2=t.unstable_scheduleCallback,T2=t.unstable_NormalPriority,Xt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ap(){return{controller:new b2,data:new Map,refCount:0}}function Pu(i){i.refCount--,i.refCount===0&&E2(T2,function(){i.controller.abort()})}var Mu=null,Rp=0,Jo=0,el=null;function w2(i,r){if(Mu===null){var o=Mu=[];Rp=0,Jo=Cg(),el={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Rp++,r.then(db,db),r}function db(){if(--Rp===0&&Mu!==null){el!==null&&(el.status="fulfilled");var i=Mu;Mu=null,Jo=0,el=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function x2(i,r){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var mb=Z.S;Z.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&w2(i,r),mb!==null&&mb(i,r)};var Xa=ue(null);function Ip(){var i=Xa.current;return i!==null?i:mt.pooledCache}function af(i,r){r===null?he(Xa,Xa.current):he(Xa,r.pool)}function pb(){var i=Ip();return i===null?null:{parent:Xt._currentValue,pool:i}}var Vu=Error(s(460)),gb=Error(s(474)),of=Error(s(542)),Cp={then:function(){}};function yb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function lf(){}function vb(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(lf,lf),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,bb(i),i;default:if(typeof r.status=="string")r.then(lf,lf);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=c}},function(c){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,bb(i),i}throw Ou=r,Vu}}var Ou=null;function _b(){if(Ou===null)throw Error(s(459));var i=Ou;return Ou=null,i}function bb(i){if(i===Vu||i===of)throw Error(s(483))}var Dr=!1;function Np(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Pr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Mr(i,r,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(at&2)!==0){var m=c.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),c.pending=r,r=Jh(i),ab(i,null,o),r}return Zh(i,c,r,o),Jh(i)}function ku(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,o|=c,r.lanes=o,cu(i,o)}}function Pp(i,r){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=w:y=y.next=w,o=o.next}while(o!==null);y===null?m=y=r:y=y.next=r}else m=y=r;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var Mp=!1;function ju(){if(Mp){var i=el;if(i!==null)throw i}}function Lu(i,r,o,c){Mp=!1;var m=i.updateQueue;Dr=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var U=x,W=U.next;U.next=null,w===null?y=W:w.next=W,w=U;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,x=ie.lastBaseUpdate,x!==w&&(x===null?ie.firstBaseUpdate=W:x.next=W,ie.lastBaseUpdate=U))}if(y!==null){var oe=m.baseState;w=0,ie=W=U=null,x=y;do{var Q=x.lane&-536870913,J=Q!==x.lane;if(J?(Ze&Q)===Q:(c&Q)===Q){Q!==0&&Q===Jo&&(Mp=!0),ie!==null&&(ie=ie.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ke=i,De=x;Q=r;var ft=o;switch(De.tag){case 1:if(ke=De.payload,typeof ke=="function"){oe=ke.call(ft,oe,Q);break e}oe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=De.payload,Q=typeof ke=="function"?ke.call(ft,oe,Q):ke,Q==null)break e;oe=g({},oe,Q);break e;case 2:Dr=!0}}Q=x.callback,Q!==null&&(i.flags|=64,J&&(i.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ie===null?(W=ie=J,U=oe):ie=ie.next=J,w|=Q;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;J=x,x=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);ie===null&&(U=oe),m.baseState=U,m.firstBaseUpdate=W,m.lastBaseUpdate=ie,y===null&&(m.shared.lanes=0),Fr|=w,i.lanes=w,i.memoizedState=oe}}function Eb(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Tb(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Eb(o[i],r)}var tl=ue(null),uf=ue(0);function wb(i,r){i=er,he(uf,i),he(tl,r),er=i|r.baseLanes}function Vp(){he(uf,er),he(tl,tl.current)}function Op(){er=uf.current,ge(tl),ge(uf)}var Vr=0,qe=null,ct=null,Ut=null,cf=!1,nl=!1,Za=!1,hf=0,Uu=0,sl=null,S2=0;function Dt(){throw Error(s(321))}function kp(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!$n(i[o],r[o]))return!1;return!0}function jp(i,r,o,c,m,y){return Vr=y,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=i===null||i.memoizedState===null?aE:oE,Za=!1,y=o(c,m),Za=!1,nl&&(y=Sb(r,o,c,m)),xb(i),y}function xb(i){Z.H=yf;var r=ct!==null&&ct.next!==null;if(Vr=0,Ut=ct=qe=null,cf=!1,Uu=0,sl=null,r)throw Error(s(300));i===null||nn||(i=i.dependencies,i!==null&&sf(i)&&(nn=!0))}function Sb(i,r,o,c){qe=i;var m=0;do{if(nl&&(sl=null),Uu=0,nl=!1,25<=m)throw Error(s(301));if(m+=1,Ut=ct=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Z.H=P2,y=r(o,c)}while(nl);return y}function A2(){var i=Z.H,r=i.useState()[0];return r=typeof r.then=="function"?Bu(r):r,i=i.useState()[0],(ct!==null?ct.memoizedState:null)!==i&&(qe.flags|=1024),r}function Lp(){var i=hf!==0;return hf=0,i}function Up(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Bp(i){if(cf){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}cf=!1}Vr=0,Ut=ct=qe=null,nl=!1,Uu=hf=0,sl=null}function On(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?qe.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function Bt(){if(ct===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=ct.next;var r=Ut===null?qe.memoizedState:Ut.next;if(r!==null)Ut=r,ct=i;else{if(i===null)throw qe.alternate===null?Error(s(467)):Error(s(310));ct=i,i={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ut===null?qe.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function Fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bu(i){var r=Uu;return Uu+=1,sl===null&&(sl=[]),i=vb(sl,i,r),r=qe,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?aE:oE),i}function ff(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Bu(i);if(i.$$typeof===q)return _n(i)}throw Error(s(438,String(i)))}function zp(i){var r=null,o=qe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Fp(),qe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),c=0;c<i;c++)o[c]=L;return r.index++,o}function Wi(i,r){return typeof r=="function"?r(i):r}function df(i){var r=Bt();return qp(r,ct,i)}function qp(i,r,o){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var m=i.baseQueue,y=c.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}r.baseQueue=m=y,c.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{r=m.next;var x=w=null,U=null,W=r,ie=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Ze&oe)===oe:(Vr&oe)===oe){var Q=W.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===Jo&&(ie=!0);else if((Vr&Q)===Q){W=W.next,Q===Jo&&(ie=!0);continue}else oe={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(x=U=oe,w=y):U=U.next=oe,qe.lanes|=Q,Fr|=Q;oe=W.action,Za&&o(y,oe),y=W.hasEagerState?W.eagerState:o(y,oe)}else Q={lane:oe,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(x=U=Q,w=y):U=U.next=Q,qe.lanes|=oe,Fr|=oe;W=W.next}while(W!==null&&W!==r);if(U===null?w=y:U.next=x,!$n(y,i.memoizedState)&&(nn=!0,ie&&(o=el,o!==null)))throw o;i.memoizedState=y,i.baseState=w,i.baseQueue=U,c.lastRenderedState=y}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Hp(i){var r=Bt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var c=o.dispatch,m=o.pending,y=r.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do y=i(y,w.action),w=w.next;while(w!==m);$n(y,r.memoizedState)||(nn=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),o.lastRenderedState=y}return[y,c]}function Ab(i,r,o){var c=qe,m=Bt(),y=tt;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=r();var w=!$n((ct||m).memoizedState,o);w&&(m.memoizedState=o,nn=!0),m=m.queue;var x=Cb.bind(null,c,m,i);if(Fu(2048,8,x,[i]),m.getSnapshot!==r||w||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,il(9,mf(),Ib.bind(null,c,m,o,r),null),mt===null)throw Error(s(349));y||(Vr&124)!==0||Rb(c,r,o)}return o}function Rb(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=qe.updateQueue,r===null?(r=Fp(),qe.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function Ib(i,r,o,c){r.value=o,r.getSnapshot=c,Nb(r)&&Db(i)}function Cb(i,r,o){return o(function(){Nb(r)&&Db(i)})}function Nb(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!$n(i,o)}catch{return!0}}function Db(i){var r=Yo(i,2);r!==null&&Zn(r,i,2)}function Gp(i){var r=On();if(typeof i=="function"){var o=i;if(i=o(),Za){ze(!0);try{o()}finally{ze(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},r}function Pb(i,r,o,c){return i.baseState=o,qp(i,ct,typeof c=="function"?c:Wi)}function R2(i,r,o,c,m){if(gf(i))throw Error(s(485));if(i=r.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};Z.T!==null?o(!0):y.isTransition=!1,c(y),o=r.pending,o===null?(y.next=r.pending=y,Mb(r,y)):(y.next=o.next,r.pending=o.next=y)}}function Mb(i,r){var o=r.action,c=r.payload,m=i.state;if(r.isTransition){var y=Z.T,w={};Z.T=w;try{var x=o(m,c),U=Z.S;U!==null&&U(w,x),Vb(i,r,x)}catch(W){$p(i,r,W)}finally{Z.T=y}}else try{y=o(m,c),Vb(i,r,y)}catch(W){$p(i,r,W)}}function Vb(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Ob(i,r,c)},function(c){return $p(i,r,c)}):Ob(i,r,o)}function Ob(i,r,o){r.status="fulfilled",r.value=o,kb(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,Mb(i,o)))}function $p(i,r,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,kb(r),r=r.next;while(r!==c)}i.action=null}function kb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function jb(i,r){return r}function Lb(i,r){if(tt){var o=mt.formState;if(o!==null){e:{var c=qe;if(tt){if(Rt){t:{for(var m=Rt,y=ii;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ns(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Rt=Ns(m.nextSibling),c=m.data==="F!";break e}}Wa(c)}c=!1}c&&(r=o[0])}}return o=On(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jb,lastRenderedState:r},o.queue=c,o=sE.bind(null,qe,c),c.dispatch=o,c=Gp(!1),y=Xp.bind(null,qe,!1,c.queue),c=On(),m={state:r,dispatch:null,action:i,pending:null},c.queue=m,o=R2.bind(null,qe,m,y,o),m.dispatch=o,c.memoizedState=i,[r,o,!1]}function Ub(i){var r=Bt();return Bb(r,ct,i)}function Bb(i,r,o){if(r=qp(i,r,jb)[0],i=df(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Bu(r)}catch(w){throw w===Vu?of:w}else c=r;r=Bt();var m=r.queue,y=m.dispatch;return o!==r.memoizedState&&(qe.flags|=2048,il(9,mf(),I2.bind(null,m,o),null)),[c,y,i]}function I2(i,r){i.action=r}function Fb(i){var r=Bt(),o=ct;if(o!==null)return Bb(r,o,i);Bt(),r=r.memoizedState,o=Bt();var c=o.queue.dispatch;return o.memoizedState=i,[r,c,!1]}function il(i,r,o,c){return i={tag:i,create:o,deps:c,inst:r,next:null},r=qe.updateQueue,r===null&&(r=Fp(),qe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,r.lastEffect=i),i}function mf(){return{destroy:void 0,resource:void 0}}function zb(){return Bt().memoizedState}function pf(i,r,o,c){var m=On();c=c===void 0?null:c,qe.flags|=i,m.memoizedState=il(1|r,mf(),o,c)}function Fu(i,r,o,c){var m=Bt();c=c===void 0?null:c;var y=m.memoizedState.inst;ct!==null&&c!==null&&kp(c,ct.memoizedState.deps)?m.memoizedState=il(r,y,o,c):(qe.flags|=i,m.memoizedState=il(1|r,y,o,c))}function qb(i,r){pf(8390656,8,i,r)}function Hb(i,r){Fu(2048,8,i,r)}function Gb(i,r){return Fu(4,2,i,r)}function $b(i,r){return Fu(4,4,i,r)}function Kb(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Wb(i,r,o){o=o!=null?o.concat([i]):null,Fu(4,4,Kb.bind(null,r,i),o)}function Kp(){}function Yb(i,r){var o=Bt();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&kp(r,c[1])?c[0]:(o.memoizedState=[i,r],i)}function Qb(i,r){var o=Bt();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&kp(r,c[1]))return c[0];if(c=i(),Za){ze(!0);try{i()}finally{ze(!1)}}return o.memoizedState=[c,r],c}function Wp(i,r,o){return o===void 0||(Vr&1073741824)!==0?i.memoizedState=r:(i.memoizedState=o,i=JE(),qe.lanes|=i,Fr|=i,o)}function Xb(i,r,o,c){return $n(o,r)?o:tl.current!==null?(i=Wp(i,o,c),$n(i,r)||(nn=!0),i):(Vr&42)===0?(nn=!0,i.memoizedState=o):(i=JE(),qe.lanes|=i,Fr|=i,r)}function Zb(i,r,o,c,m){var y=te.p;te.p=y!==0&&8>y?y:8;var w=Z.T,x={};Z.T=x,Xp(i,!1,r,o);try{var U=m(),W=Z.S;if(W!==null&&W(x,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=x2(U,c);zu(i,r,ie,Xn(i))}else zu(i,r,c,Xn(i))}catch(oe){zu(i,r,{then:function(){},status:"rejected",reason:oe},Xn())}finally{te.p=y,Z.T=w}}function C2(){}function Yp(i,r,o,c){if(i.tag!==5)throw Error(s(476));var m=Jb(i).queue;Zb(i,m,r,me,o===null?C2:function(){return eE(i),o(c)})}function Jb(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:me},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function eE(i){var r=Jb(i).next.queue;zu(i,r,{},Xn())}function Qp(){return _n(ac)}function tE(){return Bt().memoizedState}function nE(){return Bt().memoizedState}function N2(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Xn();i=Pr(o);var c=Mr(r,i,o);c!==null&&(Zn(c,r,o),ku(c,r,o)),r={cache:Ap()},i.payload=r;return}r=r.return}}function D2(i,r,o){var c=Xn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},gf(i)?iE(r,o):(o=gp(i,r,o,c),o!==null&&(Zn(o,i,c),rE(o,r,c)))}function sE(i,r,o){var c=Xn();zu(i,r,o,c)}function zu(i,r,o,c){var m={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(gf(i))iE(r,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var w=r.lastRenderedState,x=y(w,o);if(m.hasEagerState=!0,m.eagerState=x,$n(x,w))return Zh(i,r,m,0),mt===null&&Xh(),!1}catch{}finally{}if(o=gp(i,r,m,c),o!==null)return Zn(o,i,c),rE(o,r,c),!0}return!1}function Xp(i,r,o,c){if(c={lane:2,revertLane:Cg(),action:c,hasEagerState:!1,eagerState:null,next:null},gf(i)){if(r)throw Error(s(479))}else r=gp(i,o,c,2),r!==null&&Zn(r,i,2)}function gf(i){var r=i.alternate;return i===qe||r!==null&&r===qe}function iE(i,r){nl=cf=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function rE(i,r,o){if((o&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,o|=c,r.lanes=o,cu(i,o)}}var yf={readContext:_n,use:ff,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},aE={readContext:_n,use:ff,useCallback:function(i,r){return On().memoizedState=[i,r===void 0?null:r],i},useContext:_n,useEffect:qb,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,pf(4194308,4,Kb.bind(null,r,i),o)},useLayoutEffect:function(i,r){return pf(4194308,4,i,r)},useInsertionEffect:function(i,r){pf(4,2,i,r)},useMemo:function(i,r){var o=On();r=r===void 0?null:r;var c=i();if(Za){ze(!0);try{i()}finally{ze(!1)}}return o.memoizedState=[c,r],c},useReducer:function(i,r,o){var c=On();if(o!==void 0){var m=o(r);if(Za){ze(!0);try{o(r)}finally{ze(!1)}}}else m=r;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=D2.bind(null,qe,i),[c.memoizedState,i]},useRef:function(i){var r=On();return i={current:i},r.memoizedState=i},useState:function(i){i=Gp(i);var r=i.queue,o=sE.bind(null,qe,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Kp,useDeferredValue:function(i,r){var o=On();return Wp(o,i,r)},useTransition:function(){var i=Gp(!1);return i=Zb.bind(null,qe,i.queue,!0,!1),On().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var c=qe,m=On();if(tt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),mt===null)throw Error(s(349));(Ze&124)!==0||Rb(c,r,o)}m.memoizedState=o;var y={value:o,getSnapshot:r};return m.queue=y,qb(Cb.bind(null,c,y,i),[i]),c.flags|=2048,il(9,mf(),Ib.bind(null,c,y,o,r),null),o},useId:function(){var i=On(),r=mt.identifierPrefix;if(tt){var o=Gi,c=Hi;o=(c&~(1<<32-rt(c)-1)).toString(32)+o,r="«"+r+"R"+o,o=hf++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=S2++,r="«"+r+"r"+o.toString(32)+"»";return i.memoizedState=r},useHostTransitionStatus:Qp,useFormState:Lb,useActionState:Lb,useOptimistic:function(i){var r=On();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Xp.bind(null,qe,!0,o),o.dispatch=r,[i,r]},useMemoCache:zp,useCacheRefresh:function(){return On().memoizedState=N2.bind(null,qe)}},oE={readContext:_n,use:ff,useCallback:Yb,useContext:_n,useEffect:Hb,useImperativeHandle:Wb,useInsertionEffect:Gb,useLayoutEffect:$b,useMemo:Qb,useReducer:df,useRef:zb,useState:function(){return df(Wi)},useDebugValue:Kp,useDeferredValue:function(i,r){var o=Bt();return Xb(o,ct.memoizedState,i,r)},useTransition:function(){var i=df(Wi)[0],r=Bt().memoizedState;return[typeof i=="boolean"?i:Bu(i),r]},useSyncExternalStore:Ab,useId:tE,useHostTransitionStatus:Qp,useFormState:Ub,useActionState:Ub,useOptimistic:function(i,r){var o=Bt();return Pb(o,ct,i,r)},useMemoCache:zp,useCacheRefresh:nE},P2={readContext:_n,use:ff,useCallback:Yb,useContext:_n,useEffect:Hb,useImperativeHandle:Wb,useInsertionEffect:Gb,useLayoutEffect:$b,useMemo:Qb,useReducer:Hp,useRef:zb,useState:function(){return Hp(Wi)},useDebugValue:Kp,useDeferredValue:function(i,r){var o=Bt();return ct===null?Wp(o,i,r):Xb(o,ct.memoizedState,i,r)},useTransition:function(){var i=Hp(Wi)[0],r=Bt().memoizedState;return[typeof i=="boolean"?i:Bu(i),r]},useSyncExternalStore:Ab,useId:tE,useHostTransitionStatus:Qp,useFormState:Fb,useActionState:Fb,useOptimistic:function(i,r){var o=Bt();return ct!==null?Pb(o,ct,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:zp,useCacheRefresh:nE},rl=null,qu=0;function vf(i){var r=qu;return qu+=1,rl===null&&(rl=[]),vb(rl,i,r)}function Hu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function _f(i,r){throw r.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function lE(i){var r=i._init;return r(i._payload)}function uE(i){function r(G,H){if(i){var K=G.deletions;K===null?(G.deletions=[H],G.flags|=16):K.push(H)}}function o(G,H){if(!i)return null;for(;H!==null;)r(G,H),H=H.sibling;return null}function c(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function m(G,H){return G=qi(G,H),G.index=0,G.sibling=null,G}function y(G,H,K){return G.index=K,i?(K=G.alternate,K!==null?(K=K.index,K<H?(G.flags|=67108866,H):K):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function w(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function x(G,H,K,re){return H===null||H.tag!==6?(H=vp(K,G.mode,re),H.return=G,H):(H=m(H,K),H.return=G,H)}function U(G,H,K,re){var Te=K.type;return Te===D?ie(G,H,K.props.children,re,K.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&lE(Te)===H.type)?(H=m(H,K.props),Hu(H,K),H.return=G,H):(H=ef(K.type,K.key,K.props,null,G.mode,re),Hu(H,K),H.return=G,H)}function W(G,H,K,re){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=_p(K,G.mode,re),H.return=G,H):(H=m(H,K.children||[]),H.return=G,H)}function ie(G,H,K,re,Te){return H===null||H.tag!==7?(H=Ha(K,G.mode,re,Te),H.return=G,H):(H=m(H,K),H.return=G,H)}function oe(G,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=vp(""+H,G.mode,K),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return K=ef(H.type,H.key,H.props,null,G.mode,K),Hu(K,H),K.return=G,K;case S:return H=_p(H,G.mode,K),H.return=G,H;case A:var re=H._init;return H=re(H._payload),oe(G,H,K)}if(we(H)||C(H))return H=Ha(H,G.mode,K,null),H.return=G,H;if(typeof H.then=="function")return oe(G,vf(H),K);if(H.$$typeof===q)return oe(G,rf(G,H),K);_f(G,H)}return null}function Q(G,H,K,re){var Te=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Te!==null?null:x(G,H,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return K.key===Te?U(G,H,K,re):null;case S:return K.key===Te?W(G,H,K,re):null;case A:return Te=K._init,K=Te(K._payload),Q(G,H,K,re)}if(we(K)||C(K))return Te!==null?null:ie(G,H,K,re,null);if(typeof K.then=="function")return Q(G,H,vf(K),re);if(K.$$typeof===q)return Q(G,H,rf(G,K),re);_f(G,K)}return null}function J(G,H,K,re,Te){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(K)||null,x(H,G,""+re,Te);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case E:return G=G.get(re.key===null?K:re.key)||null,U(H,G,re,Te);case S:return G=G.get(re.key===null?K:re.key)||null,W(H,G,re,Te);case A:var He=re._init;return re=He(re._payload),J(G,H,K,re,Te)}if(we(re)||C(re))return G=G.get(K)||null,ie(H,G,re,Te,null);if(typeof re.then=="function")return J(G,H,K,vf(re),Te);if(re.$$typeof===q)return J(G,H,K,rf(H,re),Te);_f(H,re)}return null}function ke(G,H,K,re){for(var Te=null,He=null,Re=H,Pe=H=0,rn=null;Re!==null&&Pe<K.length;Pe++){Re.index>Pe?(rn=Re,Re=null):rn=Re.sibling;var et=Q(G,Re,K[Pe],re);if(et===null){Re===null&&(Re=rn);break}i&&Re&&et.alternate===null&&r(G,Re),H=y(et,H,Pe),He===null?Te=et:He.sibling=et,He=et,Re=rn}if(Pe===K.length)return o(G,Re),tt&&$a(G,Pe),Te;if(Re===null){for(;Pe<K.length;Pe++)Re=oe(G,K[Pe],re),Re!==null&&(H=y(Re,H,Pe),He===null?Te=Re:He.sibling=Re,He=Re);return tt&&$a(G,Pe),Te}for(Re=c(Re);Pe<K.length;Pe++)rn=J(Re,G,Pe,K[Pe],re),rn!==null&&(i&&rn.alternate!==null&&Re.delete(rn.key===null?Pe:rn.key),H=y(rn,H,Pe),He===null?Te=rn:He.sibling=rn,He=rn);return i&&Re.forEach(function(Qr){return r(G,Qr)}),tt&&$a(G,Pe),Te}function De(G,H,K,re){if(K==null)throw Error(s(151));for(var Te=null,He=null,Re=H,Pe=H=0,rn=null,et=K.next();Re!==null&&!et.done;Pe++,et=K.next()){Re.index>Pe?(rn=Re,Re=null):rn=Re.sibling;var Qr=Q(G,Re,et.value,re);if(Qr===null){Re===null&&(Re=rn);break}i&&Re&&Qr.alternate===null&&r(G,Re),H=y(Qr,H,Pe),He===null?Te=Qr:He.sibling=Qr,He=Qr,Re=rn}if(et.done)return o(G,Re),tt&&$a(G,Pe),Te;if(Re===null){for(;!et.done;Pe++,et=K.next())et=oe(G,et.value,re),et!==null&&(H=y(et,H,Pe),He===null?Te=et:He.sibling=et,He=et);return tt&&$a(G,Pe),Te}for(Re=c(Re);!et.done;Pe++,et=K.next())et=J(Re,G,Pe,et.value,re),et!==null&&(i&&et.alternate!==null&&Re.delete(et.key===null?Pe:et.key),H=y(et,H,Pe),He===null?Te=et:He.sibling=et,He=et);return i&&Re.forEach(function(MD){return r(G,MD)}),tt&&$a(G,Pe),Te}function ft(G,H,K,re){if(typeof K=="object"&&K!==null&&K.type===D&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case E:e:{for(var Te=K.key;H!==null;){if(H.key===Te){if(Te=K.type,Te===D){if(H.tag===7){o(G,H.sibling),re=m(H,K.props.children),re.return=G,G=re;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&lE(Te)===H.type){o(G,H.sibling),re=m(H,K.props),Hu(re,K),re.return=G,G=re;break e}o(G,H);break}else r(G,H);H=H.sibling}K.type===D?(re=Ha(K.props.children,G.mode,re,K.key),re.return=G,G=re):(re=ef(K.type,K.key,K.props,null,G.mode,re),Hu(re,K),re.return=G,G=re)}return w(G);case S:e:{for(Te=K.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){o(G,H.sibling),re=m(H,K.children||[]),re.return=G,G=re;break e}else{o(G,H);break}else r(G,H);H=H.sibling}re=_p(K,G.mode,re),re.return=G,G=re}return w(G);case A:return Te=K._init,K=Te(K._payload),ft(G,H,K,re)}if(we(K))return ke(G,H,K,re);if(C(K)){if(Te=C(K),typeof Te!="function")throw Error(s(150));return K=Te.call(K),De(G,H,K,re)}if(typeof K.then=="function")return ft(G,H,vf(K),re);if(K.$$typeof===q)return ft(G,H,rf(G,K),re);_f(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(o(G,H.sibling),re=m(H,K),re.return=G,G=re):(o(G,H),re=vp(K,G.mode,re),re.return=G,G=re),w(G)):o(G,H)}return function(G,H,K,re){try{qu=0;var Te=ft(G,H,K,re);return rl=null,Te}catch(Re){if(Re===Vu||Re===of)throw Re;var He=Kn(29,Re,null,G.mode);return He.lanes=re,He.return=G,He}finally{}}}var al=uE(!0),cE=uE(!1),ps=ue(null),ri=null;function Or(i){var r=i.alternate;he(Zt,Zt.current&1),he(ps,i),ri===null&&(r===null||tl.current!==null||r.memoizedState!==null)&&(ri=i)}function hE(i){if(i.tag===22){if(he(Zt,Zt.current),he(ps,i),ri===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(ri=i)}}else kr()}function kr(){he(Zt,Zt.current),he(ps,ps.current)}function Yi(i){ge(ps),ri===i&&(ri=null),ge(Zt)}var Zt=ue(0);function bf(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Fg(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Zp(i,r,o,c){r=i.memoizedState,o=o(c,r),o=o==null?r:g({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Jp={enqueueSetState:function(i,r,o){i=i._reactInternals;var c=Xn(),m=Pr(c);m.payload=r,o!=null&&(m.callback=o),r=Mr(i,m,c),r!==null&&(Zn(r,i,c),ku(r,i,c))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var c=Xn(),m=Pr(c);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=Mr(i,m,c),r!==null&&(Zn(r,i,c),ku(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Xn(),c=Pr(o);c.tag=2,r!=null&&(c.callback=r),r=Mr(i,c,o),r!==null&&(Zn(r,i,o),ku(r,i,o))}};function fE(i,r,o,c,m,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,w):r.prototype&&r.prototype.isPureReactComponent?!Au(o,c)||!Au(m,y):!0}function dE(i,r,o,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==i&&Jp.enqueueReplaceState(r,r.state,null)}function Ja(i,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(i=i.defaultProps){o===r&&(o=g({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}var Ef=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function mE(i){Ef(i)}function pE(i){console.error(i)}function gE(i){Ef(i)}function Tf(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function yE(i,r,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function eg(i,r,o){return o=Pr(o),o.tag=3,o.payload={element:null},o.callback=function(){Tf(i,r)},o}function vE(i){return i=Pr(i),i.tag=3,i}function _E(i,r,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=c.value;i.payload=function(){return m(y)},i.callback=function(){yE(r,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){yE(r,o,c),typeof m!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function M2(i,r,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Du(r,o,m,!0),o=ps.current,o!==null){switch(o.tag){case 13:return ri===null?xg():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Cp?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Ag(i,c,m)),!1;case 22:return o.flags|=65536,c===Cp?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Ag(i,c,m)),!1}throw Error(s(435,o.tag))}return Ag(i,c,m),xg(),!1}if(tt)return r=ps.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,c!==Tp&&(i=Error(s(422),{cause:c}),Nu(hs(i,o)))):(c!==Tp&&(r=Error(s(423),{cause:c}),Nu(hs(r,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=hs(c,o),m=eg(i.stateNode,c,m),Pp(i,m),It!==4&&(It=2)),!1;var y=Error(s(520),{cause:c});if(y=hs(y,o),Xu===null?Xu=[y]:Xu.push(y),It!==4&&(It=2),r===null)return!0;c=hs(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=eg(o.stateNode,c,i),Pp(o,i),!1;case 1:if(r=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zr===null||!zr.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=vE(m),_E(m,i,o,c),Pp(o,m),!1}o=o.return}while(o!==null);return!1}var bE=Error(s(461)),nn=!1;function cn(i,r,o,c){r.child=i===null?cE(r,null,o,c):al(r,i.child,o,c)}function EE(i,r,o,c,m){o=o.render;var y=r.ref;if("ref"in c){var w={};for(var x in c)x!=="ref"&&(w[x]=c[x])}else w=c;return Qa(r),c=jp(i,r,o,w,y,m),x=Lp(),i!==null&&!nn?(Up(i,r,m),Qi(i,r,m)):(tt&&x&&bp(r),r.flags|=1,cn(i,r,c,m),r.child)}function TE(i,r,o,c,m){if(i===null){var y=o.type;return typeof y=="function"&&!yp(y)&&y.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=y,wE(i,r,y,c,m)):(i=ef(o.type,null,c,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(y=i.child,!lg(i,m)){var w=y.memoizedProps;if(o=o.compare,o=o!==null?o:Au,o(w,c)&&i.ref===r.ref)return Qi(i,r,m)}return r.flags|=1,i=qi(y,c),i.ref=r.ref,i.return=r,r.child=i}function wE(i,r,o,c,m){if(i!==null){var y=i.memoizedProps;if(Au(y,c)&&i.ref===r.ref)if(nn=!1,r.pendingProps=c=y,lg(i,m))(i.flags&131072)!==0&&(nn=!0);else return r.lanes=i.lanes,Qi(i,r,m)}return tg(i,r,o,c,m)}function xE(i,r,o){var c=r.pendingProps,m=c.children,y=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=y!==null?y.baseLanes|o:o,i!==null){for(m=r.child=i.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;r.childLanes=y&~c}else r.childLanes=0,r.child=null;return SE(i,r,c,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&af(r,y!==null?y.cachePool:null),y!==null?wb(r,y):Vp(),hE(r);else return r.lanes=r.childLanes=536870912,SE(i,r,y!==null?y.baseLanes|o:o,o)}else y!==null?(af(r,y.cachePool),wb(r,y),kr(),r.memoizedState=null):(i!==null&&af(r,null),Vp(),kr());return cn(i,r,m,o),r.child}function SE(i,r,o,c){var m=Ip();return m=m===null?null:{parent:Xt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},i!==null&&af(r,null),Vp(),hE(r),i!==null&&Du(i,r,c,!0),null}function wf(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function tg(i,r,o,c,m){return Qa(r),o=jp(i,r,o,c,void 0,m),c=Lp(),i!==null&&!nn?(Up(i,r,m),Qi(i,r,m)):(tt&&c&&bp(r),r.flags|=1,cn(i,r,o,m),r.child)}function AE(i,r,o,c,m,y){return Qa(r),r.updateQueue=null,o=Sb(r,c,o,m),xb(i),c=Lp(),i!==null&&!nn?(Up(i,r,y),Qi(i,r,y)):(tt&&c&&bp(r),r.flags|=1,cn(i,r,o,y),r.child)}function RE(i,r,o,c,m){if(Qa(r),r.stateNode===null){var y=Qo,w=o.contextType;typeof w=="object"&&w!==null&&(y=_n(w)),y=new o(c,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Jp,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=c,y.state=r.memoizedState,y.refs={},Np(r),w=o.contextType,y.context=typeof w=="object"&&w!==null?_n(w):Qo,y.state=r.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Zp(r,o,w,c),y.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Jp.enqueueReplaceState(y,y.state,null),Lu(r,c,y,m),ju(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){y=r.stateNode;var x=r.memoizedProps,U=Ja(o,x);y.props=U;var W=y.context,ie=o.contextType;w=Qo,typeof ie=="object"&&ie!==null&&(w=_n(ie));var oe=o.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||W!==w)&&dE(r,y,c,w),Dr=!1;var Q=r.memoizedState;y.state=Q,Lu(r,c,y,m),ju(),W=r.memoizedState,x||Q!==W||Dr?(typeof oe=="function"&&(Zp(r,o,oe,c),W=r.memoizedState),(U=Dr||fE(r,o,U,c,Q,W,w))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=W),y.props=c,y.state=W,y.context=w,c=U):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{y=r.stateNode,Dp(i,r),w=r.memoizedProps,ie=Ja(o,w),y.props=ie,oe=r.pendingProps,Q=y.context,W=o.contextType,U=Qo,typeof W=="object"&&W!==null&&(U=_n(W)),x=o.getDerivedStateFromProps,(W=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==oe||Q!==U)&&dE(r,y,c,U),Dr=!1,Q=r.memoizedState,y.state=Q,Lu(r,c,y,m),ju();var J=r.memoizedState;w!==oe||Q!==J||Dr||i!==null&&i.dependencies!==null&&sf(i.dependencies)?(typeof x=="function"&&(Zp(r,o,x,c),J=r.memoizedState),(ie=Dr||fE(r,o,ie,c,Q,J,U)||i!==null&&i.dependencies!==null&&sf(i.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,J,U),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,J,U)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=J),y.props=c,y.state=J,y.context=U,c=ie):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),c=!1)}return y=c,wf(i,r),c=(r.flags&128)!==0,y||c?(y=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,i!==null&&c?(r.child=al(r,i.child,null,m),r.child=al(r,null,o,m)):cn(i,r,o,m),r.memoizedState=y.state,i=r.child):i=Qi(i,r,m),i}function IE(i,r,o,c){return Cu(),r.flags|=256,cn(i,r,o,c),r.child}var ng={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(i){return{baseLanes:i,cachePool:pb()}}function ig(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=gs),i}function CE(i,r,o){var c=r.pendingProps,m=!1,y=(r.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(Zt.current&2)!==0),w&&(m=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(tt){if(m?Or(r):kr(),tt){var x=Rt,U;if(U=x){e:{for(U=x,x=ii;U.nodeType!==8;){if(!x){x=null;break e}if(U=Ns(U.nextSibling),U===null){x=null;break e}}x=U}x!==null?(r.memoizedState={dehydrated:x,treeContext:Ga!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},U=Kn(18,null,null,0),U.stateNode=x,U.return=r,r.child=U,Cn=r,Rt=null,U=!0):U=!1}U||Wa(r)}if(x=r.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return Fg(x)?r.lanes=32:r.lanes=536870912,null;Yi(r)}return x=c.children,c=c.fallback,m?(kr(),m=r.mode,x=xf({mode:"hidden",children:x},m),c=Ha(c,m,o,null),x.return=r,c.return=r,x.sibling=c,r.child=x,m=r.child,m.memoizedState=sg(o),m.childLanes=ig(i,w,o),r.memoizedState=ng,c):(Or(r),rg(r,x))}if(U=i.memoizedState,U!==null&&(x=U.dehydrated,x!==null)){if(y)r.flags&256?(Or(r),r.flags&=-257,r=ag(i,r,o)):r.memoizedState!==null?(kr(),r.child=i.child,r.flags|=128,r=null):(kr(),m=c.fallback,x=r.mode,c=xf({mode:"visible",children:c.children},x),m=Ha(m,x,o,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,al(r,i.child,null,o),c=r.child,c.memoizedState=sg(o),c.childLanes=ig(i,w,o),r.memoizedState=ng,r=m);else if(Or(r),Fg(x)){if(w=x.nextSibling&&x.nextSibling.dataset,w)var W=w.dgst;w=W,c=Error(s(419)),c.stack="",c.digest=w,Nu({value:c,source:null,stack:null}),r=ag(i,r,o)}else if(nn||Du(i,r,o,!1),w=(o&i.childLanes)!==0,nn||w){if(w=mt,w!==null&&(c=o&-o,c=(c&42)!==0?1:wr(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==U.retryLane))throw U.retryLane=c,Yo(i,c),Zn(w,i,c),bE;x.data==="$?"||xg(),r=ag(i,r,o)}else x.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=U.treeContext,Rt=Ns(x.nextSibling),Cn=r,tt=!0,Ka=null,ii=!1,i!==null&&(ds[ms++]=Hi,ds[ms++]=Gi,ds[ms++]=Ga,Hi=i.id,Gi=i.overflow,Ga=r),r=rg(r,c.children),r.flags|=4096);return r}return m?(kr(),m=c.fallback,x=r.mode,U=i.child,W=U.sibling,c=qi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,W!==null?m=qi(W,m):(m=Ha(m,x,o,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,x=i.child.memoizedState,x===null?x=sg(o):(U=x.cachePool,U!==null?(W=Xt._currentValue,U=U.parent!==W?{parent:W,pool:W}:U):U=pb(),x={baseLanes:x.baseLanes|o,cachePool:U}),m.memoizedState=x,m.childLanes=ig(i,w,o),r.memoizedState=ng,c):(Or(r),o=i.child,i=o.sibling,o=qi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=o,r.memoizedState=null,o)}function rg(i,r){return r=xf({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function xf(i,r){return i=Kn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ag(i,r,o){return al(r,i.child,null,o),i=rg(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function NE(i,r,o){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),xp(i.return,r,o)}function og(i,r,o,c,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=o,y.tailMode=m)}function DE(i,r,o){var c=r.pendingProps,m=c.revealOrder,y=c.tail;if(cn(i,r,c.children,o),c=Zt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&NE(i,o,r);else if(i.tag===19)NE(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(he(Zt,c),m){case"forwards":for(o=r.child,m=null;o!==null;)i=o.alternate,i!==null&&bf(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),og(r,!1,m,o,y);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&bf(i)===null){r.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}og(r,!0,o,null,y);break;case"together":og(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qi(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),Fr|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Du(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=qi(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=qi(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function lg(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&sf(i)))}function V2(i,r,o){switch(r.tag){case 3:it(r,r.stateNode.containerInfo),Nr(r,Xt,i.memoizedState.cache),Cu();break;case 27:case 5:is(r);break;case 4:it(r,r.stateNode.containerInfo);break;case 10:Nr(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Or(r),r.flags|=128,null):(o&r.child.childLanes)!==0?CE(i,r,o):(Or(r),i=Qi(i,r,o),i!==null?i.sibling:null);Or(r);break;case 19:var m=(i.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Du(i,r,o,!1),c=(o&r.childLanes)!==0),m){if(c)return DE(i,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),he(Zt,Zt.current),c)break;return null;case 22:case 23:return r.lanes=0,xE(i,r,o);case 24:Nr(r,Xt,i.memoizedState.cache)}return Qi(i,r,o)}function PE(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)nn=!0;else{if(!lg(i,o)&&(r.flags&128)===0)return nn=!1,V2(i,r,o);nn=(i.flags&131072)!==0}else nn=!1,tt&&(r.flags&1048576)!==0&&lb(r,nf,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var c=r.elementType,m=c._init;if(c=m(c._payload),r.type=c,typeof c=="function")yp(c)?(i=Ja(c,i),r.tag=1,r=RE(null,r,c,i,o)):(r.tag=0,r=tg(null,r,c,i,o));else{if(c!=null){if(m=c.$$typeof,m===se){r.tag=11,r=EE(null,r,c,i,o);break e}else if(m===j){r.tag=14,r=TE(null,r,c,i,o);break e}}throw r=ve(c)||c,Error(s(306,r,""))}}return r;case 0:return tg(i,r,r.type,r.pendingProps,o);case 1:return c=r.type,m=Ja(c,r.pendingProps),RE(i,r,c,m,o);case 3:e:{if(it(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var y=r.memoizedState;m=y.element,Dp(i,r),Lu(r,c,null,o);var w=r.memoizedState;if(c=w.cache,Nr(r,Xt,c),c!==y.cache&&Sp(r,[Xt],o,!0),ju(),c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=IE(i,r,c,o);break e}else if(c!==m){m=hs(Error(s(424)),r),Nu(m),r=IE(i,r,c,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Rt=Ns(i.firstChild),Cn=r,tt=!0,Ka=null,ii=!0,o=cE(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Cu(),c===m){r=Qi(i,r,o);break e}cn(i,r,c,o)}r=r.child}return r;case 26:return wf(i,r),i===null?(o=kT(r.type,null,r.pendingProps,null))?r.memoizedState=o:tt||(o=r.type,i=r.pendingProps,c=Lf(Oe.current).createElement(o),c[Wt]=r,c[jt]=i,fn(c,o,i),Nt(c),r.stateNode=c):r.memoizedState=kT(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return is(r),i===null&&tt&&(c=r.stateNode=MT(r.type,r.pendingProps,Oe.current),Cn=r,ii=!0,m=Rt,Gr(r.type)?(zg=m,Rt=Ns(c.firstChild)):Rt=m),cn(i,r,r.pendingProps.children,o),wf(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&tt&&((m=c=Rt)&&(c=lD(c,r.type,r.pendingProps,ii),c!==null?(r.stateNode=c,Cn=r,Rt=Ns(c.firstChild),ii=!1,m=!0):m=!1),m||Wa(r)),is(r),m=r.type,y=r.pendingProps,w=i!==null?i.memoizedProps:null,c=y.children,Lg(m,y)?c=null:w!==null&&Lg(m,w)&&(r.flags|=32),r.memoizedState!==null&&(m=jp(i,r,A2,null,null,o),ac._currentValue=m),wf(i,r),cn(i,r,c,o),r.child;case 6:return i===null&&tt&&((i=o=Rt)&&(o=uD(o,r.pendingProps,ii),o!==null?(r.stateNode=o,Cn=r,Rt=null,i=!0):i=!1),i||Wa(r)),null;case 13:return CE(i,r,o);case 4:return it(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=al(r,null,c,o):cn(i,r,c,o),r.child;case 11:return EE(i,r,r.type,r.pendingProps,o);case 7:return cn(i,r,r.pendingProps,o),r.child;case 8:return cn(i,r,r.pendingProps.children,o),r.child;case 12:return cn(i,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Nr(r,r.type,c.value),cn(i,r,c.children,o),r.child;case 9:return m=r.type._context,c=r.pendingProps.children,Qa(r),m=_n(m),c=c(m),r.flags|=1,cn(i,r,c,o),r.child;case 14:return TE(i,r,r.type,r.pendingProps,o);case 15:return wE(i,r,r.type,r.pendingProps,o);case 19:return DE(i,r,o);case 31:return c=r.pendingProps,o=r.mode,c={mode:c.mode,children:c.children},i===null?(o=xf(c,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=qi(i.child,c),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return xE(i,r,o);case 24:return Qa(r),c=_n(Xt),i===null?(m=Ip(),m===null&&(m=mt,y=Ap(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),r.memoizedState={parent:c,cache:m},Np(r),Nr(r,Xt,m)):((i.lanes&o)!==0&&(Dp(i,r),Lu(r,null,null,o),ju()),m=i.memoizedState,y=r.memoizedState,m.parent!==c?(m={parent:c,cache:c},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Nr(r,Xt,c)):(c=y.cache,Nr(r,Xt,c),c!==m.cache&&Sp(r,[Xt],o,!0))),cn(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xi(i){i.flags|=4}function ME(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!FT(r)){if(r=ps.current,r!==null&&((Ze&4194048)===Ze?ri!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||r!==ri))throw Ou=Cp,gb;i.flags|=8192}}function Sf(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?lu():536870912,i.lanes|=r,cl|=r)}function Gu(i,r){if(!tt)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Tt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(r)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=o,r}function O2(i,r,o){var c=r.pendingProps;switch(Ep(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(r),null;case 1:return Tt(r),null;case 3:return o=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ki(Xt),Mn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Iu(r)?Xi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hb())),Tt(r),null;case 26:return o=r.memoizedState,i===null?(Xi(r),o!==null?(Tt(r),ME(r,o)):(Tt(r),r.flags&=-16777217)):o?o!==i.memoizedState?(Xi(r),Tt(r),ME(r,o)):(Tt(r),r.flags&=-16777217):(i.memoizedProps!==c&&Xi(r),Tt(r),r.flags&=-16777217),null;case 27:ws(r),o=Oe.current;var m=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Tt(r),null}i=Ie.current,Iu(r)?ub(r):(i=MT(m,c,o),r.stateNode=i,Xi(r))}return Tt(r),null;case 5:if(ws(r),o=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Tt(r),null}if(i=Ie.current,Iu(r))ub(r);else{switch(m=Lf(Oe.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(o,{is:c.is}):m.createElement(o)}}i[Wt]=r,i[jt]=c;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=i;e:switch(fn(i,o,c),o){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Xi(r)}}return Tt(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&Xi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=Oe.current,Iu(r)){if(i=r.stateNode,o=r.memoizedProps,c=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[Wt]=r,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||AT(i.nodeValue,o)),i||Wa(r)}else i=Lf(i).createTextNode(c),i[Wt]=r,r.stateNode=i}return Tt(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Iu(r),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Wt]=r}else Cu(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tt(r),m=!1}else m=hb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Yi(r),r):(Yi(r),null)}if(Yi(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=c!==null,i=i!==null&&i.memoizedState!==null,o){c=r.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==m&&(c.flags|=2048)}return o!==i&&o&&(r.child.flags|=8192),Sf(r,r.updateQueue),Tt(r),null;case 4:return Mn(),i===null&&Mg(r.stateNode.containerInfo),Tt(r),null;case 10:return Ki(r.type),Tt(r),null;case 19:if(ge(Zt),m=r.memoizedState,m===null)return Tt(r),null;if(c=(r.flags&128)!==0,y=m.rendering,y===null)if(c)Gu(m,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(y=bf(i),y!==null){for(r.flags|=128,Gu(m,!1),i=y.updateQueue,r.updateQueue=i,Sf(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)ob(o,i),o=o.sibling;return he(Zt,Zt.current&1|2),r.child}i=i.sibling}m.tail!==null&&Vn()>If&&(r.flags|=128,c=!0,Gu(m,!1),r.lanes=4194304)}else{if(!c)if(i=bf(y),i!==null){if(r.flags|=128,c=!0,i=i.updateQueue,r.updateQueue=i,Sf(r,i),Gu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!tt)return Tt(r),null}else 2*Vn()-m.renderingStartTime>If&&o!==536870912&&(r.flags|=128,c=!0,Gu(m,!1),r.lanes=4194304);m.isBackwards?(y.sibling=r.child,r.child=y):(i=m.last,i!==null?i.sibling=y:r.child=y,m.last=y)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Vn(),r.sibling=null,i=Zt.current,he(Zt,c?i&1|2:i&1),r):(Tt(r),null);case 22:case 23:return Yi(r),Op(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Tt(r),r.subtreeFlags&6&&(r.flags|=8192)):Tt(r),o=r.updateQueue,o!==null&&Sf(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),i!==null&&ge(Xa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Ki(Xt),Tt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function k2(i,r){switch(Ep(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ki(Xt),Mn(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ws(r),null;case 13:if(Yi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Cu()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ge(Zt),null;case 4:return Mn(),null;case 10:return Ki(r.type),null;case 22:case 23:return Yi(r),Op(),i!==null&&ge(Xa),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ki(Xt),null;case 25:return null;default:return null}}function VE(i,r){switch(Ep(r),r.tag){case 3:Ki(Xt),Mn();break;case 26:case 27:case 5:ws(r);break;case 4:Mn();break;case 13:Yi(r);break;case 19:ge(Zt);break;case 10:Ki(r.type);break;case 22:case 23:Yi(r),Op(),i!==null&&ge(Xa);break;case 24:Ki(Xt)}}function $u(i,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&i)===i){c=void 0;var y=o.create,w=o.inst;c=y(),w.destroy=c}o=o.next}while(o!==m)}}catch(x){dt(r,r.return,x)}}function jr(i,r,o){try{var c=r.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&i)===i){var w=c.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,m=r;var U=o,W=x;try{W()}catch(ie){dt(m,U,ie)}}}c=c.next}while(c!==y)}}catch(ie){dt(r,r.return,ie)}}function OE(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{Tb(r,o)}catch(c){dt(i,i.return,c)}}}function kE(i,r,o){o.props=Ja(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){dt(i,r,c)}}function Ku(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof o=="function"?i.refCleanup=o(c):o.current=c}}catch(m){dt(i,r,m)}}function ai(i,r){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){dt(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){dt(i,r,m)}else o.current=null}function jE(i){var r=i.type,o=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){dt(i,i.return,m)}}function ug(i,r,o){try{var c=i.stateNode;sD(c,i.type,o,r),c[jt]=r}catch(m){dt(i,i.return,m)}}function LE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Gr(i.type)||i.tag===4}function cg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||LE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Gr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hg(i,r,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=jf));else if(c!==4&&(c===27&&Gr(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(hg(i,r,o),i=i.sibling;i!==null;)hg(i,r,o),i=i.sibling}function Af(i,r,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(c!==4&&(c===27&&Gr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Af(i,r,o),i=i.sibling;i!==null;)Af(i,r,o),i=i.sibling}function UE(i){var r=i.stateNode,o=i.memoizedProps;try{for(var c=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);fn(r,c,o),r[Wt]=i,r[jt]=o}catch(y){dt(i,i.return,y)}}var Zi=!1,Pt=!1,fg=!1,BE=typeof WeakSet=="function"?WeakSet:Set,sn=null;function j2(i,r){if(i=i.containerInfo,kg=Hf,i=X_(i),cp(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var w=0,x=-1,U=-1,W=0,ie=0,oe=i,Q=null;t:for(;;){for(var J;oe!==o||m!==0&&oe.nodeType!==3||(x=w+m),oe!==y||c!==0&&oe.nodeType!==3||(U=w+c),oe.nodeType===3&&(w+=oe.nodeValue.length),(J=oe.firstChild)!==null;)Q=oe,oe=J;for(;;){if(oe===i)break t;if(Q===o&&++W===m&&(x=w),Q===y&&++ie===c&&(U=w),(J=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=J}o=x===-1||U===-1?null:{start:x,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(jg={focusedElem:i,selectionRange:o},Hf=!1,sn=r;sn!==null;)if(r=sn,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,sn=i;else for(;sn!==null;){switch(r=sn,y=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,o=r,m=y.memoizedProps,y=y.memoizedState,c=o.stateNode;try{var ke=Ja(o.type,m,o.elementType===o.type);i=c.getSnapshotBeforeUpdate(ke,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(De){dt(o,o.return,De)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Bg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Bg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,sn=i;break}sn=r.return}}function FE(i,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Lr(i,o),c&4&&$u(5,o);break;case 1:if(Lr(i,o),c&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(w){dt(o,o.return,w)}else{var m=Ja(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){dt(o,o.return,w)}}c&64&&OE(o),c&512&&Ku(o,o.return);break;case 3:if(Lr(i,o),c&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Tb(i,r)}catch(w){dt(o,o.return,w)}}break;case 27:r===null&&c&4&&UE(o);case 26:case 5:Lr(i,o),r===null&&c&4&&jE(o),c&512&&Ku(o,o.return);break;case 12:Lr(i,o);break;case 13:Lr(i,o),c&4&&HE(i,o),c&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=$2.bind(null,o),cD(i,o))));break;case 22:if(c=o.memoizedState!==null||Zi,!c){r=r!==null&&r.memoizedState!==null||Pt,m=Zi;var y=Pt;Zi=c,(Pt=r)&&!y?Ur(i,o,(o.subtreeFlags&8772)!==0):Lr(i,o),Zi=m,Pt=y}break;case 30:break;default:Lr(i,o)}}function zE(i){var r=i.alternate;r!==null&&(i.alternate=null,zE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ar(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,kn=!1;function Ji(i,r,o){for(o=o.child;o!==null;)qE(i,r,o),o=o.sibling}function qE(i,r,o){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(ye,o)}catch{}switch(o.tag){case 26:Pt||ai(o,r),Ji(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||ai(o,r);var c=vt,m=kn;Gr(o.type)&&(vt=o.stateNode,kn=!1),Ji(i,r,o),nc(o.stateNode),vt=c,kn=m;break;case 5:Pt||ai(o,r);case 6:if(c=vt,m=kn,vt=null,Ji(i,r,o),vt=c,kn=m,vt!==null)if(kn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(y){dt(o,r,y)}else try{vt.removeChild(o.stateNode)}catch(y){dt(o,r,y)}break;case 18:vt!==null&&(kn?(i=vt,DT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),cc(i)):DT(vt,o.stateNode));break;case 4:c=vt,m=kn,vt=o.stateNode.containerInfo,kn=!0,Ji(i,r,o),vt=c,kn=m;break;case 0:case 11:case 14:case 15:Pt||jr(2,o,r),Pt||jr(4,o,r),Ji(i,r,o);break;case 1:Pt||(ai(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&kE(o,r,c)),Ji(i,r,o);break;case 21:Ji(i,r,o);break;case 22:Pt=(c=Pt)||o.memoizedState!==null,Ji(i,r,o),Pt=c;break;default:Ji(i,r,o)}}function HE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{cc(i)}catch(o){dt(r,r.return,o)}}function L2(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new BE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new BE),r;default:throw Error(s(435,i.tag))}}function dg(i,r){var o=L2(i);r.forEach(function(c){var m=K2.bind(null,i,c);o.has(c)||(o.add(c),c.then(m,m))})}function Wn(i,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],y=i,w=r,x=w;e:for(;x!==null;){switch(x.tag){case 27:if(Gr(x.type)){vt=x.stateNode,kn=!1;break e}break;case 5:vt=x.stateNode,kn=!1;break e;case 3:case 4:vt=x.stateNode.containerInfo,kn=!0;break e}x=x.return}if(vt===null)throw Error(s(160));qE(y,w,m),vt=null,kn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)GE(r,i),r=r.sibling}var Cs=null;function GE(i,r){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Wn(r,i),Yn(i),c&4&&(jr(3,i,i.return),$u(3,i),jr(5,i,i.return));break;case 1:Wn(r,i),Yn(i),c&512&&(Pt||o===null||ai(o,o.return)),c&64&&Zi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=Cs;if(Wn(r,i),Yn(i),c&512&&(Pt||o===null||ai(o,o.return)),c&4){var y=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){e:{c=i.type,o=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ia]||y[Wt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(c),m.head.insertBefore(y,m.querySelector("head > title"))),fn(y,c,o),y[Wt]=i,Nt(y),c=y;break e;case"link":var w=UT("link","href",m).get(c+(o.href||""));if(w){for(var x=0;x<w.length;x++)if(y=w[x],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(x,1);break t}}y=m.createElement(c),fn(y,c,o),m.head.appendChild(y);break;case"meta":if(w=UT("meta","content",m).get(c+(o.content||""))){for(x=0;x<w.length;x++)if(y=w[x],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(x,1);break t}}y=m.createElement(c),fn(y,c,o),m.head.appendChild(y);break;default:throw Error(s(468,c))}y[Wt]=i,Nt(y),c=y}i.stateNode=c}else BT(m,i.type,i.stateNode);else i.stateNode=LT(m,c,i.memoizedProps);else y!==c?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,c===null?BT(m,i.type,i.stateNode):LT(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ug(i,i.memoizedProps,o.memoizedProps)}break;case 27:Wn(r,i),Yn(i),c&512&&(Pt||o===null||ai(o,o.return)),o!==null&&c&4&&ug(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Wn(r,i),Yn(i),c&512&&(Pt||o===null||ai(o,o.return)),i.flags&32){m=i.stateNode;try{os(m,"")}catch(J){dt(i,i.return,J)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,ug(i,m,o!==null?o.memoizedProps:m)),c&1024&&(fg=!0);break;case 6:if(Wn(r,i),Yn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(J){dt(i,i.return,J)}}break;case 3:if(Ff=null,m=Cs,Cs=Uf(r.containerInfo),Wn(r,i),Cs=m,Yn(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{cc(r.containerInfo)}catch(J){dt(i,i.return,J)}fg&&(fg=!1,$E(i));break;case 4:c=Cs,Cs=Uf(i.stateNode.containerInfo),Wn(r,i),Yn(i),Cs=c;break;case 12:Wn(r,i),Yn(i);break;case 13:Wn(r,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_g=Vn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,dg(i,c)));break;case 22:m=i.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,W=Zi,ie=Pt;if(Zi=W||m,Pt=ie||U,Wn(r,i),Pt=ie,Zi=W,Yn(i),c&8192)e:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||U||Zi||Pt||eo(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(y=U.stateNode,m)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{x=U.stateNode;var oe=U.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;x.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(J){dt(U,U.return,J)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(J){dt(U,U.return,J)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,dg(i,o))));break;case 19:Wn(r,i),Yn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,dg(i,c)));break;case 30:break;case 21:break;default:Wn(r,i),Yn(i)}}function Yn(i){var r=i.flags;if(r&2){try{for(var o,c=i.return;c!==null;){if(LE(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=cg(i);Af(i,y,m);break;case 5:var w=o.stateNode;o.flags&32&&(os(w,""),o.flags&=-33);var x=cg(i);Af(i,x,w);break;case 3:case 4:var U=o.stateNode.containerInfo,W=cg(i);hg(i,W,U);break;default:throw Error(s(161))}}catch(ie){dt(i,i.return,ie)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function $E(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;$E(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Lr(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)FE(i,r.alternate,r),r=r.sibling}function eo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:jr(4,r,r.return),eo(r);break;case 1:ai(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&kE(r,r.return,o),eo(r);break;case 27:nc(r.stateNode);case 26:case 5:ai(r,r.return),eo(r);break;case 22:r.memoizedState===null&&eo(r);break;case 30:eo(r);break;default:eo(r)}i=i.sibling}}function Ur(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,m=i,y=r,w=y.flags;switch(y.tag){case 0:case 11:case 15:Ur(m,y,o),$u(4,y);break;case 1:if(Ur(m,y,o),c=y,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){dt(c,c.return,W)}if(c=y,m=c.updateQueue,m!==null){var x=c.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)Eb(U[m],x)}catch(W){dt(c,c.return,W)}}o&&w&64&&OE(y),Ku(y,y.return);break;case 27:UE(y);case 26:case 5:Ur(m,y,o),o&&c===null&&w&4&&jE(y),Ku(y,y.return);break;case 12:Ur(m,y,o);break;case 13:Ur(m,y,o),o&&w&4&&HE(m,y);break;case 22:y.memoizedState===null&&Ur(m,y,o),Ku(y,y.return);break;case 30:break;default:Ur(m,y,o)}r=r.sibling}}function mg(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Pu(o))}function pg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Pu(i))}function oi(i,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)KE(i,r,o,c),r=r.sibling}function KE(i,r,o,c){var m=r.flags;switch(r.tag){case 0:case 11:case 15:oi(i,r,o,c),m&2048&&$u(9,r);break;case 1:oi(i,r,o,c);break;case 3:oi(i,r,o,c),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Pu(i)));break;case 12:if(m&2048){oi(i,r,o,c),i=r.stateNode;try{var y=r.memoizedProps,w=y.id,x=y.onPostCommit;typeof x=="function"&&x(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){dt(r,r.return,U)}}else oi(i,r,o,c);break;case 13:oi(i,r,o,c);break;case 23:break;case 22:y=r.stateNode,w=r.alternate,r.memoizedState!==null?y._visibility&2?oi(i,r,o,c):Wu(i,r):y._visibility&2?oi(i,r,o,c):(y._visibility|=2,ol(i,r,o,c,(r.subtreeFlags&10256)!==0)),m&2048&&mg(w,r);break;case 24:oi(i,r,o,c),m&2048&&pg(r.alternate,r);break;default:oi(i,r,o,c)}}function ol(i,r,o,c,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var y=i,w=r,x=o,U=c,W=w.flags;switch(w.tag){case 0:case 11:case 15:ol(y,w,x,U,m),$u(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?ol(y,w,x,U,m):Wu(y,w):(ie._visibility|=2,ol(y,w,x,U,m)),m&&W&2048&&mg(w.alternate,w);break;case 24:ol(y,w,x,U,m),m&&W&2048&&pg(w.alternate,w);break;default:ol(y,w,x,U,m)}r=r.sibling}}function Wu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,c=r,m=c.flags;switch(c.tag){case 22:Wu(o,c),m&2048&&mg(c.alternate,c);break;case 24:Wu(o,c),m&2048&&pg(c.alternate,c);break;default:Wu(o,c)}r=r.sibling}}var Yu=8192;function ll(i){if(i.subtreeFlags&Yu)for(i=i.child;i!==null;)WE(i),i=i.sibling}function WE(i){switch(i.tag){case 26:ll(i),i.flags&Yu&&i.memoizedState!==null&&wD(Cs,i.memoizedState,i.memoizedProps);break;case 5:ll(i);break;case 3:case 4:var r=Cs;Cs=Uf(i.stateNode.containerInfo),ll(i),Cs=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Yu,Yu=16777216,ll(i),Yu=r):ll(i));break;default:ll(i)}}function YE(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Qu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];sn=c,XE(c,i)}YE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)QE(i),i=i.sibling}function QE(i){switch(i.tag){case 0:case 11:case 15:Qu(i),i.flags&2048&&jr(9,i,i.return);break;case 3:Qu(i);break;case 12:Qu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Rf(i)):Qu(i);break;default:Qu(i)}}function Rf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];sn=c,XE(c,i)}YE(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:jr(8,r,r.return),Rf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Rf(r));break;default:Rf(r)}i=i.sibling}}function XE(i,r){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:jr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,sn=c;else e:for(o=i;sn!==null;){c=sn;var m=c.sibling,y=c.return;if(zE(c),c===o){sn=null;break e}if(m!==null){m.return=y,sn=m;break e}sn=y}}}var U2={getCacheForType:function(i){var r=_n(Xt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o}},B2=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Ge=null,Ze=0,ot=0,Qn=null,Br=!1,ul=!1,gg=!1,er=0,It=0,Fr=0,to=0,yg=0,gs=0,cl=0,Xu=null,jn=null,vg=!1,_g=0,If=1/0,Cf=null,zr=null,hn=0,qr=null,hl=null,fl=0,bg=0,Eg=null,ZE=null,Zu=0,Tg=null;function Xn(){if((at&2)!==0&&Ze!==0)return Ze&-Ze;if(Z.T!==null){var i=Jo;return i!==0?i:Cg()}return xr()}function JE(){gs===0&&(gs=(Ze&536870912)===0||tt?ou():536870912);var i=ps.current;return i!==null&&(i.flags|=32),gs}function Zn(i,r,o){(i===mt&&(ot===2||ot===9)||i.cancelPendingCommit!==null)&&(dl(i,0),Hr(i,Ze,gs,!1)),Pi(i,o),((at&2)===0||i!==mt)&&(i===mt&&((at&2)===0&&(to|=o),It===4&&Hr(i,Ze,gs,!1)),li(i))}function eT(i,r,o){if((at&6)!==0)throw Error(s(327));var c=!o&&(r&124)===0&&(r&i.expiredLanes)===0||Ni(i,r),m=c?q2(i,r):Sg(i,r,!0),y=c;do{if(m===0){ul&&!c&&Hr(i,r,0,!1);break}else{if(o=i.current.alternate,y&&!F2(o)){m=Sg(i,r,!1),y=!1;continue}if(m===2){if(y=r,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var x=i;m=Xu;var U=x.current.memoizedState.isDehydrated;if(U&&(dl(x,w).flags|=256),w=Sg(x,w,!1),w!==2){if(gg&&!U){x.errorRecoveryDisabledLanes|=y,to|=y,m=4;break e}y=jn,jn=m,y!==null&&(jn===null?jn=y:jn.push.apply(jn,y))}m=w}if(y=!1,m!==2)continue}}if(m===1){dl(i,0),Hr(i,r,0,!0);break}e:{switch(c=i,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Hr(c,r,gs,!Br);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(m=_g+300-Vn(),10<m)){if(Hr(c,r,gs,!Br),Ci(c,0,!0)!==0)break e;c.timeoutHandle=CT(tT.bind(null,c,o,jn,Cf,vg,r,gs,to,cl,Br,y,2,-0,0),m);break e}tT(c,o,jn,Cf,vg,r,gs,to,cl,Br,y,0,-0,0)}}break}while(!0);li(i)}function tT(i,r,o,c,m,y,w,x,U,W,ie,oe,Q,J){if(i.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:TD},WE(r),oe=xD(),oe!==null)){i.cancelPendingCommit=oe(lT.bind(null,i,r,y,o,c,m,w,x,U,ie,1,Q,J)),Hr(i,y,w,!W);return}lT(i,r,y,o,c,m,w,x,U)}function F2(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],y=m.getSnapshot;m=m.value;try{if(!$n(y(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(i,r,o,c){r&=~yg,r&=~to,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var m=r;0<m;){var y=31-rt(m),w=1<<y;c[y]=-1,m&=~w}o!==0&&Ks(i,o,r)}function Nf(){return(at&6)===0?(Ju(0),!1):!0}function wg(){if(Ge!==null){if(ot===0)var i=Ge.return;else i=Ge,$i=Ya=null,Bp(i),rl=null,qu=0,i=Ge;for(;i!==null;)VE(i.alternate,i),i=i.return;Ge=null}}function dl(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,rD(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),wg(),mt=i,Ge=o=qi(i.current,null),Ze=r,ot=0,Qn=null,Br=!1,ul=Ni(i,r),gg=!1,cl=gs=yg=to=Fr=It=0,jn=Xu=null,vg=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var m=31-rt(c),y=1<<m;r|=i[m],c&=~y}return er=r,Xh(),o}function nT(i,r){qe=null,Z.H=yf,r===Vu||r===of?(r=_b(),ot=3):r===gb?(r=_b(),ot=4):ot=r===bE?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Qn=r,Ge===null&&(It=1,Tf(i,hs(r,i.current)))}function sT(){var i=Z.H;return Z.H=yf,i===null?yf:i}function iT(){var i=Z.A;return Z.A=U2,i}function xg(){It=4,Br||(Ze&4194048)!==Ze&&ps.current!==null||(ul=!0),(Fr&134217727)===0&&(to&134217727)===0||mt===null||Hr(mt,Ze,gs,!1)}function Sg(i,r,o){var c=at;at|=2;var m=sT(),y=iT();(mt!==i||Ze!==r)&&(Cf=null,dl(i,r)),r=!1;var w=It;e:do try{if(ot!==0&&Ge!==null){var x=Ge,U=Qn;switch(ot){case 8:wg(),w=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(r=!0);var W=ot;if(ot=0,Qn=null,ml(i,x,U,W),o&&ul){w=0;break e}break;default:W=ot,ot=0,Qn=null,ml(i,x,U,W)}}z2(),w=It;break}catch(ie){nT(i,ie)}while(!0);return r&&i.shellSuspendCounter++,$i=Ya=null,at=c,Z.H=m,Z.A=y,Ge===null&&(mt=null,Ze=0,Xh()),w}function z2(){for(;Ge!==null;)rT(Ge)}function q2(i,r){var o=at;at|=2;var c=sT(),m=iT();mt!==i||Ze!==r?(Cf=null,If=Vn()+500,dl(i,r)):ul=Ni(i,r);e:do try{if(ot!==0&&Ge!==null){r=Ge;var y=Qn;t:switch(ot){case 1:ot=0,Qn=null,ml(i,r,y,1);break;case 2:case 9:if(yb(y)){ot=0,Qn=null,aT(r);break}r=function(){ot!==2&&ot!==9||mt!==i||(ot=7),li(i)},y.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:yb(y)?(ot=0,Qn=null,aT(r)):(ot=0,Qn=null,ml(i,r,y,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var x=Ge;if(!w||FT(w)){ot=0,Qn=null;var U=x.sibling;if(U!==null)Ge=U;else{var W=x.return;W!==null?(Ge=W,Df(W)):Ge=null}break t}}ot=0,Qn=null,ml(i,r,y,5);break;case 6:ot=0,Qn=null,ml(i,r,y,6);break;case 8:wg(),It=6;break e;default:throw Error(s(462))}}H2();break}catch(ie){nT(i,ie)}while(!0);return $i=Ya=null,Z.H=c,Z.A=m,at=o,Ge!==null?0:(mt=null,Ze=0,Xh(),It)}function H2(){for(;Ge!==null&&!br();)rT(Ge)}function rT(i){var r=PE(i.alternate,i,er);i.memoizedProps=i.pendingProps,r===null?Df(i):Ge=r}function aT(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=AE(o,r,r.pendingProps,r.type,void 0,Ze);break;case 11:r=AE(o,r,r.pendingProps,r.type.render,r.ref,Ze);break;case 5:Bp(r);default:VE(o,r),r=Ge=ob(r,er),r=PE(o,r,er)}i.memoizedProps=i.pendingProps,r===null?Df(i):Ge=r}function ml(i,r,o,c){$i=Ya=null,Bp(r),rl=null,qu=0;var m=r.return;try{if(M2(i,m,r,o,Ze)){It=1,Tf(i,hs(o,i.current)),Ge=null;return}}catch(y){if(m!==null)throw Ge=m,y;It=1,Tf(i,hs(o,i.current)),Ge=null;return}r.flags&32768?(tt||c===1?i=!0:ul||(Ze&536870912)!==0?i=!1:(Br=i=!0,(c===2||c===9||c===3||c===6)&&(c=ps.current,c!==null&&c.tag===13&&(c.flags|=16384))),oT(r,i)):Df(r)}function Df(i){var r=i;do{if((r.flags&32768)!==0){oT(r,Br);return}i=r.return;var o=O2(r.alternate,r,er);if(o!==null){Ge=o;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=i}while(r!==null);It===0&&(It=5)}function oT(i,r){do{var o=k2(i.alternate,i);if(o!==null){o.flags&=32767,Ge=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Ge=i;return}Ge=i=o}while(i!==null);It=6,Ge=null}function lT(i,r,o,c,m,y,w,x,U){i.cancelPendingCommit=null;do Pf();while(hn!==0);if((at&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(y=r.lanes|r.childLanes,y|=pp,uu(i,o,y,w,x,U),i===mt&&(Ge=mt=null,Ze=0),hl=r,qr=i,fl=o,bg=y,Eg=m,ZE=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,W2(Y,function(){return dT(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,m=te.p,te.p=2,w=at,at|=4;try{j2(i,r,o)}finally{at=w,te.p=m,Z.T=c}}hn=1,uT(),cT(),hT()}}function uT(){if(hn===1){hn=0;var i=qr,r=hl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=te.p;te.p=2;var m=at;at|=4;try{GE(r,i);var y=jg,w=X_(i.containerInfo),x=y.focusedElem,U=y.selectionRange;if(w!==x&&x&&x.ownerDocument&&Q_(x.ownerDocument.documentElement,x)){if(U!==null&&cp(x)){var W=U.start,ie=U.end;if(ie===void 0&&(ie=W),"selectionStart"in x)x.selectionStart=W,x.selectionEnd=Math.min(ie,x.value.length);else{var oe=x.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),ke=x.textContent.length,De=Math.min(U.start,ke),ft=U.end===void 0?De:Math.min(U.end,ke);!J.extend&&De>ft&&(w=ft,ft=De,De=w);var G=Y_(x,De),H=Y_(x,ft);if(G&&H&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==H.node||J.focusOffset!==H.offset)){var K=oe.createRange();K.setStart(G.node,G.offset),J.removeAllRanges(),De>ft?(J.addRange(K),J.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),J.addRange(K))}}}}for(oe=[],J=x;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<oe.length;x++){var re=oe[x];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Hf=!!kg,jg=kg=null}finally{at=m,te.p=c,Z.T=o}}i.current=r,hn=2}}function cT(){if(hn===2){hn=0;var i=qr,r=hl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=te.p;te.p=2;var m=at;at|=4;try{FE(i,r.alternate,r)}finally{at=m,te.p=c,Z.T=o}}hn=3}}function hT(){if(hn===4||hn===3){hn=0,No();var i=qr,r=hl,o=fl,c=ZE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?hn=5:(hn=0,hl=qr=null,fT(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(zr=null),Do(o),r=r.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(ye,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Z.T,m=te.p,te.p=2,Z.T=null;try{for(var y=i.onRecoverableError,w=0;w<c.length;w++){var x=c[w];y(x.value,{componentStack:x.stack})}}finally{Z.T=r,te.p=m}}(fl&3)!==0&&Pf(),li(i),m=i.pendingLanes,(o&4194090)!==0&&(m&42)!==0?i===Tg?Zu++:(Zu=0,Tg=i):Zu=0,Ju(0)}}function fT(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Pu(r)))}function Pf(i){return uT(),cT(),hT(),dT()}function dT(){if(hn!==5)return!1;var i=qr,r=bg;bg=0;var o=Do(fl),c=Z.T,m=te.p;try{te.p=32>o?32:o,Z.T=null,o=Eg,Eg=null;var y=qr,w=fl;if(hn=0,hl=qr=null,fl=0,(at&6)!==0)throw Error(s(331));var x=at;if(at|=4,QE(y.current),KE(y,y.current,w,o),at=x,Ju(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(ye,y)}catch{}return!0}finally{te.p=m,Z.T=c,fT(i,r)}}function mT(i,r,o){r=hs(o,r),r=eg(i.stateNode,r,2),i=Mr(i,r,2),i!==null&&(Pi(i,2),li(i))}function dt(i,r,o){if(i.tag===3)mT(i,i,o);else for(;r!==null;){if(r.tag===3){mT(r,i,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(zr===null||!zr.has(c))){i=hs(o,i),o=vE(2),c=Mr(r,o,2),c!==null&&(_E(o,c,r,i),Pi(c,2),li(c));break}}r=r.return}}function Ag(i,r,o){var c=i.pingCache;if(c===null){c=i.pingCache=new B2;var m=new Set;c.set(r,m)}else m=c.get(r),m===void 0&&(m=new Set,c.set(r,m));m.has(o)||(gg=!0,m.add(o),i=G2.bind(null,i,r,o),r.then(i,i))}function G2(i,r,o){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,mt===i&&(Ze&o)===o&&(It===4||It===3&&(Ze&62914560)===Ze&&300>Vn()-_g?(at&2)===0&&dl(i,0):yg|=o,cl===Ze&&(cl=0)),li(i)}function pT(i,r){r===0&&(r=lu()),i=Yo(i,r),i!==null&&(Pi(i,r),li(i))}function $2(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),pT(i,o)}function K2(i,r){var o=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),pT(i,o)}function W2(i,r){return Ai(i,r)}var Mf=null,pl=null,Rg=!1,Vf=!1,Ig=!1,no=0;function li(i){i!==pl&&i.next===null&&(pl===null?Mf=pl=i:pl=pl.next=i),Vf=!0,Rg||(Rg=!0,Q2())}function Ju(i,r){if(!Ig&&Vf){Ig=!0;do for(var o=!1,c=Mf;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var y=0;else{var w=c.suspendedLanes,x=c.pingedLanes;y=(1<<31-rt(42|i)+1)-1,y&=m&~(w&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,_T(c,y))}else y=Ze,y=Ci(c,c===mt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Ni(c,y)||(o=!0,_T(c,y));c=c.next}while(o);Ig=!1}}function Y2(){gT()}function gT(){Vf=Rg=!1;var i=0;no!==0&&(iD()&&(i=no),no=0);for(var r=Vn(),o=null,c=Mf;c!==null;){var m=c.next,y=yT(c,r);y===0?(c.next=null,o===null?Mf=m:o.next=m,m===null&&(pl=o)):(o=c,(i!==0||(y&3)!==0)&&(Vf=!0)),c=m}Ju(i)}function yT(i,r){for(var o=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-rt(y),x=1<<w,U=m[w];U===-1?((x&o)===0||(x&c)!==0)&&(m[w]=Tr(x,r)):U<=r&&(i.expiredLanes|=x),y&=~x}if(r=mt,o=Ze,o=Ci(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,o===0||i===r&&(ot===2||ot===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&$s(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Ni(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(c!==null&&$s(c),Do(o)){case 2:case 8:o=z;break;case 32:o=Y;break;case 268435456:o=_e;break;default:o=Y}return c=vT.bind(null,i),o=Ai(o,c),i.callbackPriority=r,i.callbackNode=o,r}return c!==null&&c!==null&&$s(c),i.callbackPriority=2,i.callbackNode=null,2}function vT(i,r){if(hn!==0&&hn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Pf()&&i.callbackNode!==o)return null;var c=Ze;return c=Ci(i,i===mt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(eT(i,c,r),yT(i,Vn()),i.callbackNode!=null&&i.callbackNode===o?vT.bind(null,i):null)}function _T(i,r){if(Pf())return null;eT(i,r,!0)}function Q2(){aD(function(){(at&6)!==0?Ai(Er,Y2):gT()})}function Cg(){return no===0&&(no=ou()),no}function bT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:jo(""+i)}function ET(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function X2(i,r,o,c,m){if(r==="submit"&&o&&o.stateNode===m){var y=bT((m[jt]||null).action),w=c.submitter;w&&(r=(r=w[jt]||null)?bT(r.formAction):w.getAttribute("formAction"),r!==null&&(y=r,w=null));var x=new Lo("action","action",null,c,m);i.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(no!==0){var U=w?ET(m,w):new FormData(m);Yp(o,{pending:!0,data:U,method:m.method,action:y},null,U)}}else typeof y=="function"&&(x.preventDefault(),U=w?ET(m,w):new FormData(m),Yp(o,{pending:!0,data:U,method:m.method,action:y},y,U))},currentTarget:m}]})}}for(var Ng=0;Ng<mp.length;Ng++){var Dg=mp[Ng],Z2=Dg.toLowerCase(),J2=Dg[0].toUpperCase()+Dg.slice(1);Is(Z2,"on"+J2)}Is(eb,"onAnimationEnd"),Is(tb,"onAnimationIteration"),Is(nb,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(g2,"onTransitionRun"),Is(y2,"onTransitionStart"),Is(v2,"onTransitionCancel"),Is(sb,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function TT(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],m=c.event;c=c.listeners;e:{var y=void 0;if(r)for(var w=c.length-1;0<=w;w--){var x=c[w],U=x.instance,W=x.currentTarget;if(x=x.listener,U!==y&&m.isPropagationStopped())break e;y=x,m.currentTarget=W;try{y(m)}catch(ie){Ef(ie)}m.currentTarget=null,y=U}else for(w=0;w<c.length;w++){if(x=c[w],U=x.instance,W=x.currentTarget,x=x.listener,U!==y&&m.isPropagationStopped())break e;y=x,m.currentTarget=W;try{y(m)}catch(ie){Ef(ie)}m.currentTarget=null,y=U}}}}function $e(i,r){var o=r[hu];o===void 0&&(o=r[hu]=new Set);var c=i+"__bubble";o.has(c)||(wT(r,i,2,!1),o.add(c))}function Pg(i,r,o){var c=0;r&&(c|=4),wT(o,i,c,r)}var Of="_reactListening"+Math.random().toString(36).slice(2);function Mg(i){if(!i[Of]){i[Of]=!0,fu.forEach(function(o){o!=="selectionchange"&&(eD.has(o)||Pg(o,!1,i),Pg(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Of]||(r[Of]=!0,Pg("selectionchange",!1,r))}}function wT(i,r,o,c){switch(KT(r)){case 2:var m=RD;break;case 8:m=ID;break;default:m=Kg}o=m.bind(null,r,o,i),m=void 0,!us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(r,o,{capture:!0,passive:m}):i.addEventListener(r,o,!0):m!==void 0?i.addEventListener(r,o,{passive:m}):i.addEventListener(r,o,!1)}function Vg(i,r,o,c,m){var y=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===m)break;if(w===4)for(w=c.return;w!==null;){var U=w.tag;if((U===3||U===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;x!==null;){if(w=Mi(x),w===null)return;if(U=w.tag,U===5||U===6||U===26||U===27){c=y=w;continue e}x=x.parentNode}}c=c.return}kh(function(){var W=y,ie=ls(o),oe=[];e:{var Q=ib.get(i);if(Q!==void 0){var J=Lo,ke=i;switch(i){case"keypress":if(Js(o)===0)break e;case"keydown":case"keyup":J=Ho;break;case"focusin":ke="focus",J=Fo;break;case"focusout":ke="blur",J=Fo;break;case"beforeblur":case"afterblur":J=Fo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Hh;break;case eb:case tb:case nb:J=zo;break;case sb:J=$h;break;case"scroll":case"scrollend":J=jh;break;case"wheel":J=Go;break;case"copy":case"cut":case"paste":J=qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=xu;break;case"toggle":case"beforetoggle":J=Wh}var De=(r&4)!==0,ft=!De&&(i==="scroll"||i==="scrollend"),G=De?Q!==null?Q+"Capture":null:Q;De=[];for(var H=W,K;H!==null;){var re=H;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||G===null||(re=Oa(H,G),re!=null&&De.push(tc(H,re,K))),ft)break;H=H.return}0<De.length&&(Q=new J(Q,ke,null,o,ie),oe.push({event:Q,listeners:De}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Q&&o!==ji&&(ke=o.relatedTarget||o.fromElement)&&(Mi(ke)||ke[as]))break e;if((J||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(ke=o.relatedTarget||o.toElement,J=W,ke=ke?Mi(ke):null,ke!==null&&(ft=l(ke),De=ke.tag,ke!==ft||De!==5&&De!==27&&De!==6)&&(ke=null)):(J=null,ke=W),J!==ke)){if(De=cs,re="onMouseLeave",G="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(De=xu,re="onPointerLeave",G="onPointerEnter",H="pointer"),ft=J==null?Q:Ys(J),K=ke==null?Q:Ys(ke),Q=new De(re,H+"leave",J,o,ie),Q.target=ft,Q.relatedTarget=K,re=null,Mi(ie)===W&&(De=new De(G,H+"enter",ke,o,ie),De.target=K,De.relatedTarget=ft,re=De),ft=re,J&&ke)t:{for(De=J,G=ke,H=0,K=De;K;K=gl(K))H++;for(K=0,re=G;re;re=gl(re))K++;for(;0<H-K;)De=gl(De),H--;for(;0<K-H;)G=gl(G),K--;for(;H--;){if(De===G||G!==null&&De===G.alternate)break t;De=gl(De),G=gl(G)}De=null}else De=null;J!==null&&xT(oe,Q,J,De,!1),ke!==null&&ft!==null&&xT(oe,ft,ke,De,!0)}}e:{if(Q=W?Ys(W):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Te=q_;else if(Qt(Q))if(H_)Te=d2;else{Te=h2;var He=c2}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&yu(W.elementType)&&(Te=q_):Te=f2;if(Te&&(Te=Te(i,W))){zi(oe,Te,o,ie);break e}He&&He(i,Q,W),i==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&Ir(Q,"number",Q.value)}switch(He=W?Ys(W):window,i){case"focusin":(Qt(He)||He.contentEditable==="true")&&($o=He,hp=W,Ru=null);break;case"focusout":Ru=hp=$o=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,Z_(oe,o,ie);break;case"selectionchange":if(p2)break;case"keydown":case"keyup":Z_(oe,o,ie)}var Re;if(ni)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Qe?ee(i,o)&&(Pe="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Pe="onCompositionStart");Pe&&(T&&o.locale!=="ko"&&(Qe||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Qe&&(Re=_u()):(Zs=ie,Cr="value"in Zs?Zs.value:Zs.textContent,Qe=!0)),He=kf(W,Pe),0<He.length&&(Pe=new Tu(Pe,i,null,o,ie),oe.push({event:Pe,listeners:He}),Re?Pe.data=Re:(Re=de(o),Re!==null&&(Pe.data=Re)))),(Re=_?Yt(i,o):Xe(i,o))&&(Pe=kf(W,"onBeforeInput"),0<Pe.length&&(He=new Tu("onBeforeInput","beforeinput",null,o,ie),oe.push({event:He,listeners:Pe}),He.data=Re)),X2(oe,i,W,o,ie)}TT(oe,r)})}function tc(i,r,o){return{instance:i,listener:r,currentTarget:o}}function kf(i,r){for(var o=r+"Capture",c=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Oa(i,o),m!=null&&c.unshift(tc(i,m,y)),m=Oa(i,r),m!=null&&c.push(tc(i,m,y))),i.tag===3)return c;i=i.return}return[]}function gl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function xT(i,r,o,c,m){for(var y=r._reactName,w=[];o!==null&&o!==c;){var x=o,U=x.alternate,W=x.stateNode;if(x=x.tag,U!==null&&U===c)break;x!==5&&x!==26&&x!==27||W===null||(U=W,m?(W=Oa(o,y),W!=null&&w.unshift(tc(o,W,U))):m||(W=Oa(o,y),W!=null&&w.push(tc(o,W,U)))),o=o.return}w.length!==0&&i.push({event:r,listeners:w})}var tD=/\r\n?/g,nD=/\u0000|\uFFFD/g;function ST(i){return(typeof i=="string"?i:""+i).replace(tD,`
`).replace(nD,"")}function AT(i,r){return r=ST(r),ST(i)===r}function jf(){}function ht(i,r,o,c,m,y){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||os(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&os(i,""+c);break;case"className":Qs(i,"class",c);break;case"tabIndex":Qs(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(i,o,c);break;case"style":gu(i,c,y);break;case"data":if(r!=="object"){Qs(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=jo(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(r!=="input"&&ht(i,r,"name",m.name,m,null),ht(i,r,"formEncType",m.formEncType,m,null),ht(i,r,"formMethod",m.formMethod,m,null),ht(i,r,"formTarget",m.formTarget,m,null)):(ht(i,r,"encType",m.encType,m,null),ht(i,r,"method",m.method,m,null),ht(i,r,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=jo(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=jf);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=jo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":$e("beforetoggle",i),$e("toggle",i),Rr(i,"popover",c);break;case"xlinkActuate":ln(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ln(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ln(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ln(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ln(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ln(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ln(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ln(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ln(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Rr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ip.get(o)||o,Rr(i,o,c))}}function Og(i,r,o,c,m,y){switch(o){case"style":gu(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof c=="string"?os(i,c):(typeof c=="number"||typeof c=="bigint")&&os(i,""+c);break;case"onScroll":c!=null&&$e("scroll",i);break;case"onScrollEnd":c!=null&&$e("scrollend",i);break;case"onClick":c!=null&&(i.onclick=jf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Po.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),y=i[jt]||null,y=y!=null?y[o]:null,typeof y=="function"&&i.removeEventListener(r,y,m),typeof c=="function")){typeof y!="function"&&y!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,c,m);break e}o in i?i[o]=c:c===!0?i.setAttribute(o,""):Rr(i,o,c)}}}function fn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",i),$e("load",i);var c=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var w=o[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(i,r,y,w,o,null)}}m&&ht(i,r,"srcSet",o.srcSet,o,null),c&&ht(i,r,"src",o.src,o,null);return;case"input":$e("invalid",i);var x=y=w=m=null,U=null,W=null;for(c in o)if(o.hasOwnProperty(c)){var ie=o[c];if(ie!=null)switch(c){case"name":m=ie;break;case"type":w=ie;break;case"checked":U=ie;break;case"defaultChecked":W=ie;break;case"value":y=ie;break;case"defaultValue":x=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:ht(i,r,c,ie,o,null)}}Pa(i,y,x,U,W,w,m,!1),ko(i);return;case"select":$e("invalid",i),c=w=y=null;for(m in o)if(o.hasOwnProperty(m)&&(x=o[m],x!=null))switch(m){case"value":y=x;break;case"defaultValue":w=x;break;case"multiple":c=x;default:ht(i,r,m,x,o,null)}r=y,o=w,i.multiple=!!c,r!=null?ki(i,!!c,r,!1):o!=null&&ki(i,!!c,o,!0);return;case"textarea":$e("invalid",i),y=m=c=null;for(w in o)if(o.hasOwnProperty(w)&&(x=o[w],x!=null))switch(w){case"value":c=x;break;case"defaultValue":m=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:ht(i,r,w,x,o,null)}Ma(i,c,m,y),ko(i);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(c=o[U],c!=null))switch(U){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ht(i,r,U,c,o,null)}return;case"dialog":$e("beforetoggle",i),$e("toggle",i),$e("cancel",i),$e("close",i);break;case"iframe":case"object":$e("load",i);break;case"video":case"audio":for(c=0;c<ec.length;c++)$e(ec[c],i);break;case"image":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"embed":case"source":case"link":$e("error",i),$e("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(c=o[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(i,r,W,c,o,null)}return;default:if(yu(r)){for(ie in o)o.hasOwnProperty(ie)&&(c=o[ie],c!==void 0&&Og(i,r,ie,c,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(c=o[x],c!=null&&ht(i,r,x,c,o,null))}function sD(i,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,w=null,x=null,U=null,W=null,ie=null;for(J in o){var oe=o[J];if(o.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":U=oe;default:c.hasOwnProperty(J)||ht(i,r,J,null,c,oe)}}for(var Q in c){var J=c[Q];if(oe=o[Q],c.hasOwnProperty(Q)&&(J!=null||oe!=null))switch(Q){case"type":y=J;break;case"name":m=J;break;case"checked":W=J;break;case"defaultChecked":ie=J;break;case"value":w=J;break;case"defaultValue":x=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:J!==oe&&ht(i,r,Q,J,c,oe)}}Gn(i,w,x,U,W,ie,y,m);return;case"select":J=w=x=Q=null;for(y in o)if(U=o[y],o.hasOwnProperty(y)&&U!=null)switch(y){case"value":break;case"multiple":J=U;default:c.hasOwnProperty(y)||ht(i,r,y,null,c,U)}for(m in c)if(y=c[m],U=o[m],c.hasOwnProperty(m)&&(y!=null||U!=null))switch(m){case"value":Q=y;break;case"defaultValue":x=y;break;case"multiple":w=y;default:y!==U&&ht(i,r,m,y,c,U)}r=x,o=w,c=J,Q!=null?ki(i,!!o,Q,!1):!!c!=!!o&&(r!=null?ki(i,!!o,r,!0):ki(i,!!o,o?[]:"",!1));return;case"textarea":J=Q=null;for(x in o)if(m=o[x],o.hasOwnProperty(x)&&m!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ht(i,r,x,null,c,m)}for(w in c)if(m=c[w],y=o[w],c.hasOwnProperty(w)&&(m!=null||y!=null))switch(w){case"value":Q=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&ht(i,r,w,m,c,y)}ut(i,Q,J);return;case"option":for(var ke in o)if(Q=o[ke],o.hasOwnProperty(ke)&&Q!=null&&!c.hasOwnProperty(ke))switch(ke){case"selected":i.selected=!1;break;default:ht(i,r,ke,null,c,Q)}for(U in c)if(Q=c[U],J=o[U],c.hasOwnProperty(U)&&Q!==J&&(Q!=null||J!=null))switch(U){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ht(i,r,U,Q,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)Q=o[De],o.hasOwnProperty(De)&&Q!=null&&!c.hasOwnProperty(De)&&ht(i,r,De,null,c,Q);for(W in c)if(Q=c[W],J=o[W],c.hasOwnProperty(W)&&Q!==J&&(Q!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:ht(i,r,W,Q,c,J)}return;default:if(yu(r)){for(var ft in o)Q=o[ft],o.hasOwnProperty(ft)&&Q!==void 0&&!c.hasOwnProperty(ft)&&Og(i,r,ft,void 0,c,Q);for(ie in c)Q=c[ie],J=o[ie],!c.hasOwnProperty(ie)||Q===J||Q===void 0&&J===void 0||Og(i,r,ie,Q,c,J);return}}for(var G in o)Q=o[G],o.hasOwnProperty(G)&&Q!=null&&!c.hasOwnProperty(G)&&ht(i,r,G,null,c,Q);for(oe in c)Q=c[oe],J=o[oe],!c.hasOwnProperty(oe)||Q===J||Q==null&&J==null||ht(i,r,oe,Q,c,J)}var kg=null,jg=null;function Lf(i){return i.nodeType===9?i:i.ownerDocument}function RT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IT(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Lg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ug=null;function iD(){var i=window.event;return i&&i.type==="popstate"?i===Ug?!1:(Ug=i,!0):(Ug=null,!1)}var CT=typeof setTimeout=="function"?setTimeout:void 0,rD=typeof clearTimeout=="function"?clearTimeout:void 0,NT=typeof Promise=="function"?Promise:void 0,aD=typeof queueMicrotask=="function"?queueMicrotask:typeof NT<"u"?function(i){return NT.resolve(null).then(i).catch(oD)}:CT;function oD(i){setTimeout(function(){throw i})}function Gr(i){return i==="head"}function DT(i,r){var o=r,c=0,m=0;do{var y=o.nextSibling;if(i.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<c&&8>c){o=c;var w=i.ownerDocument;if(o&1&&nc(w.documentElement),o&2&&nc(w.body),o&4)for(o=w.head,nc(o),w=o.firstChild;w;){var x=w.nextSibling,U=w.nodeName;w[Ia]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=x}}if(m===0){i.removeChild(y),cc(r);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:c=o.charCodeAt(0)-48;else c=0;o=y}while(o);cc(r)}function Bg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Bg(o),Ar(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function lD(i,r,o,c){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ia])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ns(i.nextSibling),i===null)break}return null}function uD(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ns(i.nextSibling),i===null))return null;return i}function Fg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function cD(i,r){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Ns(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var zg=null;function PT(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return i;r--}else o==="/$"&&r++}i=i.previousSibling}return null}function MT(i,r,o){switch(r=Lf(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function nc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ar(i)}var ys=new Map,VT=new Set;function Uf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var tr=te.d;te.d={f:hD,r:fD,D:dD,C:mD,L:pD,m:gD,X:vD,S:yD,M:_D};function hD(){var i=tr.f(),r=Nf();return i||r}function fD(i){var r=Ws(i);r!==null&&r.tag===5&&r.type==="form"?eE(r):tr.r(i)}var yl=typeof document>"u"?null:document;function OT(i,r,o){var c=yl;if(c&&typeof r=="string"&&r){var m=Lt(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),VT.has(m)||(VT.add(m),i={rel:i,crossOrigin:o,href:r},c.querySelector(m)===null&&(r=c.createElement("link"),fn(r,"link",i),Nt(r),c.head.appendChild(r)))}}function dD(i){tr.D(i),OT("dns-prefetch",i,null)}function mD(i,r){tr.C(i,r),OT("preconnect",i,r)}function pD(i,r,o){tr.L(i,r,o);var c=yl;if(c&&i&&r){var m='link[rel="preload"][as="'+Lt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Lt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Lt(o.imageSizes)+'"]')):m+='[href="'+Lt(i)+'"]';var y=m;switch(r){case"style":y=vl(i);break;case"script":y=_l(i)}ys.has(y)||(i=g({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),ys.set(y,i),c.querySelector(m)!==null||r==="style"&&c.querySelector(sc(y))||r==="script"&&c.querySelector(ic(y))||(r=c.createElement("link"),fn(r,"link",i),Nt(r),c.head.appendChild(r)))}}function gD(i,r){tr.m(i,r);var o=yl;if(o&&i){var c=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Lt(c)+'"][href="'+Lt(i)+'"]',y=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_l(i)}if(!ys.has(y)&&(i=g({rel:"modulepreload",href:i},r),ys.set(y,i),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ic(y)))return}c=o.createElement("link"),fn(c,"link",i),Nt(c),o.head.appendChild(c)}}}function yD(i,r,o){tr.S(i,r,o);var c=yl;if(c&&i){var m=An(c).hoistableStyles,y=vl(i);r=r||"default";var w=m.get(y);if(!w){var x={loading:0,preload:null};if(w=c.querySelector(sc(y)))x.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":r},o),(o=ys.get(y))&&qg(i,o);var U=w=c.createElement("link");Nt(U),fn(U,"link",i),U._p=new Promise(function(W,ie){U.onload=W,U.onerror=ie}),U.addEventListener("load",function(){x.loading|=1}),U.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Bf(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:x},m.set(y,w)}}}function vD(i,r){tr.X(i,r);var o=yl;if(o&&i){var c=An(o).hoistableScripts,m=_l(i),y=c.get(m);y||(y=o.querySelector(ic(m)),y||(i=g({src:i,async:!0},r),(r=ys.get(m))&&Hg(i,r),y=o.createElement("script"),Nt(y),fn(y,"link",i),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function _D(i,r){tr.M(i,r);var o=yl;if(o&&i){var c=An(o).hoistableScripts,m=_l(i),y=c.get(m);y||(y=o.querySelector(ic(m)),y||(i=g({src:i,async:!0,type:"module"},r),(r=ys.get(m))&&Hg(i,r),y=o.createElement("script"),Nt(y),fn(y,"link",i),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function kT(i,r,o,c){var m=(m=Oe.current)?Uf(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=vl(o.href),o=An(m).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=vl(o.href);var y=An(m).hoistableStyles,w=y.get(i);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=m.querySelector(sc(i)))&&!y._p&&(w.instance=y,w.state.loading=5),ys.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ys.set(i,o),y||bD(m,i,o,w.state))),r&&c===null)throw Error(s(528,""));return w}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_l(o),o=An(m).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function vl(i){return'href="'+Lt(i)+'"'}function sc(i){return'link[rel="stylesheet"]['+i+"]"}function jT(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function bD(i,r,o,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),fn(r,"link",o),Nt(r),i.head.appendChild(r))}function _l(i){return'[src="'+Lt(i)+'"]'}function ic(i){return"script[async]"+i}function LT(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+Lt(o.href)+'"]');if(c)return r.instance=c,Nt(c),c;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Nt(c),fn(c,"style",m),Bf(c,o.precedence,i),r.instance=c;case"stylesheet":m=vl(o.href);var y=i.querySelector(sc(m));if(y)return r.state.loading|=4,r.instance=y,Nt(y),y;c=jT(o),(m=ys.get(m))&&qg(c,m),y=(i.ownerDocument||i).createElement("link"),Nt(y);var w=y;return w._p=new Promise(function(x,U){w.onload=x,w.onerror=U}),fn(y,"link",c),r.state.loading|=4,Bf(y,o.precedence,i),r.instance=y;case"script":return y=_l(o.src),(m=i.querySelector(ic(y)))?(r.instance=m,Nt(m),m):(c=o,(m=ys.get(y))&&(c=g({},o),Hg(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),Nt(m),fn(m,"link",c),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Bf(c,o.precedence,i));return r.instance}function Bf(i,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,y=m,w=0;w<c.length;w++){var x=c[w];if(x.dataset.precedence===r)y=x;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function qg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Hg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Ff=null;function UT(i,r,o){if(Ff===null){var c=new Map,m=Ff=new Map;m.set(o,c)}else m=Ff,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var y=o[m];if(!(y[Ia]||y[Wt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(r)||"";w=i+w;var x=c.get(w);x?x.push(y):c.set(w,[y])}}return c}function BT(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function ED(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function FT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var rc=null;function TD(){}function wD(i,r,o){if(rc===null)throw Error(s(475));var c=rc;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=vl(o.href),y=i.querySelector(sc(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=zf.bind(c),i.then(c,c)),r.state.loading|=4,r.instance=y,Nt(y);return}y=i.ownerDocument||i,o=jT(o),(m=ys.get(m))&&qg(o,m),y=y.createElement("link"),Nt(y);var w=y;w._p=new Promise(function(x,U){w.onload=x,w.onerror=U}),fn(y,"link",o),r.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=zf.bind(c),i.addEventListener("load",r),i.addEventListener("error",r))}}function xD(){if(rc===null)throw Error(s(475));var i=rc;return i.stylesheets&&i.count===0&&Gg(i,i.stylesheets),0<i.count?function(r){var o=setTimeout(function(){if(i.stylesheets&&Gg(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(o)}}:null}function zf(){if(this.count--,this.count===0){if(this.stylesheets)Gg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qf=null;function Gg(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qf=new Map,r.forEach(SD,i),qf=null,zf.call(i))}function SD(i,r){if(!(r.state.loading&4)){var o=qf.get(i);if(o)var c=o.get(null);else{o=new Map,qf.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var w=m[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}m=r.instance,w=m.getAttribute("data-precedence"),y=o.get(w)||c,y===c&&o.set(null,m),o.set(w,m),this.count++,c=zf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var ac={$$typeof:q,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function AD(i,r,o,c,m,y,w,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function zT(i,r,o,c,m,y,w,x,U,W,ie,oe){return i=new AD(i,r,o,w,x,U,W,oe),r=1,y===!0&&(r|=24),y=Kn(3,null,null,r),i.current=y,y.stateNode=i,r=Ap(),r.refCount++,i.pooledCache=r,r.refCount++,y.memoizedState={element:c,isDehydrated:o,cache:r},Np(y),i}function qT(i){return i?(i=Qo,i):Qo}function HT(i,r,o,c,m,y){m=qT(m),c.context===null?c.context=m:c.pendingContext=m,c=Pr(r),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Mr(i,c,r),o!==null&&(Zn(o,i,r),ku(o,i,r))}function GT(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function $g(i,r){GT(i,r),(i=i.alternate)&&GT(i,r)}function $T(i){if(i.tag===13){var r=Yo(i,67108864);r!==null&&Zn(r,i,67108864),$g(i,67108864)}}var Hf=!0;function RD(i,r,o,c){var m=Z.T;Z.T=null;var y=te.p;try{te.p=2,Kg(i,r,o,c)}finally{te.p=y,Z.T=m}}function ID(i,r,o,c){var m=Z.T;Z.T=null;var y=te.p;try{te.p=8,Kg(i,r,o,c)}finally{te.p=y,Z.T=m}}function Kg(i,r,o,c){if(Hf){var m=Wg(c);if(m===null)Vg(i,r,c,Gf,o),WT(i,c);else if(ND(m,i,r,o,c))c.stopPropagation();else if(WT(i,c),r&4&&-1<CD.indexOf(i)){for(;m!==null;){var y=Ws(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Hn(y.pendingLanes);if(w!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var U=1<<31-rt(w);x.entanglements[1]|=U,w&=~U}li(y),(at&6)===0&&(If=Vn()+500,Ju(0))}}break;case 13:x=Yo(y,2),x!==null&&Zn(x,y,2),Nf(),$g(y,2)}if(y=Wg(c),y===null&&Vg(i,r,c,Gf,o),y===m)break;m=y}m!==null&&c.stopPropagation()}else Vg(i,r,c,null,o)}}function Wg(i){return i=ls(i),Yg(i)}var Gf=null;function Yg(i){if(Gf=null,i=Mi(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=u(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Gf=i,null}function KT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ih()){case Er:return 2;case z:return 8;case Y:case ne:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Qg=!1,$r=null,Kr=null,Wr=null,oc=new Map,lc=new Map,Yr=[],CD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WT(i,r){switch(i){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":oc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(r.pointerId)}}function uc(i,r,o,c,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:y,targetContainers:[m]},r!==null&&(r=Ws(r),r!==null&&$T(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function ND(i,r,o,c,m){switch(r){case"focusin":return $r=uc($r,i,r,o,c,m),!0;case"dragenter":return Kr=uc(Kr,i,r,o,c,m),!0;case"mouseover":return Wr=uc(Wr,i,r,o,c,m),!0;case"pointerover":var y=m.pointerId;return oc.set(y,uc(oc.get(y)||null,i,r,o,c,m)),!0;case"gotpointercapture":return y=m.pointerId,lc.set(y,uc(lc.get(y)||null,i,r,o,c,m)),!0}return!1}function YT(i){var r=Mi(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){i.blockedOn=r,Ch(i.priority,function(){if(o.tag===13){var c=Xn();c=wr(c);var m=Yo(o,c);m!==null&&Zn(m,o,c),$g(o,c)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $f(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Wg(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);ji=c,o.target.dispatchEvent(c),ji=null}else return r=Ws(o),r!==null&&$T(r),i.blockedOn=o,!1;r.shift()}return!0}function QT(i,r,o){$f(i)&&o.delete(r)}function DD(){Qg=!1,$r!==null&&$f($r)&&($r=null),Kr!==null&&$f(Kr)&&(Kr=null),Wr!==null&&$f(Wr)&&(Wr=null),oc.forEach(QT),lc.forEach(QT)}function Kf(i,r){i.blockedOn===r&&(i.blockedOn=null,Qg||(Qg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DD)))}var Wf=null;function XT(i){Wf!==i&&(Wf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Wf===i&&(Wf=null);for(var r=0;r<i.length;r+=3){var o=i[r],c=i[r+1],m=i[r+2];if(typeof c!="function"){if(Yg(c||o)===null)continue;break}var y=Ws(o);y!==null&&(i.splice(r,3),r-=3,Yp(y,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function cc(i){function r(U){return Kf(U,i)}$r!==null&&Kf($r,i),Kr!==null&&Kf(Kr,i),Wr!==null&&Kf(Wr,i),oc.forEach(r),lc.forEach(r);for(var o=0;o<Yr.length;o++){var c=Yr[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Yr.length&&(o=Yr[0],o.blockedOn===null);)YT(o),o.blockedOn===null&&Yr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],y=o[c+1],w=m[jt]||null;if(typeof y=="function")w||XT(o);else if(w){var x=null;if(y&&y.hasAttribute("formAction")){if(m=y,w=y[jt]||null)x=w.formAction;else if(Yg(m)!==null)continue}else x=w.action;typeof x=="function"?o[c+1]=x:(o.splice(c,3),c-=3),XT(o)}}}function Xg(i){this._internalRoot=i}Yf.prototype.render=Xg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,c=Xn();HT(o,c,i,r,null,null)},Yf.prototype.unmount=Xg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;HT(i.current,2,null,i,null,null),Nf(),r[as]=null}};function Yf(i){this._internalRoot=i}Yf.prototype.unstable_scheduleHydration=function(i){if(i){var r=xr();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Yr.length&&r!==0&&r<Yr[o].priority;o++);Yr.splice(o,0,i),o===0&&YT(i)}};var ZT=e.version;if(ZT!=="19.1.1")throw Error(s(527,ZT,"19.1.1"));te.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var PD={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{ye=Qf.inject(PD),Ae=Qf}catch{}}return fc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,c="",m=mE,y=pE,w=gE,x=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(x=r.unstable_transitionCallbacks)),r=zT(i,1,!1,null,null,o,c,m,y,w,x,null),i[as]=r.current,Mg(i),new Xg(r)},fc.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var c=!1,m="",y=mE,w=pE,x=gE,U=null,W=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks),o.formState!==void 0&&(W=o.formState)),r=zT(i,1,!0,r,o??null,c,m,y,w,x,U,W),r.context=qT(null),o=r.current,c=Xn(),c=wr(c),m=Pr(c),m.callback=null,Mr(o,m,c),o=c,r.current.lanes=o,Pi(r,o),li(r),i[as]=r.current,Mg(i),new Yf(r)},fc.version="19.1.1",fc}var lw;function qD(){if(lw)return ey.exports;lw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ey.exports=zD(),ey.exports}var HD=qD();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uw="popstate";function GD(t={}){function e(s,a){let{pathname:l,search:u,hash:h}=s.location;return Fy("",{pathname:l,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Fc(a)}return KD(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ls(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $D(){return Math.random().toString(36).substring(2,10)}function cw(t,e){return{usr:t.state,key:t.key,idx:e}}function Fy(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Wl(e):e,state:n,key:e&&e.key||s||$D()}}function Fc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function KD(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,u=a.history,h="POP",d=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function b(){h="POP";let k=g(),V=k==null?null:k-p;p=k,d&&d({action:h,location:M.location,delta:V})}function E(k,V){h="PUSH";let P=Fy(M.location,k,V);p=g()+1;let q=cw(P,p),se=M.createHref(P);try{u.pushState(q,"",se)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;a.location.assign(se)}l&&d&&d({action:h,location:M.location,delta:1})}function S(k,V){h="REPLACE";let P=Fy(M.location,k,V);p=g();let q=cw(P,p),se=M.createHref(P);u.replaceState(q,"",se),l&&d&&d({action:h,location:M.location,delta:0})}function D(k){return WD(k)}let M={get action(){return h},get location(){return t(a,u)},listen(k){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(uw,b),d=k,()=>{a.removeEventListener(uw,b),d=null}},createHref(k){return e(a,k)},createURL:D,encodeLocation(k){let V=D(k);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:S,go(k){return u.go(k)}};return M}function WD(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Fc(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function FA(t,e,n="/"){return YD(t,e,n,!1)}function YD(t,e,n,s){let a=typeof e=="string"?Wl(e):e,l=ur(a.pathname||"/",n);if(l==null)return null;let u=zA(t);QD(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=oP(l);h=rP(u[d],p,s)}return h}function zA(t,e=[],n=[],s="",a=!1){let l=(u,h,d=a,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Et(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let b=ar([s,g.relativePath]),E=n.concat(g);u.children&&u.children.length>0&&(Et(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),zA(u.children,e,E,b,d)),!(u.path==null&&!u.index)&&e.push({path:b,score:sP(b,u.index),routesMeta:E})};return t.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))l(u,h);else for(let d of qA(u.path))l(u,h,!0,d)}),e}function qA(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let u=qA(s.join("/")),h=[];return h.push(...u.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...u),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function QD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iP(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var XD=/^:[\w-]+$/,ZD=3,JD=2,eP=1,tP=10,nP=-2,hw=t=>t==="*";function sP(t,e){let n=t.split("/"),s=n.length;return n.some(hw)&&(s+=nP),e&&(s+=JD),n.filter(a=>!hw(a)).reduce((a,l)=>a+(XD.test(l)?ZD:l===""?eP:tP),s)}function iP(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function rP(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",u=[];for(let h=0;h<s.length;++h){let d=s[h],p=h===s.length-1,g=l==="/"?e:e.slice(l.length)||"/",b=jd({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),E=d.route;if(!b&&p&&n&&!s[s.length-1].route.index&&(b=jd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:ar([l,b.pathname]),pathnameBase:hP(ar([l,b.pathnameBase])),route:E}),b.pathnameBase!=="/"&&(l=ar([l,b.pathnameBase]))}return u}function jd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=aP(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:b},E)=>{if(g==="*"){let D=h[E]||"";u=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const S=h[E];return b&&!S?p[g]=void 0:p[g]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:t}}function aP(t,e=!1,n=!0){Ls(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function oP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ls(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ur(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function lP(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Wl(t):t;return{pathname:n?n.startsWith("/")?n:uP(n,e):e,search:fP(s),hash:dP(a)}}function uP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function iy(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kv(t){let e=cP(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Wv(t,e,n,s=!1){let a;typeof t=="string"?a=Wl(t):(a={...t},Et(!a.pathname||!a.pathname.includes("?"),iy("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),iy("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),iy("#","search","hash",a)));let l=t===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=n;else{let b=e.length-1;if(!s&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),b-=1;a.pathname=E.join("/")}h=b>=0?e[b]:"/"}let d=lP(a,h),p=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var ar=t=>t.join("/").replace(/\/\/+/g,"/"),hP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var HA=["POST","PUT","PATCH","DELETE"];new Set(HA);var pP=["GET",...HA];new Set(pP);var Yl=O.createContext(null);Yl.displayName="DataRouter";var vm=O.createContext(null);vm.displayName="DataRouterState";O.createContext(!1);var GA=O.createContext({isTransitioning:!1});GA.displayName="ViewTransition";var gP=O.createContext(new Map);gP.displayName="Fetchers";var yP=O.createContext(null);yP.displayName="Await";var zs=O.createContext(null);zs.displayName="Navigation";var oh=O.createContext(null);oh.displayName="Location";var qs=O.createContext({outlet:null,matches:[],isDataRoute:!1});qs.displayName="Route";var Yv=O.createContext(null);Yv.displayName="RouteError";function vP(t,{relative:e}={}){Et(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=O.useContext(zs),{hash:a,pathname:l,search:u}=lh(t,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:ar([n,l])),s.createHref({pathname:h,search:u,hash:a})}function Ql(){return O.useContext(oh)!=null}function vr(){return Et(Ql(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(oh).location}var $A="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KA(t){O.useContext(zs).static||O.useLayoutEffect(t)}function Ea(){let{isDataRoute:t}=O.useContext(qs);return t?DP():_P()}function _P(){Et(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(Yl),{basename:e,navigator:n}=O.useContext(zs),{matches:s}=O.useContext(qs),{pathname:a}=vr(),l=JSON.stringify(Kv(s)),u=O.useRef(!1);return KA(()=>{u.current=!0}),O.useCallback((d,p={})=>{if(Ls(u.current,$A),!u.current)return;if(typeof d=="number"){n.go(d);return}let g=Wv(d,JSON.parse(l),a,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ar([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,l,a,t])}O.createContext(null);function Qv(){let{matches:t}=O.useContext(qs),e=t[t.length-1];return e?e.params:{}}function lh(t,{relative:e}={}){let{matches:n}=O.useContext(qs),{pathname:s}=vr(),a=JSON.stringify(Kv(n));return O.useMemo(()=>Wv(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function bP(t,e){return WA(t,e)}function WA(t,e,n,s,a){Et(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(zs),{matches:u}=O.useContext(qs),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",b=h&&h.route;{let P=b&&b.path||"";YA(p,!b||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let E=vr(),S;if(e){let P=typeof e=="string"?Wl(e):e;Et(g==="/"||P.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${P.pathname}" was given in the \`location\` prop.`),S=P}else S=E;let D=S.pathname||"/",M=D;if(g!=="/"){let P=g.replace(/^\//,"").split("/");M="/"+D.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=FA(t,{pathname:M});Ls(b||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Ls(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=SP(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:ar([g,l.encodeLocation?l.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:ar([g,l.encodeLocation?l.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),u,n,s,a);return e&&V?O.createElement(oh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},V):V}function EP(){let t=NP(),e=mP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=O.createElement(O.Fragment,null,O.createElement("p",null,"💿 Hey developer 👋"),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:a},n):null,u)}var TP=O.createElement(EP,null),wP=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?O.createElement(qs.Provider,{value:this.props.routeContext},O.createElement(Yv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xP({routeContext:t,match:e,children:n}){let s=O.useContext(Yl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(qs.Provider,{value:t},n)}function SP(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n?.errors;if(u!=null){let p=l.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);Et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let h=!1,d=-1;if(n)for(let p=0;p<l.length;p++){let g=l[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:b,errors:E}=n,S=g.route.loader&&!b.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||S){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((p,g,b)=>{let E,S=!1,D=null,M=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,D=g.route.errorElement||TP,h&&(d<0&&b===0?(YA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,M=null):d===b&&(S=!0,M=g.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,b+1)),V=()=>{let P;return E?P=D:S?P=M:g.route.Component?P=O.createElement(g.route.Component,null):g.route.element?P=g.route.element:P=p,O.createElement(xP,{match:g,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:P})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?O.createElement(wP,{location:n.location,revalidation:n.revalidation,component:D,error:E,children:V(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:s}):V()},null)}function Xv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AP(t){let e=O.useContext(Yl);return Et(e,Xv(t)),e}function RP(t){let e=O.useContext(vm);return Et(e,Xv(t)),e}function IP(t){let e=O.useContext(qs);return Et(e,Xv(t)),e}function Zv(t){let e=IP(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function CP(){return Zv("useRouteId")}function NP(){let t=O.useContext(Yv),e=RP("useRouteError"),n=Zv("useRouteError");return t!==void 0?t:e.errors?.[n]}function DP(){let{router:t}=AP("useNavigate"),e=Zv("useNavigate"),n=O.useRef(!1);return KA(()=>{n.current=!0}),O.useCallback(async(a,l={})=>{Ls(n.current,$A),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var fw={};function YA(t,e,n){!e&&!fw[t]&&(fw[t]=!0,Ls(!1,n))}O.memo(PP);function PP({routes:t,future:e,state:n,unstable_onError:s}){return WA(t,void 0,n,s,e)}function QA({to:t,replace:e,state:n,relative:s}){Et(Ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=O.useContext(zs);Ls(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=O.useContext(qs),{pathname:u}=vr(),h=Ea(),d=Wv(t,Kv(l),u,s==="path"),p=JSON.stringify(d);return O.useEffect(()=>{h(JSON.parse(p),{replace:e,state:n,relative:s})},[h,p,s,e,n]),null}function Ps(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MP({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){Et(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof n=="string"&&(n=Wl(n));let{pathname:d="/",search:p="",hash:g="",state:b=null,key:E="default"}=n,S=O.useMemo(()=>{let D=ur(d,u);return D==null?null:{location:{pathname:D,search:p,hash:g,state:b,key:E},navigationType:s}},[u,d,p,g,b,E,s]);return Ls(S!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:O.createElement(zs.Provider,{value:h},O.createElement(oh.Provider,{children:e,value:S}))}function VP({children:t,location:e}){return bP(zy(t),e)}function zy(t,e=[]){let n=[];return O.Children.forEach(t,(s,a)=>{if(!O.isValidElement(s))return;let l=[...e,a];if(s.type===O.Fragment){n.push.apply(n,zy(s.props.children,l));return}Et(s.type===Ps,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=zy(s.props.children,l)),n.push(u)}),n}var vd="get",_d="application/x-www-form-urlencoded";function _m(t){return t!=null&&typeof t.tagName=="string"}function OP(t){return _m(t)&&t.tagName.toLowerCase()==="button"}function kP(t){return _m(t)&&t.tagName.toLowerCase()==="form"}function jP(t){return _m(t)&&t.tagName.toLowerCase()==="input"}function LP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UP(t,e){return t.button===0&&(!e||e==="_self")&&!LP(t)}var Xf=null;function BP(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var FP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ry(t){return t!=null&&!FP.has(t)?(Ls(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):t}function zP(t,e){let n,s,a,l,u;if(kP(t)){let h=t.getAttribute("action");s=h?ur(h,e):null,n=t.getAttribute("method")||vd,a=ry(t.getAttribute("enctype"))||_d,l=new FormData(t)}else if(OP(t)||jP(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||h.getAttribute("action");if(s=d?ur(d,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||vd,a=ry(t.getAttribute("formenctype"))||ry(h.getAttribute("enctype"))||_d,l=new FormData(h,t),!BP()){let{name:p,type:g,value:b}=t;if(g==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,b)}}else{if(_m(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vd,s=null,a=_d,u=t}return l&&a==="text/plain"&&(u=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qP(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&ur(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function HP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $P(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await HP(l,n);return u.links?u.links():[]}return[]}));return QP(s.flat(1).filter(GP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function dw(t,e,n,s,a,l){let u=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,h=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):l==="data"?e.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function KP(t,e,{includeHydrateFallback:n}={}){return WP(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function WP(t){return[...new Set(t)]}function YP(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function QP(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(YP(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function XA(){let t=O.useContext(Yl);return Jv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XP(){let t=O.useContext(vm);return Jv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var e0=O.createContext(void 0);e0.displayName="FrameworkContext";function ZA(){let t=O.useContext(e0);return Jv(t,"You must render this element inside a <HydratedRouter> element"),t}function ZP(t,e){let n=O.useContext(e0),[s,a]=O.useState(!1),[l,u]=O.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:b}=e,E=O.useRef(null);O.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let M=V=>{V.forEach(P=>{u(P.isIntersecting)})},k=new IntersectionObserver(M,{threshold:.5});return E.current&&k.observe(E.current),()=>{k.disconnect()}}},[t]),O.useEffect(()=>{if(s){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[s]);let S=()=>{a(!0)},D=()=>{a(!1),u(!1)};return n?t!=="intent"?[l,E,{}]:[l,E,{onFocus:dc(h,S),onBlur:dc(d,D),onMouseEnter:dc(p,S),onMouseLeave:dc(g,D),onTouchStart:dc(b,S)}]:[!1,E,{}]}function dc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function JP({page:t,...e}){let{router:n}=XA(),s=O.useMemo(()=>FA(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?O.createElement(tM,{page:t,matches:s,...e}):null}function eM(t){let{manifest:e,routeModules:n}=ZA(),[s,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return $P(t,e,n).then(u=>{l||a(u)}),()=>{l=!0}},[t,e,n]),s}function tM({page:t,matches:e,...n}){let s=vr(),{manifest:a,routeModules:l}=ZA(),{basename:u}=XA(),{loaderData:h,matches:d}=XP(),p=O.useMemo(()=>dw(t,e,d,a,s,"data"),[t,e,d,a,s]),g=O.useMemo(()=>dw(t,e,d,a,s,"assets"),[t,e,d,a,s]),b=O.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let D=new Set,M=!1;if(e.forEach(V=>{let P=a.routes[V.route.id];!P||!P.hasLoader||(!p.some(q=>q.route.id===V.route.id)&&V.route.id in h&&l[V.route.id]?.shouldRevalidate||P.hasClientLoader?M=!0:D.add(V.route.id))}),D.size===0)return[];let k=qP(t,u,"data");return M&&D.size>0&&k.searchParams.set("_routes",e.filter(V=>D.has(V.route.id)).map(V=>V.route.id).join(",")),[k.pathname+k.search]},[u,h,s,a,p,e,t,l]),E=O.useMemo(()=>KP(g,a),[g,a]),S=eM(g);return O.createElement(O.Fragment,null,b.map(D=>O.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),E.map(D=>O.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),S.map(({key:D,link:M})=>O.createElement("link",{key:D,nonce:n.nonce,...M})))}function nM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var JA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JA&&(window.__reactRouterVersion="7.8.2")}catch{}function sM({basename:t,children:e,window:n}){let s=O.useRef();s.current==null&&(s.current=GD({window:n,v5Compat:!0}));let a=s.current,[l,u]=O.useState({action:a.action,location:a.location}),h=O.useCallback(d=>{O.startTransition(()=>u(d))},[u]);return O.useLayoutEffect(()=>a.listen(h),[a,h]),O.createElement(MP,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a})}var e1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jn=O.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:u,state:h,target:d,to:p,preventScrollReset:g,viewTransition:b,...E},S){let{basename:D}=O.useContext(zs),M=typeof p=="string"&&e1.test(p),k,V=!1;if(typeof p=="string"&&M&&(k=p,JA))try{let N=new URL(window.location.href),L=p.startsWith("//")?new URL(N.protocol+p):new URL(p),B=ur(L.pathname,D);L.origin===N.origin&&B!=null?p=B+L.search+L.hash:V=!0}catch{Ls(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=vP(p,{relative:a}),[q,se,X]=ZP(s,E),ce=oM(p,{replace:u,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:b});function j(N){e&&e(N),N.defaultPrevented||ce(N)}let A=O.createElement("a",{...E,...X,href:k||P,onClick:V||l?e:j,ref:nM(S,se),target:d,"data-discover":!M&&n==="render"?"true":void 0});return q&&!M?O.createElement(O.Fragment,null,A,O.createElement(JP,{page:P})):A});Jn.displayName="Link";var iM=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:u,viewTransition:h,children:d,...p},g){let b=lh(u,{relative:p.relative}),E=vr(),S=O.useContext(vm),{navigator:D,basename:M}=O.useContext(zs),k=S!=null&&fM(b)&&h===!0,V=D.encodeLocation?D.encodeLocation(b).pathname:b.pathname,P=E.pathname,q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(P=P.toLowerCase(),q=q?q.toLowerCase():null,V=V.toLowerCase()),q&&M&&(q=ur(q,M)||q);const se=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let X=P===V||!a&&P.startsWith(V)&&P.charAt(se)==="/",ce=q!=null&&(q===V||!a&&q.startsWith(V)&&q.charAt(V.length)==="/"),j={isActive:X,isPending:ce,isTransitioning:k},A=X?e:void 0,N;typeof s=="function"?N=s(j):N=[s,X?"active":null,ce?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(j):l;return O.createElement(Jn,{...p,"aria-current":A,className:N,ref:g,style:L,to:u,viewTransition:h},typeof d=="function"?d(j):d)});iM.displayName="NavLink";var rM=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:u=vd,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:b,...E},S)=>{let D=cM(),M=hM(h,{relative:p}),k=u.toLowerCase()==="get"?"get":"post",V=typeof h=="string"&&e1.test(h),P=q=>{if(d&&d(q),q.defaultPrevented)return;q.preventDefault();let se=q.nativeEvent.submitter,X=se?.getAttribute("formmethod")||u;D(se||q.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:a,state:l,relative:p,preventScrollReset:g,viewTransition:b})};return O.createElement("form",{ref:S,method:k,action:M,onSubmit:s?d:P,...E,"data-discover":!V&&t==="render"?"true":void 0})});rM.displayName="Form";function aM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t1(t){let e=O.useContext(Yl);return Et(e,aM(t)),e}function oM(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=Ea(),d=vr(),p=lh(t,{relative:l});return O.useCallback(g=>{if(UP(g,e)){g.preventDefault();let b=n!==void 0?n:Fc(d)===Fc(p);h(t,{replace:b,state:s,preventScrollReset:a,relative:l,viewTransition:u})}},[d,h,p,n,s,e,t,a,l,u])}var lM=0,uM=()=>`__${String(++lM)}__`;function cM(){let{router:t}=t1("useSubmit"),{basename:e}=O.useContext(zs),n=CP();return O.useCallback(async(s,a={})=>{let{action:l,method:u,encType:h,formData:d,body:p}=zP(s,e);if(a.navigate===!1){let g=a.fetcherKey||uM();await t.fetch(g,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function hM(t,{relative:e}={}){let{basename:n}=O.useContext(zs),s=O.useContext(qs);Et(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...lh(t||".",{relative:e})},u=vr();if(t==null){l.search=u.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let g=h.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:ar([n,l.pathname])),Fc(l)}function fM(t,{relative:e}={}){let n=O.useContext(GA);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=t1("useViewTransitionState"),a=lh(t,{relative:e});if(!n.isTransitioning)return!1;let l=ur(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=ur(n.nextLocation.pathname,s)||n.nextLocation.pathname;return jd(a.pathname,u)!=null||jd(a.pathname,l)!=null}var bm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Em=typeof window>"u"||"Deno"in globalThis;function Vs(){}function dM(t,e){return typeof t=="function"?t(e):t}function mM(t){return typeof t=="number"&&t>=0&&t!==1/0}function pM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qy(t,e){return typeof t=="function"?t(e):t}function gM(t,e){return typeof t=="function"?t(e):t}function mw(t,e){const{type:n="all",exact:s,fetchStatus:a,predicate:l,queryKey:u,stale:h}=t;if(u){if(s){if(e.queryHash!==t0(u,e.options))return!1}else if(!qc(e.queryKey,u))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||a&&a!==e.state.fetchStatus||l&&!l(e))}function pw(t,e){const{exact:n,status:s,predicate:a,mutationKey:l}=t;if(l){if(!e.options.mutationKey)return!1;if(n){if(zc(e.options.mutationKey)!==zc(l))return!1}else if(!qc(e.options.mutationKey,l))return!1}return!(s&&e.state.status!==s||a&&!a(e))}function t0(t,e){return(e?.queryKeyHashFn||zc)(t)}function zc(t){return JSON.stringify(t,(e,n)=>Hy(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function qc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>qc(t[n],e[n])):!1}function n1(t,e){if(t===e)return t;const n=gw(t)&&gw(e);if(n||Hy(t)&&Hy(e)){const s=n?t:Object.keys(t),a=s.length,l=n?e:Object.keys(e),u=l.length,h=n?[]:{},d=new Set(s);let p=0;for(let g=0;g<u;g++){const b=n?g:l[g];(!n&&d.has(b)||n)&&t[b]===void 0&&e[b]===void 0?(h[b]=void 0,p++):(h[b]=n1(t[b],e[b]),h[b]===t[b]&&t[b]!==void 0&&p++)}return a===u&&p===a?t:h}return e}function gw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hy(t){if(!yw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yw(t){return Object.prototype.toString.call(t)==="[object Object]"}function yM(t){return new Promise(e=>{setTimeout(e,t)})}function vM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?n1(t,e):e}function _M(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function bM(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var n0=Symbol();function s1(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===n0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var EM=class extends bm{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Em&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},i1=new EM,TM=class extends bm{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Em&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Ld=new TM;function wM(){let t,e;const n=new Promise((a,l)=>{t=a,e=l});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),t(a)},n.reject=a=>{s({status:"rejected",reason:a}),e(a)},n}function xM(t){return Math.min(1e3*2**t,3e4)}function r1(t){return(t??"online")==="online"?Ld.isOnline():!0}var a1=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function o1(t){let e=!1,n=0,s;const a=wM(),l=()=>a.status!=="pending",u=M=>{l()||(E(new a1(M)),t.abort?.())},h=()=>{e=!0},d=()=>{e=!1},p=()=>i1.isFocused()&&(t.networkMode==="always"||Ld.isOnline())&&t.canRun(),g=()=>r1(t.networkMode)&&t.canRun(),b=M=>{l()||(s?.(),a.resolve(M))},E=M=>{l()||(s?.(),a.reject(M))},S=()=>new Promise(M=>{s=k=>{(l()||p())&&M(k)},t.onPause?.()}).then(()=>{s=void 0,l()||t.onContinue?.()}),D=()=>{if(l())return;let M;const k=n===0?t.initialPromise:void 0;try{M=k??t.fn()}catch(V){M=Promise.reject(V)}Promise.resolve(M).then(b).catch(V=>{if(l())return;const P=t.retry??(Em?0:3),q=t.retryDelay??xM,se=typeof q=="function"?q(n,V):q,X=P===!0||typeof P=="number"&&n<P||typeof P=="function"&&P(n,V);if(e||!X){E(V);return}n++,t.onFail?.(n,V),yM(se).then(()=>p()?void 0:S()).then(()=>{e?E(V):D()})})};return{promise:a,status:()=>a.status,cancel:u,continue:()=>(s?.(),a),cancelRetry:h,continueRetry:d,canStart:g,start:()=>(g()?D():S().then(D),a)}}var SM=t=>setTimeout(t,0);function AM(){let t=[],e=0,n=h=>{h()},s=h=>{h()},a=SM;const l=h=>{e?t.push(h):a(()=>{n(h)})},u=()=>{const h=t;t=[],h.length&&a(()=>{s(()=>{h.forEach(d=>{n(d)})})})};return{batch:h=>{let d;e++;try{d=h()}finally{e--,e||u()}return d},batchCalls:h=>(...d)=>{l(()=>{h(...d)})},schedule:l,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{s=h},setScheduler:h=>{a=h}}}var Dn=AM(),l1=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mM(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Em?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},RM=class extends l1{#e;#t;#n;#i;#s;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=CM(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const s=vM(this.state.data,e,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),s}setState(e,n){this.#r({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Vs).catch(Vs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>gM(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qy(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!pM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const s=new AbortController,a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},l=()=>{const d=s1(this.options,n),g=(()=>{const b={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(b),b})();return this.#o=!1,this.options.persister?this.options.persister(d,g,this):d(g)},h=(()=>{const d={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:l};return a(d),d})();this.options.behavior?.onFetch(h,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#r({type:"fetch",meta:h.fetchOptions?.meta}),this.#s=o1({initialPromise:n?.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onFail:(d,p)=>{this.#r({type:"failed",failureCount:d,error:p})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0});try{const d=await this.#s.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#n.config.onSuccess?.(d,this),this.#n.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof a1){if(d.silent)return this.#s.promise;if(d.revert){if(this.setState({...this.#t,fetchStatus:"idle"}),this.state.data===void 0)throw d;return this.state.data}}throw this.#r({type:"error",error:d}),this.#n.config.onError?.(d,this),this.#n.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#r(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...IM(s.data,this.options),fetchMeta:e.meta??null};case"success":const a={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const l=e.error;return{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),Dn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function IM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var NM=class extends bm{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const s=e.queryKey,a=e.queryHash??t0(s,e);let l=this.get(a);return l||(l=new RM({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Dn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>mw(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>mw(t,n)):e}notify(t){Dn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Dn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Dn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},DM=class extends l1{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||PM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(n=>n!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#i({type:"continue"})};this.#n=o1({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(l,u)=>{this.#i({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",a=!this.#n.canStart();try{if(s)n();else{this.#i({type:"pending",variables:e,isPaused:a}),await this.#t.config.onMutate?.(e,this);const u=await this.options.onMutate?.(e);u!==this.state.context&&this.#i({type:"pending",context:u,variables:e,isPaused:a})}const l=await this.#n.start();return await this.#t.config.onSuccess?.(l,e,this.state.context,this),await this.options.onSuccess?.(l,e,this.state.context),await this.#t.config.onSettled?.(l,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(l,null,e,this.state.context),this.#i({type:"success",data:l}),l}catch(l){try{throw await this.#t.config.onError?.(l,e,this.state.context,this),await this.options.onError?.(l,e,this.state.context),await this.#t.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,l,e,this.state.context),l}finally{this.#i({type:"error",error:l})}}finally{this.#t.runNext(this)}}#i(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Dn.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function PM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MM=class extends bm{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const s=new DM({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){this.#e.add(t);const e=Zf(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Zf(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Zf(t);if(typeof e=="string"){const s=this.#t.get(e)?.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){const e=Zf(t);return typeof e=="string"?this.#t.get(e)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Dn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>pw(e,n))}findAll(t={}){return this.getAll().filter(e=>pw(t,e))}notify(t){Dn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Dn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Vs))))}};function Zf(t){return t.options.scope?.id}function vw(t){return{onFetch:(e,n)=>{const s=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,l=e.state.data?.pages||[],u=e.state.data?.pageParams||[];let h={pages:[],pageParams:[]},d=0;const p=async()=>{let g=!1;const b=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},E=s1(e.options,e.fetchOptions),S=async(D,M,k)=>{if(g)return Promise.reject();if(M==null&&D.pages.length)return Promise.resolve(D);const P=(()=>{const ce={client:e.client,queryKey:e.queryKey,pageParam:M,direction:k?"backward":"forward",meta:e.options.meta};return b(ce),ce})(),q=await E(P),{maxPages:se}=e.options,X=k?bM:_M;return{pages:X(D.pages,q,se),pageParams:X(D.pageParams,M,se)}};if(a&&l.length){const D=a==="backward",M=D?VM:_w,k={pages:l,pageParams:u},V=M(s,k);h=await S(k,V,D)}else{const D=t??l.length;do{const M=d===0?u[0]??s.initialPageParam:_w(s,h);if(d>0&&M==null)break;h=await S(h,M),d++}while(d<D)}return h};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function _w(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function VM(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var OM=class{#e;#t;#n;#i;#s;#a;#o;#r;constructor(t={}){this.#e=t.queryCache||new NM,this.#t=t.mutationCache||new MM,this.#n=t.defaultOptions||{},this.#i=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=i1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=Ld.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#r?.(),this.#r=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(qy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),l=this.#e.get(s.queryHash)?.state.data,u=dM(e,l);if(u!==void 0)return this.#e.build(this,s).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Dn.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Dn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Dn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=Dn.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(s).then(Vs).catch(Vs)}invalidateQueries(t,e={}){return Dn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=Dn.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,n);return n.throwOnError||(l=l.catch(Vs)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(s).then(Vs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(qy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Vs).catch(Vs)}fetchInfiniteQuery(t){return t.behavior=vw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Vs).catch(Vs)}ensureInfiniteQueryData(t){return t.behavior=vw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ld.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(zc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(s=>{qc(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(zc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(s=>{qc(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=t0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===n0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},kM=O.createContext(void 0),jM=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),v.jsx(kM.Provider,{value:t,children:e}));let LM={data:""},UM=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||LM,BM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,FM=/\/\*[^]*?\*\/|  +/g,bw=/\n+/g,ea=(t,e)=>{let n="",s="",a="";for(let l in t){let u=t[l];l[0]=="@"?l[1]=="i"?n=l+" "+u+";":s+=l[1]=="f"?ea(u,l):l+"{"+ea(u,l[1]=="k"?"":e)+"}":typeof u=="object"?s+=ea(u,e?e.replace(/([^,])+/g,h=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,h):h?h+" "+d:d)):l):u!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=ea.p?ea.p(l,u):l+":"+u+";")}return n+(e&&a?e+"{"+a+"}":a)+s},nr={},u1=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+u1(t[n]);return e}return t},zM=(t,e,n,s,a)=>{let l=u1(t),u=nr[l]||(nr[l]=(d=>{let p=0,g=11;for(;p<d.length;)g=101*g+d.charCodeAt(p++)>>>0;return"go"+g})(l));if(!nr[u]){let d=l!==t?t:(p=>{let g,b,E=[{}];for(;g=BM.exec(p.replace(FM,""));)g[4]?E.shift():g[3]?(b=g[3].replace(bw," ").trim(),E.unshift(E[0][b]=E[0][b]||{})):E[0][g[1]]=g[2].replace(bw," ").trim();return E[0]})(t);nr[u]=ea(a?{["@keyframes "+u]:d}:d,n?"":"."+u)}let h=n&&nr.g?nr.g:null;return n&&(nr.g=nr[u]),((d,p,g,b)=>{b?p.data=p.data.replace(b,d):p.data.indexOf(d)===-1&&(p.data=g?d+p.data:p.data+d)})(nr[u],e,s,h),u},qM=(t,e,n)=>t.reduce((s,a,l)=>{let u=e[l];if(u&&u.call){let h=u(n),d=h&&h.props&&h.props.className||/^go/.test(h)&&h;u=d?"."+d:h&&typeof h=="object"?h.props?"":ea(h,""):h===!1?"":h}return s+a+(u??"")},"");function Tm(t){let e=this||{},n=t.call?t(e.p):t;return zM(n.unshift?n.raw?qM(n,[].slice.call(arguments,1),e.p):n.reduce((s,a)=>Object.assign(s,a&&a.call?a(e.p):a),{}):n,UM(e.target),e.g,e.o,e.k)}let c1,Gy,$y;Tm.bind({g:1});let cr=Tm.bind({k:1});function HM(t,e,n,s){ea.p=e,c1=t,Gy=n,$y=s}function Ta(t,e){let n=this||{};return function(){let s=arguments;function a(l,u){let h=Object.assign({},l),d=h.className||a.className;n.p=Object.assign({theme:Gy&&Gy()},h),n.o=/ *go\d+/.test(d),h.className=Tm.apply(n,s)+(d?" "+d:"");let p=t;return t[0]&&(p=h.as||t,delete h.as),$y&&p[0]&&$y(h),c1(p,h)}return a}}var GM=t=>typeof t=="function",Ud=(t,e)=>GM(t)?t(e):t,$M=(()=>{let t=0;return()=>(++t).toString()})(),h1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),KM=20,s0="default",f1=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:s}=e;return f1(t,{type:t.toasts.find(u=>u.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(u=>u.id===a||a===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let l=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+l}))}}},bd=[],d1={toasts:[],pausedAt:void 0,settings:{toastLimit:KM}},di={},m1=(t,e=s0)=>{di[e]=f1(di[e]||d1,t),bd.forEach(([n,s])=>{n===e&&s(di[e])})},p1=t=>Object.keys(di).forEach(e=>m1(t,e)),WM=t=>Object.keys(di).find(e=>di[e].toasts.some(n=>n.id===t)),wm=(t=s0)=>e=>{m1(e,t)},YM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},QM=(t={},e=s0)=>{let[n,s]=O.useState(di[e]||d1),a=O.useRef(di[e]);O.useEffect(()=>(a.current!==di[e]&&s(di[e]),bd.push([e,s]),()=>{let u=bd.findIndex(([h])=>h===e);u>-1&&bd.splice(u,1)}),[e]);let l=n.toasts.map(u=>{var h,d,p;return{...t,...t[u.type],...u,removeDelay:u.removeDelay||((h=t[u.type])==null?void 0:h.removeDelay)||t?.removeDelay,duration:u.duration||((d=t[u.type])==null?void 0:d.duration)||t?.duration||YM[u.type],style:{...t.style,...(p=t[u.type])==null?void 0:p.style,...u.style}}});return{...n,toasts:l}},XM=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||$M()}),uh=t=>(e,n)=>{let s=XM(e,t,n);return wm(s.toasterId||WM(s.id))({type:2,toast:s}),s.id},Se=(t,e)=>uh("blank")(t,e);Se.error=uh("error");Se.success=uh("success");Se.loading=uh("loading");Se.custom=uh("custom");Se.dismiss=(t,e)=>{let n={type:3,toastId:t};e?wm(e)(n):p1(n)};Se.dismissAll=t=>Se.dismiss(void 0,t);Se.remove=(t,e)=>{let n={type:4,toastId:t};e?wm(e)(n):p1(n)};Se.removeAll=t=>Se.remove(void 0,t);Se.promise=(t,e,n)=>{let s=Se.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let l=e.success?Ud(e.success,a):void 0;return l?Se.success(l,{id:s,...n,...n?.success}):Se.dismiss(s),a}).catch(a=>{let l=e.error?Ud(e.error,a):void 0;l?Se.error(l,{id:s,...n,...n?.error}):Se.dismiss(s)}),t};var ZM=1e3,JM=(t,e="default")=>{let{toasts:n,pausedAt:s}=QM(t,e),a=O.useRef(new Map).current,l=O.useCallback((b,E=ZM)=>{if(a.has(b))return;let S=setTimeout(()=>{a.delete(b),u({type:4,toastId:b})},E);a.set(b,S)},[]);O.useEffect(()=>{if(s)return;let b=Date.now(),E=n.map(S=>{if(S.duration===1/0)return;let D=(S.duration||0)+S.pauseDuration-(b-S.createdAt);if(D<0){S.visible&&Se.dismiss(S.id);return}return setTimeout(()=>Se.dismiss(S.id,e),D)});return()=>{E.forEach(S=>S&&clearTimeout(S))}},[n,s,e]);let u=O.useCallback(wm(e),[e]),h=O.useCallback(()=>{u({type:5,time:Date.now()})},[u]),d=O.useCallback((b,E)=>{u({type:1,toast:{id:b,height:E}})},[u]),p=O.useCallback(()=>{s&&u({type:6,time:Date.now()})},[s,u]),g=O.useCallback((b,E)=>{let{reverseOrder:S=!1,gutter:D=8,defaultPosition:M}=E||{},k=n.filter(q=>(q.position||M)===(b.position||M)&&q.height),V=k.findIndex(q=>q.id===b.id),P=k.filter((q,se)=>se<V&&q.visible).length;return k.filter(q=>q.visible).slice(...S?[P+1]:[0,P]).reduce((q,se)=>q+(se.height||0)+D,0)},[n]);return O.useEffect(()=>{n.forEach(b=>{if(b.dismissed)l(b.id,b.removeDelay);else{let E=a.get(b.id);E&&(clearTimeout(E),a.delete(b.id))}})},[n,l]),{toasts:n,handlers:{updateHeight:d,startPause:h,endPause:p,calculateOffset:g}}},eV=cr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tV=cr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nV=cr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,sV=Ta("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${eV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${nV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iV=cr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rV=Ta("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${iV} 1s linear infinite;
`,aV=cr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oV=cr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,lV=Ta("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,uV=Ta("div")`
  position: absolute;
`,cV=Ta("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,hV=cr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fV=Ta("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${hV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dV=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?O.createElement(fV,null,e):e:n==="blank"?null:O.createElement(cV,null,O.createElement(rV,{...s}),n!=="loading"&&O.createElement(uV,null,n==="error"?O.createElement(sV,{...s}):O.createElement(lV,{...s})))},mV=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,pV=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,gV="0%{opacity:0;} 100%{opacity:1;}",yV="0%{opacity:1;} 100%{opacity:0;}",vV=Ta("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_V=Ta("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bV=(t,e)=>{let n=t.includes("top")?1:-1,[s,a]=h1()?[gV,yV]:[mV(n),pV(n)];return{animation:e?`${cr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${cr(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},EV=O.memo(({toast:t,position:e,style:n,children:s})=>{let a=t.height?bV(t.position||e||"top-center",t.visible):{opacity:0},l=O.createElement(dV,{toast:t}),u=O.createElement(_V,{...t.ariaProps},Ud(t.message,t));return O.createElement(vV,{className:t.className,style:{...a,...n,...t.style}},typeof s=="function"?s({icon:l,message:u}):O.createElement(O.Fragment,null,l,u))});HM(O.createElement);var TV=({id:t,className:e,style:n,onHeightUpdate:s,children:a})=>{let l=O.useCallback(u=>{if(u){let h=()=>{let d=u.getBoundingClientRect().height;s(t,d)};h(),new MutationObserver(h).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return O.createElement("div",{ref:l,className:e,style:n},a)},wV=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:h1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...a}},xV=Tm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jf=16,SV=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:a,toasterId:l,containerStyle:u,containerClassName:h})=>{let{toasts:d,handlers:p}=JM(n,l);return O.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:Jf,left:Jf,right:Jf,bottom:Jf,pointerEvents:"none",...u},className:h,onMouseEnter:p.startPause,onMouseLeave:p.endPause},d.map(g=>{let b=g.position||e,E=p.calculateOffset(g,{reverseOrder:t,gutter:s,defaultPosition:e}),S=wV(b,E);return O.createElement(TV,{id:g.id,key:g.id,onHeightUpdate:p.updateHeight,className:g.visible?xV:"",style:S},g.type==="custom"?Ud(g.message,g):a?a(g):O.createElement(EV,{toast:g,position:b}))}))};const Ew=t=>{let e;const n=new Set,s=(p,g)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const E=e;e=g??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(S=>S(e,E))}},a=()=>e,h={setState:s,getState:a,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p))},d=e=t(s,a,h);return h},AV=(t=>t?Ew(t):Ew),RV=t=>t;function IV(t,e=RV){const n=mn.useSyncExternalStore(t.subscribe,mn.useCallback(()=>e(t.getState()),[t,e]),mn.useCallback(()=>e(t.getInitialState()),[t,e]));return mn.useDebugValue(n),n}const CV=t=>{const e=AV(t),n=s=>IV(e,s);return Object.assign(n,e),n},g1=(t=>CV),Tw={BASE_URL:"/willing-tree/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3001",VITE_APP_ENV:"production",VITE_APP_NAME:"Willing Box",VITE_APP_VERSION:"1.0.0",VITE_FIREBASE_API_KEY:"",VITE_FIREBASE_APP_ID:"",VITE_FIREBASE_AUTH_DOMAIN:"",VITE_FIREBASE_MEASUREMENT_ID:"",VITE_FIREBASE_MESSAGING_SENDER_ID:"",VITE_FIREBASE_PROJECT_ID:"",VITE_FIREBASE_STORAGE_BUCKET:"",VITE_SECURITY_HEADERS:"true",VITE_STRIPE_PREMIUM_PRICE_ID:"",VITE_STRIPE_PUBLISHABLE_KEY:"",VITE_USE_FIREBASE_EMULATORS:"false"},Hc=new Map,ed=t=>{const e=Hc.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,s])=>[n,s.getState()])):{}},NV=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const s=Hc.get(n.name);if(s)return{type:"tracked",store:t,...s};const a={connection:e.connect(n),stores:{}};return Hc.set(n.name,a),{type:"tracked",store:t,...a}},DV=(t,e)=>{if(e===void 0)return;const n=Hc.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Hc.delete(t))},PV=t=>{var e,n;if(!t)return;const s=t.split(`
`),a=s.findIndex(u=>u.includes("api.setState"));if(a<0)return;const l=((e=s[a+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(l))==null?void 0:n[1]},MV=(t,e={})=>(n,s,a)=>{const{enabled:l,anonymousActionType:u,store:h,...d}=e;let p;try{p=(l??(Tw?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!p)return t(n,s,a);const{connection:g,...b}=NV(h,p,d);let E=!0;a.setState=((M,k,V)=>{const P=n(M,k);if(!E)return P;const q=V===void 0?{type:u||PV(new Error().stack)||"anonymous"}:typeof V=="string"?{type:V}:V;return h===void 0?(g?.send(q,s()),P):(g?.send({...q,type:`${h}/${q.type}`},{...ed(d.name),[h]:a.getState()}),P)}),a.devtools={cleanup:()=>{g&&typeof g.unsubscribe=="function"&&g.unsubscribe(),DV(d.name,h)}};const S=(...M)=>{const k=E;E=!1,n(...M),E=k},D=t(a.setState,s,a);if(b.type==="untracked"?g?.init(D):(b.stores[b.store]=a,g?.init(Object.fromEntries(Object.entries(b.stores).map(([M,k])=>[M,M===b.store?D:k.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let M=!1;const k=a.dispatch;a.dispatch=(...V)=>{(Tw?"production":void 0)!=="production"&&V[0].type==="__setState"&&!M&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),M=!0),k(...V)}}return g.subscribe(M=>{var k;switch(M.type){case"ACTION":if(typeof M.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return ay(M.payload,V=>{if(V.type==="__setState"){if(h===void 0){S(V.state);return}Object.keys(V.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const P=V.state[h];if(P==null)return;JSON.stringify(a.getState())!==JSON.stringify(P)&&S(P);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(V)});case"DISPATCH":switch(M.payload.type){case"RESET":return S(D),h===void 0?g?.init(a.getState()):g?.init(ed(d.name));case"COMMIT":if(h===void 0){g?.init(a.getState());return}return g?.init(ed(d.name));case"ROLLBACK":return ay(M.state,V=>{if(h===void 0){S(V),g?.init(a.getState());return}S(V[h]),g?.init(ed(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ay(M.state,V=>{if(h===void 0){S(V);return}JSON.stringify(a.getState())!==JSON.stringify(V[h])&&S(V[h])});case"IMPORT_STATE":{const{nextLiftedState:V}=M.payload,P=(k=V.computedStates.slice(-1)[0])==null?void 0:k.state;if(!P)return;S(h===void 0?P:P[h]),g?.send(null,V);return}case"PAUSE_RECORDING":return E=!E}return}}),D},y1=MV,ay=(t,e)=>{let n;try{n=JSON.parse(t)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}n!==void 0&&e(n)};function VV(t,e){let n;try{n=t()}catch{return}return{getItem:a=>{var l;const u=d=>d===null?null:JSON.parse(d,void 0),h=(l=n.getItem(a))!=null?l:null;return h instanceof Promise?h.then(u):u(h)},setItem:(a,l)=>n.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>n.removeItem(a)}}const Ky=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return Ky(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Ky(s)(n)}}}},OV=(t,e)=>(n,s,a)=>{let l={storage:VV(()=>localStorage),partialize:M=>M,version:0,merge:(M,k)=>({...k,...M}),...e},u=!1;const h=new Set,d=new Set;let p=l.storage;if(!p)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...M)},s,a);const g=()=>{const M=l.partialize({...s()});return p.setItem(l.name,{state:M,version:l.version})},b=a.setState;a.setState=(M,k)=>(b(M,k),g());const E=t((...M)=>(n(...M),g()),s,a);a.getInitialState=()=>E;let S;const D=()=>{var M,k;if(!p)return;u=!1,h.forEach(P=>{var q;return P((q=s())!=null?q:E)});const V=((k=l.onRehydrateStorage)==null?void 0:k.call(l,(M=s())!=null?M:E))||void 0;return Ky(p.getItem.bind(p))(l.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==l.version){if(l.migrate){const q=l.migrate(P.state,P.version);return q instanceof Promise?q.then(se=>[!0,se]):[!0,q]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var q;const[se,X]=P;if(S=l.merge(X,(q=s())!=null?q:E),n(S,!0),se)return g()}).then(()=>{V?.(S,void 0),S=s(),u=!0,d.forEach(P=>P(S))}).catch(P=>{V?.(void 0,P)})};return a.persist={setOptions:M=>{l={...l,...M},M.storage&&(p=M.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>D(),hasHydrated:()=>u,onHydrate:M=>(h.add(M),()=>{h.delete(M)}),onFinishHydration:M=>(d.add(M),()=>{d.delete(M)})},l.skipHydration||D(),S||E},kV=OV,jV=()=>{};var ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},LV=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],u=t[n++],h=t[n++],d=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const l=t[n++],u=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},_1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const l=t[a],u=a+1<t.length,h=u?t[a+1]:0,d=a+2<t.length,p=d?t[a+2]:0,g=l>>2,b=(l&3)<<4|h>>4;let E=(h&15)<<2|p>>6,S=p&63;d||(S=64,u||(E=64)),s.push(n[g],n[b],n[E],n[S])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const b=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||p==null||b==null)throw new UV;const E=l<<2|h>>4;if(s.push(E),p!==64){const S=h<<4&240|p>>2;if(s.push(S),b!==64){const D=p<<6&192|b;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BV=function(t){const e=v1(t);return _1.encodeByteArray(e,!0)},Bd=function(t){return BV(t).replace(/\./g,"")},b1=function(t){try{return _1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=()=>FV().__FIREBASE_DEFAULTS__,qV=()=>{if(typeof process>"u"||typeof ww>"u")return;const t=ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b1(t[1]);return e&&JSON.parse(e)},xm=()=>{try{return jV()||zV()||qV()||HV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E1=t=>xm()?.emulatorHosts?.[t],T1=t=>{const e=E1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},w1=()=>xm()?.config,x1=t=>xm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bd(JSON.stringify(n)),Bd(JSON.stringify(u)),""].join(".")}const Ac={};function KV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?t.emulator.push(e):t.prod.push(e);return t}function WV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xw=!1;function r0(t,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||Ac[t]===e||Ac[t]||xw)return;Ac[t]=e;function n(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=KV().prod.length>0;function u(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{xw=!0,u()},E}function g(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){const E=WV(s),S=n("text"),D=document.getElementById(S)||document.createElement("span"),M=n("learnmore"),k=document.getElementById(M)||document.createElement("a"),V=n("preprendIcon"),P=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;h(q),g(k,M);const se=p();d(P,V),q.append(P,D,k,se),document.body.appendChild(q)}l?(D.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function QV(){const t=xm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JV(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eO(){return!QV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A1(){try{return typeof indexedDB=="object"}catch{return!1}}function R1(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function tO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="FirebaseError";class Hs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=nO,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?sO(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Hs(a,h,s)}}function sO(t,e){return t.replace(iO,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const iO=/\{\$([^}]+)}/g;function rO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const l=t[a],u=e[a];if(Sw(l)&&Sw(u)){if(!fa(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Sw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function bc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aO(t,e){const n=new oO(t,e);return n.subscribe.bind(n)}class oO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");lO(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=oy),a.error===void 0&&(a.error=oy),a.complete===void 0&&(a.complete=oy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function oy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=1e3,cO=2,hO=14400*1e3,fO=.5;function Aw(t,e=uO,n=cO){const s=e*Math.pow(n,t),a=Math.round(fO*s*(Math.random()-.5)*2);return Math.min(hO,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new GV;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pO(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mO(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mO(t){return t===ao?void 0:t}function pO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const yO={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},vO=Ke.INFO,_O={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},bO=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=_O[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=vO,this._logHandler=bO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const EO=(t,e)=>e.some(n=>t instanceof n);let Rw,Iw;function TO(){return Rw||(Rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wO(){return Iw||(Iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I1=new WeakMap,Wy=new WeakMap,C1=new WeakMap,ly=new WeakMap,a0=new WeakMap;function xO(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(oa(t.result)),a()},u=()=>{s(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&I1.set(n,t)}).catch(()=>{}),a0.set(e,t),e}function SO(t){if(Wy.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),a()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Wy.set(t,e)}let Yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AO(t){Yy=t(Yy)}function RO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(uy(this),e,...n);return C1.set(s,e.sort?e.sort():[e]),oa(s)}:wO().includes(t)?function(...e){return t.apply(uy(this),e),oa(I1.get(this))}:function(...e){return oa(t.apply(uy(this),e))}}function IO(t){return typeof t=="function"?RO(t):(t instanceof IDBTransaction&&SO(t),EO(t,TO())?new Proxy(t,Yy):t)}function oa(t){if(t instanceof IDBRequest)return xO(t);if(ly.has(t))return ly.get(t);const e=IO(t);return e!==t&&(ly.set(t,e),a0.set(e,t)),e}const uy=t=>a0.get(t);function N1(t,e,{blocked:n,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(t,e),h=oa(u);return s&&u.addEventListener("upgradeneeded",d=>{s(oa(u.result),d.oldVersion,d.newVersion,oa(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const CO=["get","getKey","getAll","getAllKeys","count"],NO=["put","add","delete","clear"],cy=new Map;function Cw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cy.get(e))return cy.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=NO.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||CO.includes(n)))return;const l=async function(u,...h){const d=this.transaction(u,a?"readwrite":"readonly");let p=d.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),a&&d.done]))[0]};return cy.set(e,l),l}AO(t=>({...t,get:(e,n,s)=>Cw(e,n)||t.get(e,n,s),has:(e,n)=>!!Cw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PO(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PO(t){return t.getComponent()?.type==="VERSION"}const Qy="@firebase/app",Nw="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Sm("@firebase/app"),MO="@firebase/app-compat",VO="@firebase/analytics-compat",OO="@firebase/analytics",kO="@firebase/app-check-compat",jO="@firebase/app-check",LO="@firebase/auth",UO="@firebase/auth-compat",BO="@firebase/database",FO="@firebase/data-connect",zO="@firebase/database-compat",qO="@firebase/functions",HO="@firebase/functions-compat",GO="@firebase/installations",$O="@firebase/installations-compat",KO="@firebase/messaging",WO="@firebase/messaging-compat",YO="@firebase/performance",QO="@firebase/performance-compat",XO="@firebase/remote-config",ZO="@firebase/remote-config-compat",JO="@firebase/storage",ek="@firebase/storage-compat",tk="@firebase/firestore",nk="@firebase/ai",sk="@firebase/firestore-compat",ik="firebase",rk="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="[DEFAULT]",ak={[Qy]:"fire-core",[MO]:"fire-core-compat",[OO]:"fire-analytics",[VO]:"fire-analytics-compat",[jO]:"fire-app-check",[kO]:"fire-app-check-compat",[LO]:"fire-auth",[UO]:"fire-auth-compat",[BO]:"fire-rtdb",[FO]:"fire-data-connect",[zO]:"fire-rtdb-compat",[qO]:"fire-fn",[HO]:"fire-fn-compat",[GO]:"fire-iid",[$O]:"fire-iid-compat",[KO]:"fire-fcm",[WO]:"fire-fcm-compat",[YO]:"fire-perf",[QO]:"fire-perf-compat",[XO]:"fire-rc",[ZO]:"fire-rc-compat",[JO]:"fire-gcs",[ek]:"fire-gcs-compat",[tk]:"fire-fst",[sk]:"fire-fst-compat",[nk]:"fire-vertex","fire-js":"fire-js",[ik]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map,ok=new Map,Zy=new Map;function Dw(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Us(t){const e=t.name;if(Zy.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of Fd.values())Dw(n,t);for(const n of ok.values())Dw(n,t);return!0}function wa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function es(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new Ao("app","Firebase",lk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=rk;function D1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Xy,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw la.create("bad-app-name",{appName:String(a)});if(n||(n=w1()),!n)throw la.create("no-options");const l=Fd.get(a);if(l){if(fa(n,l.options)&&fa(s,l.config))return l;throw la.create("duplicate-app",{appName:a})}const u=new gO(a);for(const d of Zy.values())u.addComponent(d);const h=new uk(n,s,u);return Fd.set(a,h),h}function Am(t=Xy){const e=Fd.get(t);if(!e&&t===Xy&&w1())return D1();if(!e)throw la.create("no-app",{appName:t});return e}function zn(t,e,n){let s=ak[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(u.join(" "));return}Us(new Ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="firebase-heartbeat-database",hk=1,Gc="firebase-heartbeat-store";let hy=null;function P1(){return hy||(hy=N1(ck,hk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw la.create("idb-open",{originalErrorMessage:t.message})})),hy}async function fk(t){try{const n=(await P1()).transaction(Gc),s=await n.objectStore(Gc).get(M1(t));return await n.done,s}catch(e){if(e instanceof Hs)hr.warn(e.message);else{const n=la.create("idb-get",{originalErrorMessage:e?.message});hr.warn(n.message)}}}async function Pw(t,e){try{const s=(await P1()).transaction(Gc,"readwrite");await s.objectStore(Gc).put(e,M1(t)),await s.done}catch(n){if(n instanceof Hs)hr.warn(n.message);else{const s=la.create("idb-set",{originalErrorMessage:n?.message});hr.warn(s.message)}}}function M1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=1024,mk=30;class pk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>mk){const a=vk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mw(),{heartbeatsToSend:n,unsentEntries:s}=gk(this._heartbeatsCache.heartbeats),a=Bd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return hr.warn(e),""}}}function Mw(){return new Date().toISOString().substring(0,10)}function gk(t,e=dk){const n=[];let s=t.slice();for(const a of t){const l=n.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Vw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Vw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A1()?R1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vw(t){return Bd(JSON.stringify({version:2,heartbeats:t})).length}function vk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){Us(new Ts("platform-logger",e=>new DO(e),"PRIVATE")),Us(new Ts("heartbeat",e=>new pk(e),"PRIVATE")),zn(Qy,Nw,t),zn(Qy,Nw,"esm2020"),zn("fire-js","")}_k("");function V1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bk=V1,O1=new Ao("auth","Firebase",V1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=new Sm("@firebase/auth");function Ek(t,...e){zd.logLevel<=Ke.WARN&&zd.warn(`Auth (${Xl}): ${t}`,...e)}function Ed(t,...e){zd.logLevel<=Ke.ERROR&&zd.error(`Auth (${Xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,...e){throw o0(t,...e)}function pi(t,...e){return o0(t,...e)}function k1(t,e,n){const s={...bk(),[e]:n};return new Ao("auth","Firebase",s).create(e,{appName:t.name})}function or(t){return k1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o0(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return O1.create(t,...e)}function Me(t,e,...n){if(!t)throw o0(e,...n)}function ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ed(e),new Error(e)}function fr(t,e){t||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){return typeof self<"u"&&self.location?.href||""}function Tk(){return Ow()==="http:"||Ow()==="https:"}function Ow(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tk()||S1()||"connection"in navigator)?navigator.onLine:!0}function xk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=YV()||ZV()}get(){return wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Rk=new hh(3e4,6e4);function xa(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _r(t,e,n,s,a={}){return L1(t,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=ch({key:t.config.apiKey,...u}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...l};return XV()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&So(t.emulatorConfig.host)&&(p.credentials="include"),j1.fetch()(await U1(t,t.config.apiHost,n,h),p)})}async function L1(t,e,n){t._canInitEmulator=!1;const s={...Sk,...e};try{const a=new Ck(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw td(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw td(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw td(t,"user-disabled",u);const g=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw k1(t,g,p);Bs(t,g)}}catch(a){if(a instanceof Hs)throw a;Bs(t,"network-request-failed",{message:String(a)})}}async function fh(t,e,n,s,a={}){const l=await _r(t,e,n,s,a);return"mfaPendingCredential"in l&&Bs(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function U1(t,e,n,s){const a=`${e}${n}?${s}`,l=t,u=l.config.emulator?l0(t.config,a):`${t.config.apiScheme}://${a}`;return Ak.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function Ik(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ck{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(pi(this.auth,"network-request-failed")),Rk.get())})}}function td(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=pi(t,e,s);return a.customData._tokenResponse=n,a}function kw(t){return t!==void 0&&t.enterprise!==void 0}class Nk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ik(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Dk(t,e){return _r(t,"GET","/v2/recaptchaConfig",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e){return _r(t,"POST","/v1/accounts:delete",e)}async function qd(t,e){return _r(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mk(t,e=!1){const n=xt(t),s=await n.getIdToken(e),a=u0(s);Me(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:s,authTime:Rc(fy(a.auth_time)),issuedAtTime:Rc(fy(a.iat)),expirationTime:Rc(fy(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function fy(t){return Number(t)*1e3}function u0(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const a=b1(n);return a?JSON.parse(a):(Ed("Failed to decode base64 JWT payload"),null)}catch(a){return Ed("Caught error parsing JWT payload as JSON",a?.toString()),null}}function jw(t){const e=u0(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Hs&&Vk(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Vk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(t){const e=t.auth,n=await t.getIdToken(),s=await Ll(t,qd(e,{idToken:n}));Me(s?.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=a.providerUserInfo?.length?B1(a.providerUserInfo):[],u=jk(t.providerData,l),h=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!u?.length,p=h?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new ev(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function kk(t){const e=xt(t);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jk(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function B1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e){const n=await L1(t,{},async()=>{const s=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,u=await U1(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:s};return t.emulatorConfig&&So(t.emulatorConfig.host)&&(d.credentials="include"),j1.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Uk(t,e){return _r(t,"POST","/v2/accounts:revokeToken",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=jw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:l}=await Lk(e,n);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:l}=n,u=new Pl;return s&&(Me(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Me(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Me(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new Ok(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ev(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mk(this,e)}reload(){return kk(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Hd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(or(this.auth));const e=await this.getIdToken();return await Ll(this,Pk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:b,emailVerified:E,isAnonymous:S,providerData:D,stsTokenManager:M}=n;Me(b&&M,e,"internal-error");const k=Pl.fromJSON(this.name,M);Me(typeof b=="string",e,"internal-error"),Xr(s,e.name),Xr(a,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof S=="boolean",e,"internal-error"),Xr(l,e.name),Xr(u,e.name),Xr(h,e.name),Xr(d,e.name),Xr(p,e.name),Xr(g,e.name);const V=new js({uid:b,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:S,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:p,lastLoginAt:g});return D&&Array.isArray(D)&&(V.providerData=D.map(P=>({...P}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,n,s=!1){const a=new Pl;a.updateFromServerResponse(n);const l=new js({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Hd(l),l}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];Me(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?B1(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,h=new Pl;h.updateFromIdToken(s);const d=new js({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new ev(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new Map;function rr(t){fr(t instanceof Function,"Expected a class definition");let e=Lw.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F1.type="NONE";const Uw=F1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t,e,n){return`firebase:${t}:${e}:${n}`}class Ml{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Td(this.userKey,a.apiKey,l),this.fullPersistenceKey=Td("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qd(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ml(rr(Uw),e,s);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||rr(Uw);const u=Td(s,e.config.apiKey,e.name);let h=null;for(const p of n)try{const g=await p._get(u);if(g){let b;if(typeof g=="string"){const E=await qd(e,{idToken:g}).catch(()=>{});if(!E)break;b=await js._fromGetAccountInfoResponse(e,E,g)}else b=js._fromJSON(e,g);p!==l&&(h=b),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Ml(l,e,s):(l=d[0],h&&await l._set(u,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Ml(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(W1(e))return"Webos";if(q1(e))return"Safari";if((e.includes("chrome/")||H1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function z1(t=Sn()){return/firefox\//i.test(t)}function q1(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H1(t=Sn()){return/crios\//i.test(t)}function G1(t=Sn()){return/iemobile/i.test(t)}function $1(t=Sn()){return/android/i.test(t)}function K1(t=Sn()){return/blackberry/i.test(t)}function W1(t=Sn()){return/webos/i.test(t)}function c0(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bk(t=Sn()){return c0(t)&&!!window.navigator?.standalone}function Fk(){return JV()&&document.documentMode===10}function Y1(t=Sn()){return c0(t)||$1(t)||W1(t)||K1(t)||/windows phone/i.test(t)||G1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e=[]){let n;switch(t){case"Browser":n=Bw(Sn());break;case"Worker":n=`${Bw(Sn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((u,h)=>{try{const d=e(l);u(d)}catch(d){h(d)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e={}){return _r(t,"GET","/v2/passwordPolicy",xa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=6;class Gk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Hk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fw(this),this.idTokenSubscription=new Fw(this),this.beforeStateQueue=new zk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qd(this,{idToken:e}),s=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(es(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&h?.user&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(or(this));const n=e?xt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qk(this),n=new Gk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Uk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,s,a);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ek(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ro(t){return xt(t)}class Fw{constructor(e){this.auth=e,this.observer=null,this.addObserver=aO(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kk(t){Rm=t}function X1(t){return Rm.loadJS(t)}function Wk(){return Rm.recaptchaEnterpriseScript}function Yk(){return Rm.gapiScript}function Qk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Xk{constructor(){this.enterprise=new Zk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Zk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Jk="recaptcha-enterprise",Z1="NO_RECAPTCHA";class e4{constructor(e){this.type=Jk,this.auth=Ro(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{Dk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new Nk(d);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(d=>{h(d)})})}function a(l,u,h){const d=window.grecaptcha;kw(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(Z1)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xk().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!n&&kw(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Wk();d.length!==0&&(d+=h),X1(d).then(()=>{a(h,l,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function zw(t,e,n,s=!1,a=!1){const l=new e4(t);let u;if(a)u=Z1;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function tv(t,e,n,s,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await zw(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await zw(t,e,n,n==="getOobCode");return s(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t,e){const n=wa(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(fa(l,e??{}))return a;Bs(a,"already-initialized")}return n.initialize({options:e})}function n4(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function s4(t,e,n){const s=Ro(t);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=J1(e),{host:u,port:h}=i4(e),d=h===null?"":`:${h}`,p={url:`${l}//${u}${d}/`},g=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(fa(p,s.config.emulator)&&fa(g,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=g,s.settings.appVerificationDisabledForTesting=!0,So(u)?(i0(`${l}//${u}${d}`),r0("Auth",!0)):r4()}function J1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i4(t){const e=J1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:qw(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:qw(u)}}}function qw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function r4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function a4(t,e){return _r(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e){return fh(t,"POST","/v1/accounts:signInWithPassword",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",xa(t,e))}async function u4(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends h0{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new $c(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new $c(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tv(e,n,"signInWithPassword",o4);case"emailLink":return l4(e,{email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tv(e,s,"signUpPassword",a4);case"emailLink":return u4(e,{idToken:n,email:this._email,oobCode:this._password});default:Bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t,e){return fh(t,"POST","/v1/accounts:signInWithIdp",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="http://localhost";class _o extends h0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=n;if(!s||!a)return null;const u=new _o(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Vl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Vl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vl(e,n)}buildRequest(){const e={requestUri:c4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ch(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f4(t){const e=_c(bc(t)).link,n=e?_c(bc(e)).deep_link_id:null,s=_c(bc(t)).deep_link_id;return(s?_c(bc(s)).link:null)||s||n||e||t}class f0{constructor(e){const n=_c(bc(e)),s=n.apiKey??null,a=n.oobCode??null,l=h4(n.mode??null);Me(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=f4(e);try{return new f0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,n){return $c._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=f0.parseLink(n);return Me(s,"argument-error"),$c._fromEmailAndCode(e,s.code,s.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends eR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends dh{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _o._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return na.credential(n,s)}catch{return null}}}na.GOOGLE_SIGN_IN_METHOD="google.com";na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends dh{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com";sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends dh{constructor(){super("twitter.com")}static credential(e,n){return _o._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ia.credential(n,s)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e){return fh(t,"POST","/v1/accounts:signUp",xa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const l=await js._fromIdTokenResponse(e,s,a),u=Hw(s);return new bo({user:l,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=Hw(s);return new bo({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function Hw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Hs{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Gd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new Gd(e,n,s,a)}}function tR(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gd._fromErrorAndOperation(t,l,e,s):l})}async function m4(t,e,n=!1){const s=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bo._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e,n=!1){const{auth:s}=t;if(es(s.app))return Promise.reject(or(s));const a="reauthenticate";try{const l=await Ll(t,tR(s,a,e,t),n);Me(l.idToken,s,"internal-error");const u=u0(l.idToken);Me(u,s,"internal-error");const{sub:h}=u;return Me(t.uid===h,s,"user-mismatch"),bo._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Bs(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e,n=!1){if(es(t.app))return Promise.reject(or(t));const s="signIn",a=await tR(t,s,e),l=await bo._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(l.user),l}async function g4(t,e){return nR(Ro(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t){const e=Ro(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function y4(t,e,n){if(es(t.app))return Promise.reject(or(t));const s=Ro(t),u=await tv(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&sR(t),d}),h=await bo._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function v4(t,e,n){return es(t.app)?Promise.reject(or(t)):g4(xt(t),Zl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&sR(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){return _r(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=xt(t),l={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Ll(s,_4(s.auth,l));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const h=s.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=s.displayName,h.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function E4(t,e,n,s){return xt(t).onIdTokenChanged(e,n,s)}function T4(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function w4(t,e,n,s){return xt(t).onAuthStateChanged(e,n,s)}function x4(t){return xt(t).signOut()}const $d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($d,"1"),this.storage.removeItem($d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=1e3,A4=10;class rR extends iR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);Fk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,A4):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},S4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rR.type="LOCAL";const R4=rR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR extends iR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aR.type="SESSION";const oR=aR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new Im(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:l}=n.data,u=this.handlersMap[a];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async p=>p(n.origin,l)),d=await I4(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,d)=>{const p=d0("",20);a.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(b){const E=b;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(E.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function N4(t){gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function D4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P4(){return navigator?.serviceWorker?.controller||null}function M4(){return lR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebaseLocalStorageDb",V4=1,Kd="firebaseLocalStorage",cR="fbase_key";class mh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cm(t,e){return t.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function O4(){const t=indexedDB.deleteDatabase(uR);return new mh(t).toPromise()}function nv(){const t=indexedDB.open(uR,V4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Kd,{keyPath:cR})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Kd)?e(s):(s.close(),await O4(),e(await nv()))})})}async function Gw(t,e,n){const s=Cm(t,!0).put({[cR]:e,value:n});return new mh(s).toPromise()}async function k4(t,e){const n=Cm(t,!1).get(e),s=await new mh(n).toPromise();return s===void 0?null:s.value}function $w(t,e){const n=Cm(t,!0).delete(e);return new mh(n).toPromise()}const j4=800,L4=3;class hR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>L4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(M4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await D4(),!this.activeServiceWorker)return;this.sender=new C4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await Gw(e,$d,"1"),await $w(e,$d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gw(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>k4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$w(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Cm(a,!1).getAll();return new mh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hR.type="LOCAL";const U4=hR;new hh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){return e?rr(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends h0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F4(t){return nR(t.auth,new m0(t),t.bypassAuthState)}function z4(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),p4(n,new m0(t),t.bypassAuthState)}async function q4(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),m4(n,new m0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F4;case"linkViaPopup":case"linkViaRedirect":return q4;case"reauthViaPopup":case"reauthViaRedirect":return z4;default:Bs(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=new hh(2e3,1e4);class Sl extends fR{constructor(e,n,s,a,l){super(e,n,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Sl.currentPopupAction&&Sl.currentPopupAction.cancel(),Sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=d0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H4.get())};e()}}Sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="pendingRedirect",wd=new Map;class $4 extends fR{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const s=await K4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K4(t,e){const n=Q4(e),s=Y4(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function W4(t,e){wd.set(t._key(),e)}function Y4(t){return rr(t._redirectPersistence)}function Q4(t){return Td(G4,t.config.apiKey,t.name)}async function X4(t,e,n=!1){if(es(t.app))return Promise.reject(or(t));const s=Ro(t),a=B4(s,e),u=await new $4(s,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=600*1e3;class J4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ej(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!dR(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(pi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kw(e))}saveEventToCache(e){this.cachedEventUids.add(Kw(e)),this.lastProcessedEventTime=Date.now()}}function Kw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ej(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e={}){return _r(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sj=/^https?/;async function ij(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tj(t);for(const n of e)try{if(rj(n))return}catch{}Bs(t,"unauthorized-domain")}function rj(t){const e=Jy(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!sj.test(n))return!1;if(nj.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new hh(3e4,6e4);function Ww(){const t=gi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oj(t){return new Promise((e,n)=>{function s(){Ww(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ww(),n(pi(t,"network-request-failed"))},timeout:aj.get()})}if(gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gi().gapi?.load)s();else{const a=Qk("iframefcb");return gi()[a]=()=>{gapi.load?s():n(pi(t,"network-request-failed"))},X1(`${Yk()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw xd=null,e})}let xd=null;function lj(t){return xd=xd||oj(t),xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new hh(5e3,15e3),cj="__/auth/iframe",hj="emulator/auth/iframe",fj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mj(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,hj):`https://${t.config.authDomain}/${cj}`,s={apiKey:e.apiKey,appName:t.name,v:Xl},a=dj.get(t.config.apiHost);a&&(s.eid=a);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${ch(s).slice(1)}`}async function pj(t){const e=await lj(t),n=gi().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:mj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fj,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=pi(t,"network-request-failed"),h=gi().setTimeout(()=>{l(u)},uj.get());function d(){gi().clearTimeout(h),a(s)}s.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yj=500,vj=600,_j="_blank",bj="http://localhost";class Yw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ej(t,e,n,s=yj,a=vj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const d={...gj,width:s.toString(),height:a.toString(),top:l,left:u},p=Sn().toLowerCase();n&&(h=H1(p)?_j:n),z1(p)&&(e=e||bj,d.scrollbars="yes");const g=Object.entries(d).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(Bk(p)&&h!=="_self")return Tj(e||"",h),new Yw(null);const b=window.open(e||"",h,g);Me(b,t,"popup-blocked");try{b.focus()}catch{}return new Yw(b)}function Tj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="__/auth/handler",xj="emulator/auth/handler",Sj=encodeURIComponent("fac");async function Qw(t,e,n,s,a,l){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Xl,eventId:a};if(e instanceof eR){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",rO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))u[g]=b}if(e instanceof dh){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(u.scopes=g.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await t._getAppCheckToken(),p=d?`#${Sj}=${encodeURIComponent(d)}`:"";return`${Aj(t)}?${ch(h).slice(1)}${p}`}function Aj({config:t}){return t.emulator?l0(t,xj):`https://${t.authDomain}/${wj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="webStorageSupport";class Rj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oR,this._completeRedirectFn=X4,this._overrideRedirectResult=W4}async _openPopup(e,n,s,a){fr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Qw(e,n,s,Jy(),a);return Ej(e,l,d0())}async _openRedirect(e,n,s,a){await this._originValidation(e);const l=await Qw(e,n,s,Jy(),a);return N4(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(fr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await pj(e),s=new J4(e);return n.register("authEvent",a=>(Me(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dy,{type:dy},a=>{const l=a?.[0]?.[dy];l!==void 0&&n(!!l),Bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ij(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y1()||q1()||c0()}}const Ij=Rj;var Xw="@firebase/auth",Zw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(t){Us(new Ts("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(t)},p=new $k(s,a,l,d);return n4(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Us(new Ts("auth-internal",e=>{const n=Ro(e.getProvider("auth").getImmediate());return(s=>new Cj(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(Xw,Zw,Nj(t)),zn(Xw,Zw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=300,Mj=x1("authIdTokenMaxAge")||Pj;let Jw=null;const Vj=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Mj)return;const a=n?.token;Jw!==a&&(Jw=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Oj(t=Am()){const e=wa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=t4(t,{popupRedirectResolver:Ij,persistence:[U4,R4,oR]}),s=x1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=Vj(l.toString());T4(n,u,()=>u(n.currentUser)),E4(n,h=>u(h))}}const a=E1("auth");return a&&s4(n,`http://${a}`),n}function kj(){return document.getElementsByTagName("head")?.[0]??document}Kk({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const l=pi("internal-error");l.customData=a,n(l)},s.type="text/javascript",s.charset="UTF-8",kj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");var jj="firebase",Lj="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(jj,Lj,"app");var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,mR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,A){function N(){}N.prototype=A.prototype,j.D=A.prototype,j.prototype=new N,j.prototype.constructor=j,j.C=function(L,B,C){for(var I=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)I[ve-2]=arguments[ve];return A.prototype[B].apply(L,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,A,N){N||(N=0);var L=Array(16);if(typeof A=="string")for(var B=0;16>B;++B)L[B]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(B=0;16>B;++B)L[B]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=j.g[0],N=j.g[1],B=j.g[2];var C=j.g[3],I=A+(C^N&(B^C))+L[0]+3614090360&4294967295;A=N+(I<<7&4294967295|I>>>25),I=C+(B^A&(N^B))+L[1]+3905402710&4294967295,C=A+(I<<12&4294967295|I>>>20),I=B+(N^C&(A^N))+L[2]+606105819&4294967295,B=C+(I<<17&4294967295|I>>>15),I=N+(A^B&(C^A))+L[3]+3250441966&4294967295,N=B+(I<<22&4294967295|I>>>10),I=A+(C^N&(B^C))+L[4]+4118548399&4294967295,A=N+(I<<7&4294967295|I>>>25),I=C+(B^A&(N^B))+L[5]+1200080426&4294967295,C=A+(I<<12&4294967295|I>>>20),I=B+(N^C&(A^N))+L[6]+2821735955&4294967295,B=C+(I<<17&4294967295|I>>>15),I=N+(A^B&(C^A))+L[7]+4249261313&4294967295,N=B+(I<<22&4294967295|I>>>10),I=A+(C^N&(B^C))+L[8]+1770035416&4294967295,A=N+(I<<7&4294967295|I>>>25),I=C+(B^A&(N^B))+L[9]+2336552879&4294967295,C=A+(I<<12&4294967295|I>>>20),I=B+(N^C&(A^N))+L[10]+4294925233&4294967295,B=C+(I<<17&4294967295|I>>>15),I=N+(A^B&(C^A))+L[11]+2304563134&4294967295,N=B+(I<<22&4294967295|I>>>10),I=A+(C^N&(B^C))+L[12]+1804603682&4294967295,A=N+(I<<7&4294967295|I>>>25),I=C+(B^A&(N^B))+L[13]+4254626195&4294967295,C=A+(I<<12&4294967295|I>>>20),I=B+(N^C&(A^N))+L[14]+2792965006&4294967295,B=C+(I<<17&4294967295|I>>>15),I=N+(A^B&(C^A))+L[15]+1236535329&4294967295,N=B+(I<<22&4294967295|I>>>10),I=A+(B^C&(N^B))+L[1]+4129170786&4294967295,A=N+(I<<5&4294967295|I>>>27),I=C+(N^B&(A^N))+L[6]+3225465664&4294967295,C=A+(I<<9&4294967295|I>>>23),I=B+(A^N&(C^A))+L[11]+643717713&4294967295,B=C+(I<<14&4294967295|I>>>18),I=N+(C^A&(B^C))+L[0]+3921069994&4294967295,N=B+(I<<20&4294967295|I>>>12),I=A+(B^C&(N^B))+L[5]+3593408605&4294967295,A=N+(I<<5&4294967295|I>>>27),I=C+(N^B&(A^N))+L[10]+38016083&4294967295,C=A+(I<<9&4294967295|I>>>23),I=B+(A^N&(C^A))+L[15]+3634488961&4294967295,B=C+(I<<14&4294967295|I>>>18),I=N+(C^A&(B^C))+L[4]+3889429448&4294967295,N=B+(I<<20&4294967295|I>>>12),I=A+(B^C&(N^B))+L[9]+568446438&4294967295,A=N+(I<<5&4294967295|I>>>27),I=C+(N^B&(A^N))+L[14]+3275163606&4294967295,C=A+(I<<9&4294967295|I>>>23),I=B+(A^N&(C^A))+L[3]+4107603335&4294967295,B=C+(I<<14&4294967295|I>>>18),I=N+(C^A&(B^C))+L[8]+1163531501&4294967295,N=B+(I<<20&4294967295|I>>>12),I=A+(B^C&(N^B))+L[13]+2850285829&4294967295,A=N+(I<<5&4294967295|I>>>27),I=C+(N^B&(A^N))+L[2]+4243563512&4294967295,C=A+(I<<9&4294967295|I>>>23),I=B+(A^N&(C^A))+L[7]+1735328473&4294967295,B=C+(I<<14&4294967295|I>>>18),I=N+(C^A&(B^C))+L[12]+2368359562&4294967295,N=B+(I<<20&4294967295|I>>>12),I=A+(N^B^C)+L[5]+4294588738&4294967295,A=N+(I<<4&4294967295|I>>>28),I=C+(A^N^B)+L[8]+2272392833&4294967295,C=A+(I<<11&4294967295|I>>>21),I=B+(C^A^N)+L[11]+1839030562&4294967295,B=C+(I<<16&4294967295|I>>>16),I=N+(B^C^A)+L[14]+4259657740&4294967295,N=B+(I<<23&4294967295|I>>>9),I=A+(N^B^C)+L[1]+2763975236&4294967295,A=N+(I<<4&4294967295|I>>>28),I=C+(A^N^B)+L[4]+1272893353&4294967295,C=A+(I<<11&4294967295|I>>>21),I=B+(C^A^N)+L[7]+4139469664&4294967295,B=C+(I<<16&4294967295|I>>>16),I=N+(B^C^A)+L[10]+3200236656&4294967295,N=B+(I<<23&4294967295|I>>>9),I=A+(N^B^C)+L[13]+681279174&4294967295,A=N+(I<<4&4294967295|I>>>28),I=C+(A^N^B)+L[0]+3936430074&4294967295,C=A+(I<<11&4294967295|I>>>21),I=B+(C^A^N)+L[3]+3572445317&4294967295,B=C+(I<<16&4294967295|I>>>16),I=N+(B^C^A)+L[6]+76029189&4294967295,N=B+(I<<23&4294967295|I>>>9),I=A+(N^B^C)+L[9]+3654602809&4294967295,A=N+(I<<4&4294967295|I>>>28),I=C+(A^N^B)+L[12]+3873151461&4294967295,C=A+(I<<11&4294967295|I>>>21),I=B+(C^A^N)+L[15]+530742520&4294967295,B=C+(I<<16&4294967295|I>>>16),I=N+(B^C^A)+L[2]+3299628645&4294967295,N=B+(I<<23&4294967295|I>>>9),I=A+(B^(N|~C))+L[0]+4096336452&4294967295,A=N+(I<<6&4294967295|I>>>26),I=C+(N^(A|~B))+L[7]+1126891415&4294967295,C=A+(I<<10&4294967295|I>>>22),I=B+(A^(C|~N))+L[14]+2878612391&4294967295,B=C+(I<<15&4294967295|I>>>17),I=N+(C^(B|~A))+L[5]+4237533241&4294967295,N=B+(I<<21&4294967295|I>>>11),I=A+(B^(N|~C))+L[12]+1700485571&4294967295,A=N+(I<<6&4294967295|I>>>26),I=C+(N^(A|~B))+L[3]+2399980690&4294967295,C=A+(I<<10&4294967295|I>>>22),I=B+(A^(C|~N))+L[10]+4293915773&4294967295,B=C+(I<<15&4294967295|I>>>17),I=N+(C^(B|~A))+L[1]+2240044497&4294967295,N=B+(I<<21&4294967295|I>>>11),I=A+(B^(N|~C))+L[8]+1873313359&4294967295,A=N+(I<<6&4294967295|I>>>26),I=C+(N^(A|~B))+L[15]+4264355552&4294967295,C=A+(I<<10&4294967295|I>>>22),I=B+(A^(C|~N))+L[6]+2734768916&4294967295,B=C+(I<<15&4294967295|I>>>17),I=N+(C^(B|~A))+L[13]+1309151649&4294967295,N=B+(I<<21&4294967295|I>>>11),I=A+(B^(N|~C))+L[4]+4149444226&4294967295,A=N+(I<<6&4294967295|I>>>26),I=C+(N^(A|~B))+L[11]+3174756917&4294967295,C=A+(I<<10&4294967295|I>>>22),I=B+(A^(C|~N))+L[2]+718787259&4294967295,B=C+(I<<15&4294967295|I>>>17),I=N+(C^(B|~A))+L[9]+3951481745&4294967295,j.g[0]=j.g[0]+A&4294967295,j.g[1]=j.g[1]+(B+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+B&4294967295,j.g[3]=j.g[3]+C&4294967295}s.prototype.u=function(j,A){A===void 0&&(A=j.length);for(var N=A-this.blockSize,L=this.B,B=this.h,C=0;C<A;){if(B==0)for(;C<=N;)a(this,j,C),C+=this.blockSize;if(typeof j=="string"){for(;C<A;)if(L[B++]=j.charCodeAt(C++),B==this.blockSize){a(this,L),B=0;break}}else for(;C<A;)if(L[B++]=j[C++],B==this.blockSize){a(this,L),B=0;break}}this.h=B,this.o+=A},s.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var A=1;A<j.length-8;++A)j[A]=0;var N=8*this.o;for(A=j.length-8;A<j.length;++A)j[A]=N&255,N/=256;for(this.u(j),j=Array(16),A=N=0;4>A;++A)for(var L=0;32>L;L+=8)j[N++]=this.g[A]>>>L&255;return j};function l(j,A){var N=h;return Object.prototype.hasOwnProperty.call(N,j)?N[j]:N[j]=A(j)}function u(j,A){this.h=A;for(var N=[],L=!0,B=j.length-1;0<=B;B--){var C=j[B]|0;L&&C==A||(N[B]=C,L=!1)}this.g=N}var h={};function d(j){return-128<=j&&128>j?l(j,function(A){return new u([A|0],0>A?-1:0)}):new u([j|0],0>j?-1:0)}function p(j){if(isNaN(j)||!isFinite(j))return b;if(0>j)return k(p(-j));for(var A=[],N=1,L=0;j>=N;L++)A[L]=j/N|0,N*=4294967296;return new u(A,0)}function g(j,A){if(j.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(j.charAt(0)=="-")return k(g(j.substring(1),A));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(A,8)),L=b,B=0;B<j.length;B+=8){var C=Math.min(8,j.length-B),I=parseInt(j.substring(B,B+C),A);8>C?(C=p(Math.pow(A,C)),L=L.j(C).add(p(I))):(L=L.j(N),L=L.add(p(I)))}return L}var b=d(0),E=d(1),S=d(16777216);t=u.prototype,t.m=function(){if(M(this))return-k(this).m();for(var j=0,A=1,N=0;N<this.g.length;N++){var L=this.i(N);j+=(0<=L?L:4294967296+L)*A,A*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(D(this))return"0";if(M(this))return"-"+k(this).toString(j);for(var A=p(Math.pow(j,6)),N=this,L="";;){var B=se(N,A).g;N=V(N,B.j(A));var C=((0<N.g.length?N.g[0]:N.h)>>>0).toString(j);if(N=B,D(N))return C+L;for(;6>C.length;)C="0"+C;L=C+L}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function D(j){if(j.h!=0)return!1;for(var A=0;A<j.g.length;A++)if(j.g[A]!=0)return!1;return!0}function M(j){return j.h==-1}t.l=function(j){return j=V(this,j),M(j)?-1:D(j)?0:1};function k(j){for(var A=j.g.length,N=[],L=0;L<A;L++)N[L]=~j.g[L];return new u(N,~j.h).add(E)}t.abs=function(){return M(this)?k(this):this},t.add=function(j){for(var A=Math.max(this.g.length,j.g.length),N=[],L=0,B=0;B<=A;B++){var C=L+(this.i(B)&65535)+(j.i(B)&65535),I=(C>>>16)+(this.i(B)>>>16)+(j.i(B)>>>16);L=I>>>16,C&=65535,I&=65535,N[B]=I<<16|C}return new u(N,N[N.length-1]&-2147483648?-1:0)};function V(j,A){return j.add(k(A))}t.j=function(j){if(D(this)||D(j))return b;if(M(this))return M(j)?k(this).j(k(j)):k(k(this).j(j));if(M(j))return k(this.j(k(j)));if(0>this.l(S)&&0>j.l(S))return p(this.m()*j.m());for(var A=this.g.length+j.g.length,N=[],L=0;L<2*A;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var B=0;B<j.g.length;B++){var C=this.i(L)>>>16,I=this.i(L)&65535,ve=j.i(B)>>>16,we=j.i(B)&65535;N[2*L+2*B]+=I*we,P(N,2*L+2*B),N[2*L+2*B+1]+=C*we,P(N,2*L+2*B+1),N[2*L+2*B+1]+=I*ve,P(N,2*L+2*B+1),N[2*L+2*B+2]+=C*ve,P(N,2*L+2*B+2)}for(L=0;L<A;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=A;L<2*A;L++)N[L]=0;return new u(N,0)};function P(j,A){for(;(j[A]&65535)!=j[A];)j[A+1]+=j[A]>>>16,j[A]&=65535,A++}function q(j,A){this.g=j,this.h=A}function se(j,A){if(D(A))throw Error("division by zero");if(D(j))return new q(b,b);if(M(j))return A=se(k(j),A),new q(k(A.g),k(A.h));if(M(A))return A=se(j,k(A)),new q(k(A.g),A.h);if(30<j.g.length){if(M(j)||M(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,L=A;0>=L.l(j);)N=X(N),L=X(L);var B=ce(N,1),C=ce(L,1);for(L=ce(L,2),N=ce(N,2);!D(L);){var I=C.add(L);0>=I.l(j)&&(B=B.add(N),C=I),L=ce(L,1),N=ce(N,1)}return A=V(j,B.j(A)),new q(B,A)}for(B=b;0<=j.l(A);){for(N=Math.max(1,Math.floor(j.m()/A.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),C=p(N),I=C.j(A);M(I)||0<I.l(j);)N-=L,C=p(N),I=C.j(A);D(C)&&(C=E),B=B.add(C),j=V(j,I)}return new q(B,j)}t.A=function(j){return se(this,j).h},t.and=function(j){for(var A=Math.max(this.g.length,j.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)&j.i(L);return new u(N,this.h&j.h)},t.or=function(j){for(var A=Math.max(this.g.length,j.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)|j.i(L);return new u(N,this.h|j.h)},t.xor=function(j){for(var A=Math.max(this.g.length,j.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)^j.i(L);return new u(N,this.h^j.h)};function X(j){for(var A=j.g.length+1,N=[],L=0;L<A;L++)N[L]=j.i(L)<<1|j.i(L-1)>>>31;return new u(N,j.h)}function ce(j,A){var N=A>>5;A%=32;for(var L=j.g.length-N,B=[],C=0;C<L;C++)B[C]=0<A?j.i(C+N)>>>A|j.i(C+N+1)<<32-A:j.i(C+N);return new u(B,j.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mR=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,ua=u}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pR,Ec,gR,Sd,sv,yR,vR,_R;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,T){return f==Array.prototype||f==Object.prototype||(f[_]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=n(this);function a(f,_){if(_)e:{var T=s;f=f.split(".");for(var R=0;R<f.length-1;R++){var $=f[R];if(!($ in T))break e;T=T[$]}f=f[f.length-1],R=T[f],_=_(R),_!=R&&_!=null&&e(T,f,{configurable:!0,writable:!0,value:_})}}function l(f,_){f instanceof String&&(f+="");var T=0,R=!1,$={next:function(){if(!R&&T<f.length){var ee=T++;return{value:_(ee,f[ee]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}a("Array.prototype.values",function(f){return f||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function g(f,_,T){return f.call.apply(f.bind,arguments)}function b(f,_,T){if(!f)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),f.apply(_,$)}}return function(){return f.apply(_,arguments)}}function E(f,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:b,E.apply(null,arguments)}function S(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function D(f,_){function T(){}T.prototype=_.prototype,f.aa=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(R,$,ee){for(var de=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)de[Qe-2]=arguments[Qe];return _.prototype[$].apply(R,de)}}function M(f){const _=f.length;if(0<_){const T=Array(_);for(let R=0;R<_;R++)T[R]=f[R];return T}return[]}function k(f,_){for(let T=1;T<arguments.length;T++){const R=arguments[T];if(d(R)){const $=f.length||0,ee=R.length||0;f.length=$+ee;for(let de=0;de<ee;de++)f[$+de]=R[de]}else f.push(R)}}class V{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function P(f){return/^[\s\xa0]*$/.test(f)}function q(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function se(f){return se[" "](f),f}se[" "]=function(){};var X=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ce(f,_,T){for(const R in f)_.call(T,f[R],R,f)}function j(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function A(f){const _={};for(const T in f)_[T]=f[T];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(f,_){let T,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(T in R)f[T]=R[T];for(let ee=0;ee<N.length;ee++)T=N[ee],Object.prototype.hasOwnProperty.call(R,T)&&(f[T]=R[T])}}function B(f){var _=1;f=f.split(":");const T=[];for(;0<_&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function C(f){h.setTimeout(()=>{throw f},0)}function I(){var f=Ne;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class ve{constructor(){this.h=this.g=null}add(_,T){const R=we.get();R.set(_,T),this.h?this.h.next=R:this.g=R,this.h=R}}var we=new V(()=>new Z,f=>f.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,me=!1,Ne=new ve,F=()=>{const f=h.Promise.resolve(void 0);te=()=>{f.then(ue)}};var ue=()=>{for(var f;f=I();){try{f.h.call(f.g)}catch(T){C(T)}var _=we;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}me=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ie=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};h.addEventListener("test",T,_),h.removeEventListener("test",T,_)}catch{}return f})();function Be(f,_){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(X){e:{try{se(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Oe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Be.aa.h.call(this)}}D(Be,he);var Oe={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),it=0;function Mn(f,_,T,R,$){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!R,this.ha=$,this.key=++it,this.da=this.fa=!1}function is(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ws(f){this.src=f,this.g={},this.h=0}ws.prototype.add=function(f,_,T,R,$){var ee=f.toString();f=this.g[ee],f||(f=this.g[ee]=[],this.h++);var de=Ai(f,_,R,$);return-1<de?(_=f[de],T||(_.fa=!1)):(_=new Mn(_,this.src,ee,!!R,$),_.fa=T,f.push(_)),_};function Gs(f,_){var T=_.type;if(T in f.g){var R=f.g[T],$=Array.prototype.indexOf.call(R,_,void 0),ee;(ee=0<=$)&&Array.prototype.splice.call(R,$,1),ee&&(is(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Ai(f,_,T,R){for(var $=0;$<f.length;++$){var ee=f[$];if(!ee.da&&ee.listener==_&&ee.capture==!!T&&ee.ha==R)return $}return-1}var $s="closure_lm_"+(1e6*Math.random()|0),br={};function No(f,_,T,R,$){if(Array.isArray(_)){for(var ee=0;ee<_.length;ee++)No(f,_[ee],T,R,$);return null}return T=fe(T),f&&f[At]?f.K(_,T,p(R)?!!R.capture:!1,$):Vn(f,_,T,!1,R,$)}function Vn(f,_,T,R,$,ee){if(!_)throw Error("Invalid event type");var de=p($)?!!$.capture:!!$,Qe=_e(f);if(Qe||(f[$s]=Qe=new ws(f)),T=Qe.add(_,T,R,de,ee),T.proxy)return T;if(R=Ih(),T.proxy=R,R.src=f,R.listener=T,f.addEventListener)Ie||($=de),$===void 0&&($=!1),f.addEventListener(_.toString(),R,$);else if(f.attachEvent)f.attachEvent(Y(_.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ih(){function f(T){return _.call(f.src,f.listener,T)}const _=ne;return f}function Er(f,_,T,R,$){if(Array.isArray(_))for(var ee=0;ee<_.length;ee++)Er(f,_[ee],T,R,$);else R=p(R)?!!R.capture:!!R,T=fe(T),f&&f[At]?(f=f.i,_=String(_).toString(),_ in f.g&&(ee=f.g[_],T=Ai(ee,T,R,$),-1<T&&(is(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete f.g[_],f.h--)))):f&&(f=_e(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Ai(_,T,R,$)),(T=-1<f?_[f]:null)&&z(T))}function z(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[At])Gs(_.i,f);else{var T=f.type,R=f.proxy;_.removeEventListener?_.removeEventListener(T,R,f.capture):_.detachEvent?_.detachEvent(Y(T),R):_.addListener&&_.removeListener&&_.removeListener(R),(T=_e(_))?(Gs(T,f),T.h==0&&(T.src=null,_[$s]=null)):is(f)}}}function Y(f){return f in br?br[f]:br[f]="on"+f}function ne(f,_){if(f.da)f=!0;else{_=new Be(_,this);var T=f.listener,R=f.ha||f.src;f.fa&&z(f),f=T.call(R,_)}return f}function _e(f){return f=f[$s],f instanceof ws?f:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(f){return typeof f=="function"?f:(f[pe]||(f[pe]=function(_){return f.handleEvent(_)}),f[pe])}function ye(){ge.call(this),this.i=new ws(this),this.M=this,this.F=null}D(ye,ge),ye.prototype[At]=!0,ye.prototype.removeEventListener=function(f,_,T,R){Er(this,f,_,T,R)};function Ae(f,_){var T,R=f.F;if(R)for(T=[];R;R=R.F)T.push(R);if(f=f.M,R=_.type||_,typeof _=="string")_=new he(_,f);else if(_ instanceof he)_.target=_.target||f;else{var $=_;_=new he(R,f),L(_,$)}if($=!0,T)for(var ee=T.length-1;0<=ee;ee--){var de=_.g=T[ee];$=ze(de,R,!0,_)&&$}if(de=_.g=f,$=ze(de,R,!0,_)&&$,$=ze(de,R,!1,_)&&$,T)for(ee=0;ee<T.length;ee++)de=_.g=T[ee],$=ze(de,R,!1,_)&&$}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var T=f.g[_],R=0;R<T.length;R++)is(T[R]);delete f.g[_],f.h--}}this.F=null},ye.prototype.K=function(f,_,T,R){return this.i.add(String(f),_,!1,T,R)},ye.prototype.L=function(f,_,T,R){return this.i.add(String(f),_,!0,T,R)};function ze(f,_,T,R){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var $=!0,ee=0;ee<_.length;++ee){var de=_[ee];if(de&&!de.da&&de.capture==T){var Qe=de.listener,Yt=de.ha||de.src;de.fa&&Gs(f.i,de),$=Qe.call(Yt,R)!==!1&&$}}return $&&!R.defaultPrevented}function rt(f,_,T){if(typeof f=="function")T&&(f=E(f,T));else if(f&&typeof f.handleEvent=="function")f=E(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function Ri(f){f.g=rt(()=>{f.g=null,f.i&&(f.i=!1,Ri(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class rs extends ge{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(f){ge.call(this),this.h=f,this.g={}}D(Ii,ge);var xs=[];function Ss(f){ce(f.g,function(_,T){this.g.hasOwnProperty(T)&&z(_)},f),f.g={}}Ii.prototype.N=function(){Ii.aa.N.call(this),Ss(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=h.JSON.stringify,Ci=h.JSON.parse,Ni=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Tr(){}Tr.prototype.h=null;function ou(f){return f.h||(f.h=f.i())}function lu(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){he.call(this,"d")}D(Pi,he);function uu(){he.call(this,"c")}D(uu,he);var Ks={},cu=null;function wr(){return cu=cu||new ye}Ks.La="serverreachability";function Do(f){he.call(this,Ks.La,f)}D(Do,he);function xr(f){const _=wr();Ae(_,new Do(_))}Ks.STAT_EVENT="statevent";function Ch(f,_){he.call(this,Ks.STAT_EVENT,f),this.stat=_}D(Ch,he);function yt(f){const _=wr();Ae(_,new Ch(_,f))}Ks.Ma="timingevent";function Wt(f,_){he.call(this,Ks.Ma,f),this.size=_}D(Wt,he);function jt(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function hu(f,_,T,R,$,ee){f.info(function(){if(f.g)if(ee)for(var de="",Qe=ee.split("&"),Yt=0;Yt<Qe.length;Yt++){var Xe=Qe[Yt].split("=");if(1<Xe.length){var tn=Xe[0];Xe=Xe[1];var Qt=tn.split("_");de=2<=Qt.length&&Qt[1]=="type"?de+(tn+"="+Xe+"&"):de+(tn+"=redacted&")}}else de=null;else de=ee;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+_+`
`+T+`
`+de})}function tp(f,_,T,R,$,ee,de){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+_+`
`+T+`
`+ee+" "+de})}function Sr(f,_,T,R){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ia(f,T)+(R?" "+R:"")})}function Nh(f,_){f.info(function(){return"TIMEOUT: "+_})}as.prototype.info=function(){};function Ia(f,_){if(!f.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var R=T[f];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var ee=$[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var de=1;de<$.length;de++)$[de]=""}}}}return Hn(T)}catch{return _}}var Ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ws;function Ys(){}D(Ys,Tr),Ys.prototype.g=function(){return new XMLHttpRequest},Ys.prototype.i=function(){return{}},Ws=new Ys;function An(f,_,T,R){this.j=f,this.i=_,this.l=T,this.R=R||1,this.U=new Ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var fu={},Po={};function As(f,_,T){f.L=1,f.v=Ma(Gn(_)),f.m=T,f.P=!0,Vi(f,null)}function Vi(f,_){f.F=Date.now(),Ca(f),f.A=Gn(f.v);var T=f.A,R=f.R;Array.isArray(R)||(R=[String(R)]),vu(T.i,"t",R),f.C=0,T=f.j.J,f.h=new Nt,f.g=$h(f.j,T?_:null,!f.m),0<f.O&&(f.M=new rs(E(f.Y,f,f.g),f.O)),_=f.U,T=f.g,R=f.ca;var $="readystatechange";Array.isArray($)||($&&(xs[0]=$.toString()),$=xs);for(var ee=0;ee<$.length;ee++){var de=No(T,$[ee],R||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),xr(),hu(f.i,f.u,f.A,f.l,f.R,f.m)}An.prototype.ca=function(f){f=f.target;const _=this.M;_&&cs(f)==3?_.j():this.Y(f)},An.prototype.Y=function(f){try{if(f==this.g)e:{const Qt=cs(this.g);var _=this.g.Ba();const zi=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Lh(this.g)))){this.J||Qt!=4||_==7||(_==8||0>=zi?xr(3):xr(2)),Rr(this);var T=this.g.Z();this.X=T;t:if(Dh(this)){var R=Lh(this.g);f="";var $=R.length,ee=cs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Qs(this);var de="";break t}this.h.i=new h.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,f+=this.h.i.decode(R[_],{stream:!(ee&&_==$-1)});R.length=0,this.h.g+=f,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=T==200,tp(this.i,this.u,this.A,this.l,this.R,Qt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Yt=this.g;if((Qe=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Qe)){var Xe=Qe;break t}}Xe=null}if(T=Xe)Sr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Na(this,T);else{this.o=!1,this.s=3,yt(12),ln(this),Qs(this);break e}}if(this.P){T=!0;let un;for(;!this.J&&this.C<de.length;)if(un=Ph(this,de),un==Po){Qt==4&&(this.s=4,yt(14),T=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(un==fu){this.s=4,yt(15),Sr(this.i,this.l,de,"[Invalid Chunk]"),T=!1;break}else Sr(this.i,this.l,un,null),Na(this,un);if(Dh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||de.length!=0||this.h.h||(this.s=1,yt(16),T=!1),this.o=this.o&&T,!T)Sr(this.i,this.l,de,"[Invalid Chunked Response]"),ln(this),Qs(this);else if(0<de.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Fa(tn),tn.M=!0,yt(11))}}else Sr(this.i,this.l,de,null),Na(this,de);Qt==4&&ln(this),this.o&&!this.J&&(Qt==4?qh(this.j,this):(this.o=!1,Ca(this)))}else ap(this.g),T==400&&0<de.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ln(this),Qs(this)}}}catch{}finally{}};function Dh(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ph(f,_){var T=f.C,R=_.indexOf(`
`,T);return R==-1?Po:(T=Number(_.substring(T,R)),isNaN(T)?fu:(R+=1,R+T>_.length?Po:(_=_.slice(R,R+T),f.C=R+T,_)))}An.prototype.cancel=function(){this.J=!0,ln(this)};function Ca(f){f.S=Date.now()+f.I,Mh(f,f.I)}function Mh(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=jt(E(f.ba,f),_)}function Rr(f){f.B&&(h.clearTimeout(f.B),f.B=null)}An.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Nh(this.i,this.A),this.L!=2&&(xr(),yt(17)),ln(this),this.s=2,Qs(this)):Mh(this,this.S-f)};function Qs(f){f.j.G==0||f.J||qh(f.j,f)}function ln(f){Rr(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Ss(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Na(f,_){try{var T=f.j;if(T.G!=0&&(T.g==f||du(T.h,f))){if(!f.K&&du(T.h,f)&&T.G==3){try{var R=T.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)Ho(T),zo(T);else break e;wu(T),yt(18)}}else T.za=$[1],0<T.za-T.T&&37500>$[2]&&T.F&&T.v==0&&!T.C&&(T.C=jt(E(T.Za,T),6e3));if(1>=Vo(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Fi(T,11)}else if((f.K||T.g==f)&&Ho(T),!P(_))for($=T.Da.g.parse(_),_=0;_<$.length;_++){let Xe=$[_];if(T.T=Xe[0],Xe=Xe[1],T.G==2)if(Xe[0]=="c"){T.K=Xe[1],T.ia=Xe[2];const tn=Xe[3];tn!=null&&(T.la=tn,T.j.info("VER="+T.la));const Qt=Xe[4];Qt!=null&&(T.Aa=Qt,T.j.info("SVER="+T.Aa));const zi=Xe[5];zi!=null&&typeof zi=="number"&&0<zi&&(R=1.5*zi,T.L=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const un=f.g;if(un){const si=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var ee=R.h;ee.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Oo(ee,ee.h),ee.h=null))}if(R.D){const Su=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Su&&(R.ya=Su,ut(R.I,R.D,Su))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),R=T;var de=f;if(R.qa=Gh(R,R.J?R.ia:null,R.W),de.K){Rn(R.h,de);var Qe=de,Yt=R.L;Yt&&(Qe.I=Yt),Qe.B&&(Rr(Qe),Ca(Qe)),R.g=de}else Fh(R);0<T.i.length&&qo(T)}else Xe[0]!="stop"&&Xe[0]!="close"||Fi(T,7);else T.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Fi(T,7):Eu(T):Xe[0]!="noop"&&T.l&&T.l.ta(Xe),T.v=0)}}xr(4)}catch{}}var Vh=class{constructor(f,_){this.g=f,this.map=_}};function Oi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Vo(f){return f.h?1:f.g?f.g.size:0}function du(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Oo(f,_){f.g?f.g.add(_):f.h=_}function Rn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Oi.prototype.cancel=function(){if(this.i=mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function mu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.D);return _}return M(f.i)}function np(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var _=[],T=f.length,R=0;R<T;R++)_.push(f[R]);return _}_=[],T=0;for(R in f)_[T++]=f[R];return _}function ko(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var _=[];f=f.length;for(var T=0;T<f;T++)_.push(T);return _}_=[],T=0;for(const R in f)_[T++]=R;return _}}}function pu(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var T=ko(f),R=np(f),$=R.length,ee=0;ee<$;ee++)_.call(void 0,R[ee],T&&T[ee],f)}var Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sp(f,_){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var R=f[T].indexOf("="),$=null;if(0<=R){var ee=f[T].substring(0,R);$=f[T].substring(R+1)}else ee=f[T];_(ee,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Lt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Lt){this.h=f.h,Pa(this,f.j),this.o=f.o,this.g=f.g,Ir(this,f.s),this.l=f.l;var _=f.i,T=new ji;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),ki(this,T),this.m=f.m}else f&&(_=String(f).match(Da))?(this.h=!1,Pa(this,_[1]||"",!0),this.o=os(_[2]||""),this.g=os(_[3]||"",!0),Ir(this,_[4]),this.l=os(_[5]||"",!0),ki(this,_[6]||"",!0),this.m=os(_[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Lt.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Va(_,gu,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Va(_,gu,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Va(T,T.charAt(0)=="/"?ip:yu,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Va(T,jo)),f.join("")};function Gn(f){return new Lt(f)}function Pa(f,_,T){f.j=T?os(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Ir(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function ki(f,_,T){_ instanceof ji?(f.i=_,kh(f.i,f.h)):(T||(_=Va(_,rp)),f.i=new ji(_,f.h))}function ut(f,_,T){f.i.set(_,T)}function Ma(f){return ut(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function os(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Va(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,Oh),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Oh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var gu=/[#\/\?@]/g,yu=/[#\?:]/g,ip=/[#\?]/g,rp=/[#\?@]/g,jo=/#/g;function ji(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function ls(f){f.g||(f.g=new Map,f.h=0,f.i&&sp(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}t=ji.prototype,t.add=function(f,_){ls(this),this.i=null,f=Xs(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function Li(f,_){ls(f),_=Xs(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Ui(f,_){return ls(f),_=Xs(f,_),f.g.has(_)}t.forEach=function(f,_){ls(this),this.g.forEach(function(T,R){T.forEach(function($){f.call(_,$,R,this)},this)},this)},t.na=function(){ls(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let R=0;R<_.length;R++){const $=f[R];for(let ee=0;ee<$.length;ee++)T.push(_[R])}return T},t.V=function(f){ls(this);let _=[];if(typeof f=="string")Ui(this,f)&&(_=_.concat(this.g.get(Xs(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)_=_.concat(f[T])}return _},t.set=function(f,_){return ls(this),this.i=null,f=Xs(this,f),Ui(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function vu(f,_,T){Li(f,_),0<T.length&&(f.i=null,f.g.set(Xs(f,_),M(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var R=_[T];const ee=encodeURIComponent(String(R)),de=this.V(R);for(R=0;R<de.length;R++){var $=ee;de[R]!==""&&($+="="+encodeURIComponent(String(de[R]))),f.push($)}}return this.i=f.join("&")};function Xs(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function kh(f,_){_&&!f.j&&(ls(f),f.i=null,f.g.forEach(function(T,R){var $=R.toLowerCase();R!=$&&(Li(this,R),vu(this,$,T))},f)),f.j=_}function Oa(f,_){const T=new as;if(h.Image){const R=new Image;R.onload=S(us,T,"TestLoadImage: loaded",!0,_,R),R.onerror=S(us,T,"TestLoadImage: error",!1,_,R),R.onabort=S(us,T,"TestLoadImage: abort",!1,_,R),R.ontimeout=S(us,T,"TestLoadImage: timeout",!1,_,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else _(!1)}function Rs(f,_){const T=new as,R=new AbortController,$=setTimeout(()=>{R.abort(),us(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:R.signal}).then(ee=>{clearTimeout($),ee.ok?us(T,"TestPingServer: ok",!0,_):us(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),us(T,"TestPingServer: error",!1,_)})}function us(f,_,T,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(T)}catch{}}function ka(){this.g=new Ni}function Zs(f,_,T){const R=T||"";try{pu(f,function($,ee){let de=$;p($)&&(de=Hn($)),_.push(R+ee+"="+encodeURIComponent(de))})}catch($){throw _.push(R+"type="+encodeURIComponent("_badmap")),$}}function Cr(f){this.l=f.Ub||null,this.j=f.eb||!1}D(Cr,Tr),Cr.prototype.g=function(){return new Bi(this.l,this.j)},Cr.prototype.i=(function(f){return function(){return f}})({});function Bi(f,_){ye.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Bi,ye),t=Bi.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,ei(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_u(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function _u(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Js(this):ei(this),this.readyState==3&&_u(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Js(this))},t.Qa=function(f){this.g&&(this.response=f,Js(this))},t.ga=function(){this.g&&Js(this)};function Js(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ei(f)}t.setRequestHeader=function(f,_){this.u.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function ei(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function bu(f){let _="";return ce(f,function(T,R){_+=R,_+=":",_+=T,_+=`\r
`}),_}function en(f,_,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=bu(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):ut(f,_,T))}function nt(f){ye.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(nt,ye);var Lo=/^https?$/i,ja=["POST","PUT"];t=nt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,_,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ws.g(),this.v=this.o?ou(this.o):ou(Ws),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(ee){jh(this,ee);return}if(f=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)T.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())T.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),$=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ja,_,void 0))||R||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of T)this.g.setRequestHeader(ee,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{La(this),this.u=!0,this.g.send(f),this.u=!1}catch(ee){jh(this,ee)}};function jh(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Uo(f),ti(f)}function Uo(f){f.A||(f.A=!0,Ae(f,"complete"),Ae(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ae(this,"complete"),Ae(this,"abort"),ti(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},t.bb=function(){Bo(this)};function Bo(f){if(f.h&&typeof u<"u"&&(!f.v[1]||cs(f)!=4||f.Z()!=2)){if(f.u&&cs(f)==4)rt(f.Ea,0,f);else if(Ae(f,"readystatechange"),cs(f)==4){f.h=!1;try{const de=f.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var R;if(R=de===0){var $=String(f.D).match(Da)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),R=!Lo.test($?$.toLowerCase():"")}T=R}if(T)Ae(f,"complete"),Ae(f,"success");else{f.m=6;try{var ee=2<cs(f)?f.g.statusText:""}catch{ee=""}f.l=ee+" ["+f.Z()+"]",Uo(f)}}finally{ti(f)}}}}function ti(f,_){if(f.g){La(f);const T=f.g,R=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ae(f,"ready");try{T.onreadystatechange=R}catch{}}}function La(f){f.I&&(h.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function cs(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<cs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Ci(_)}};function Lh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ap(f){const _={};f=(f.g&&2<=cs(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(P(f[R]))continue;var T=B(f[R]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=_[$]||[];_[$]=ee,ee.push(T)}j(_,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function Fo(f){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ua("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ua("baseRetryDelayMs",5e3,f),this.cb=Ua("retryDelaySeedMs",1e4,f),this.Wa=Ua("forwardChannelMaxRetries",2,f),this.wa=Ua("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Oi(f&&f.concurrentRequestLimit),this.Da=new ka,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fo.prototype,t.la=8,t.G=1,t.connect=function(f,_,T,R){yt(0),this.W=f,this.H=_||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.I=Gh(this,null,this.W),qo(this)};function Eu(f){if(Uh(f),f.G==3){var _=f.U++,T=Gn(f.I);if(ut(T,"SID",f.K),ut(T,"RID",_),ut(T,"TYPE","terminate"),Ba(f,T),_=new An(f,f.j,_),_.L=2,_.v=Ma(Gn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=_.v,T=!0),T||(_.g=$h(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ca(_)}Hh(f)}function zo(f){f.g&&(Fa(f),f.g.cancel(),f.g=null)}function Uh(f){zo(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ho(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function qo(f){if(!Mo(f.h)&&!f.s){f.s=!0;var _=f.Ga;te||F(),me||(te(),me=!0),Ne.add(_,f),f.B=0}}function op(f,_){return Vo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=jt(E(f.Ga,f,_),xu(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const $=new An(this,this.j,f);let ee=this.o;if(this.S&&(ee?(ee=A(ee),L(ee,this.S)):ee=this.S),this.m!==null||this.O||($.H=ee,ee=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Bh(this,$,_),T=Gn(this.I),ut(T,"RID",f),ut(T,"CVER",22),this.D&&ut(T,"X-HTTP-Session-Id",this.D),Ba(this,T),ee&&(this.O?_="headers="+encodeURIComponent(String(bu(ee)))+"&"+_:this.m&&en(T,this.m,ee)),Oo(this.h,$),this.Ua&&ut(T,"TYPE","init"),this.P?(ut(T,"$req",_),ut(T,"SID","null"),$.T=!0,As($,T,null)):As($,T,_),this.G=2}}else this.G==3&&(f?Tu(this,f):this.i.length==0||Mo(this.h)||Tu(this))};function Tu(f,_){var T;_?T=_.l:T=f.U++;const R=Gn(f.I);ut(R,"SID",f.K),ut(R,"RID",T),ut(R,"AID",f.T),Ba(f,R),f.m&&f.o&&en(R,f.m,f.o),T=new An(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Bh(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Oo(f.h,T),As(T,R,_)}function Ba(f,_){f.H&&ce(f.H,function(T,R){ut(_,R,T)}),f.l&&pu({},function(T,R){ut(_,R,T)})}function Bh(f,_,T){T=Math.min(f.i.length,T);var R=f.l?E(f.l.Na,f.l,f):null;e:{var $=f.i;let ee=-1;for(;;){const de=["count="+T];ee==-1?0<T?(ee=$[0].g,de.push("ofs="+ee)):ee=0:de.push("ofs="+ee);let Qe=!0;for(let Yt=0;Yt<T;Yt++){let Xe=$[Yt].g;const tn=$[Yt].map;if(Xe-=ee,0>Xe)ee=Math.max(0,$[Yt].g-100),Qe=!1;else try{Zs(tn,de,"req"+Xe+"_")}catch{R&&R(tn)}}if(Qe){R=de.join("&");break e}}}return f=f.i.splice(0,T),_.D=f,R}function Fh(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;te||F(),me||(te(),me=!0),Ne.add(_,f),f.v=0}}function wu(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=jt(E(f.Fa,f),xu(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,zh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=jt(E(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),zo(this),zh(this))};function Fa(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function zh(f){f.g=new An(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Gn(f.qa);ut(_,"RID","rpc"),ut(_,"SID",f.K),ut(_,"AID",f.T),ut(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&ut(_,"TO",f.ja),ut(_,"TYPE","xmlhttp"),Ba(f,_),f.m&&f.o&&en(_,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Ma(Gn(_)),T.m=null,T.P=!0,Vi(T,f)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),wu(this),yt(19))};function Ho(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function qh(f,_){var T=null;if(f.g==_){Ho(f),Fa(f),f.g=null;var R=2}else if(du(f.h,_))T=_.D,Rn(f.h,_),R=1;else return;if(f.G!=0){if(_.o)if(R==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var $=f.B;R=wr(),Ae(R,new Wt(R,T)),qo(f)}else Fh(f);else if($=_.s,$==3||$==0&&0<_.X||!(R==1&&op(f,_)||R==2&&wu(f)))switch(T&&0<T.length&&(_=f.h,_.i=_.i.concat(T)),$){case 1:Fi(f,5);break;case 4:Fi(f,10);break;case 3:Fi(f,6);break;default:Fi(f,2)}}}function xu(f,_){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*_}function Fi(f,_){if(f.j.info("Error code "+_),_==2){var T=E(f.fb,f),R=f.Xa;const $=!R;R=new Lt(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Pa(R,"https"),Ma(R),$?Oa(R.toString(),T):Rs(R.toString(),T)}else yt(2);f.G=0,f.l&&f.l.sa(_),Hh(f),Uh(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Hh(f){if(f.G=0,f.ka=[],f.l){const _=mu(f.h);(_.length!=0||f.i.length!=0)&&(k(f.ka,_),k(f.ka,f.i),f.h.i.length=0,M(f.i),f.i.length=0),f.l.ra()}}function Gh(f,_,T){var R=T instanceof Lt?Gn(T):new Lt(T);if(R.g!="")_&&(R.g=_+"."+R.g),Ir(R,R.s);else{var $=h.location;R=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var ee=new Lt(null);R&&Pa(ee,R),_&&(ee.g=_),$&&Ir(ee,$),T&&(ee.l=T),R=ee}return T=f.D,_=f.ya,T&&_&&ut(R,T,_),ut(R,"VER",f.la),Ba(f,R),R}function $h(f,_,T){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new nt(new Cr({eb:T})):new nt(f.pa),_.Ha(f.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kh(){}t=Kh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Go(){}Go.prototype.g=function(f,_){return new In(f,_)};function In(f,_){ye.call(this),this.g=new Fo(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!P(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new ni(this)}D(In,ye),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Eu(this.g)},In.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Hn(f),f=T);_.i.push(new Vh(_.Ya++,f)),_.G==3&&qo(_)},In.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,In.aa.N.call(this)};function Wh(f){Pi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const T in _){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}D(Wh,Pi);function Yh(){uu.call(this),this.status=1}D(Yh,uu);function ni(f){this.g=f}D(ni,Kh),ni.prototype.ua=function(){Ae(this.g,"a")},ni.prototype.ta=function(f){Ae(this.g,new Wh(f))},ni.prototype.sa=function(f){Ae(this.g,new Yh)},ni.prototype.ra=function(){Ae(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,_R=function(){return new Go},vR=function(){return wr()},yR=Ks,sv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,Sd=Ar,Mi.COMPLETE="complete",gR=Mi,lu.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Ec=lu,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,pR=nt}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const tx="@firebase/firestore",nx="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Sm("@firebase/firestore");function El(){return Eo.logLevel}function Ee(t,...e){if(Eo.logLevel<=Ke.DEBUG){const n=e.map(p0);Eo.debug(`Firestore (${Jl}): ${t}`,...n)}}function dr(t,...e){if(Eo.logLevel<=Ke.ERROR){const n=e.map(p0);Eo.error(`Firestore (${Jl}): ${t}`,...n)}}function Ul(t,...e){if(Eo.logLevel<=Ke.WARN){const n=e.map(p0);Eo.warn(`Firestore (${Jl}): ${t}`,...n)}}function p0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,bR(t,s,n)}function bR(t,e,n){let s=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw dr(s),new Error(s)}function st(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||bR(e,a,s)}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class Bj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Fj{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let s=this.i;const a=d=>this.i!==s?(s=this.i,n(d)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},h=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new ER(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class zj{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qj{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,es(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const s=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=Gj(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<n&&(s+=e.charAt(a[l]%62))}return s}}function We(t,e){return t<e?-1:t>e?1:0}function iv(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),l=e.charAt(s);if(a!==l)return my(a)===my(l)?We(a,l):my(a)?1:-1}return We(t.length,e.length)}const $j=55296,Kj=57343;function my(t){const e=t.charCodeAt(0);return e>=$j&&e<=Kj}function Bl(t,e,n){return t.length===e.length&&t.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="__name__";class ui{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ve(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const l=ui.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return We(e.length,n.length)}static compareSegments(e,n){const s=ui.isNumericId(e),a=ui.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?ui.extractNumericId(e).compare(ui.extractNumericId(n)):iv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class pt extends ui{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const Wj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends ui{construct(e,n,s){return new gn(e,n,s)}static isValidIdentifier(e){return Wj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ix}static keyField(){return new gn([ix])}static fromServerFormat(e){const n=[];let s="",a=0;const l=()=>{if(s.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(pt.fromString(e))}static fromName(e){return new Ce(pt.fromString(e).popFirst(5))}static empty(){return new Ce(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,n){if(!n)throw new be(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yj(t,e,n,s){if(e===!0&&s===!0)throw new be(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rx(t){if(!Ce.isDocumentKey(t))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ax(t){if(Ce.isDocumentKey(t))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nm(t);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ph(t,e){if(!wR(t))throw new be(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const u=t[s];if(a&&typeof u!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){n=`Expected '${s}' field to equal '${l.value}'`;break}}if(n)throw new be(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=-62135596800,lx=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*lx);return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ox)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lx}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ph(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Kt("string",gt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new gt(0,0))}static max(){return new Le(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function Qj(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new da(a,Ce.empty(),e)}function Xj(t){return new da(t.readTime,t.key,Kc)}class da{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new da(Le.min(),Ce.empty(),Kc)}static max(){return new da(Le.max(),Ce.empty(),Kc)}}function Zj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==Jj)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,s)=>{n(e)}))}static reject(e){return new le(((n,s)=>{s(e)}))}static waitFor(e){return new le(((n,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&n()}),(d=>s(d)))})),u=!0,l===a&&n()}))}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next((a=>a?le.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,l)=>{s.push(n.call(this,a,l))})),this.waitFor(s)}static mapArray(e,n){return new le(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let d=0;d<l;d++){const p=d;n(e[p]).next((g=>{u[p]=g,++h,h===l&&s(u)}),(g=>a(g)))}}))}static doWhile(e,n){return new le(((s,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):s()};l()}))}}function tL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=-1;function Pm(t){return t==null}function Wd(t){return t===0&&1/t==-1/0}function nL(t){return typeof t=="number"&&Number.isInteger(t)&&!Wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="";function sL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ux(e)),e=iL(t.get(n),e);return ux(e)}function iL(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case xR:n+="";break;default:n+=l}}return n}function ux(t){return t+xR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,s,a,l){this.key=e,this.value=n,this.color=s??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,l){return new pn(e??this.key,n??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,s),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,s,a,l){return this}insert(e,n,s){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hx(this.data.getIterator())}getIteratorFrom(e){return new hx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class hx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new ts([])}unionWith(e){let n=new Jt(gn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AR("Invalid base64 string: "+l):l}})(e);return new vn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const rL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=rL.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pa(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="server_timestamp",IR="__type__",CR="__previous_value__",NR="__local_write_time__";function v0(t){return(t?.mapValue?.fields||{})[IR]?.stringValue===RR}function Mm(t){const e=t.mapValue.fields[CR];return v0(e)?Mm(e):e}function Wc(t){const e=ma(t.mapValue.fields[NR].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,s,a,l,u,h,d,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=g}}const Yd="(default)";class Yc{constructor(e,n){this.projectId=e,this.database=n||Yd}static empty(){return new Yc("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="__type__",oL="__max__",id={mapValue:{}},PR="__vector__",Qd="value";function ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v0(t)?4:uL(t)?9007199254740991:lL(t)?10:11:Ve(28295,{value:t})}function Si(t,e){if(t===e)return!0;const n=ga(t);if(n!==ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wc(t).isEqual(Wc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ma(a.timestampValue),h=ma(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return pa(a.bytesValue).isEqual(pa(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Vt(a.doubleValue),h=Vt(l.doubleValue);return u===h?Wd(u)===Wd(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Bl(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(cx(u)!==cx(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Si(u[d],h[d])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function Qc(t,e){return(t.values||[]).find((n=>Si(n,e)))!==void 0}function Fl(t,e){if(t===e)return 0;const n=ga(t),s=ga(e);if(n!==s)return We(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=Vt(l.integerValue||l.doubleValue),d=Vt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(t,e);case 3:return fx(t.timestampValue,e.timestampValue);case 4:return fx(Wc(t),Wc(e));case 5:return iv(t.stringValue,e.stringValue);case 6:return(function(l,u){const h=pa(l),d=pa(u);return h.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const g=We(h[p],d[p]);if(g!==0)return g}return We(h.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=We(Vt(l.latitude),Vt(u.latitude));return h!==0?h:We(Vt(l.longitude),Vt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dx(t.arrayValue,e.arrayValue);case 10:return(function(l,u){const h=l.fields||{},d=u.fields||{},p=h[Qd]?.arrayValue,g=d[Qd]?.arrayValue,b=We(p?.values?.length||0,g?.values?.length||0);return b!==0?b:dx(p,g)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===id.mapValue&&u===id.mapValue)return 0;if(l===id.mapValue)return 1;if(u===id.mapValue)return-1;const h=l.fields||{},d=Object.keys(h),p=u.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let b=0;b<d.length&&b<g.length;++b){const E=iv(d[b],g[b]);if(E!==0)return E;const S=Fl(h[d[b]],p[g[b]]);if(S!==0)return S}return We(d.length,g.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:n})}}function fx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=ma(t),s=ma(e),a=We(n.seconds,s.seconds);return a!==0?a:We(n.nanos,s.nanos)}function dx(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const l=Fl(n[a],s[a]);if(l)return l}return We(n.length,s.length)}function zl(t){return rv(t)}function rv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=ma(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return pa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ce.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=rv(l);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${rv(n.fields[u])}`;return a+"}"})(t.mapValue):Ve(61005,{value:t})}function Ad(t){switch(ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mm(t);return e?16+Ad(e):16;case 5:return 2*t.stringValue.length;case 6:return pa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Ad(l)),0)})(t.arrayValue);case 10:case 11:return(function(s){let a=0;return Sa(s.fields,((l,u)=>{a+=l.length+Ad(u)})),a})(t.mapValue);default:throw Ve(13486,{value:t})}}function mx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function av(t){return!!t&&"integerValue"in t}function _0(t){return!!t&&"arrayValue"in t}function px(t){return!!t&&"nullValue"in t}function gx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rd(t){return!!t&&"mapValue"in t}function lL(t){return(t?.mapValue?.fields||{})[DR]?.stringValue===PR}function Ic(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Sa(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ic(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ic(t.arrayValue.values[n]);return e}return{...t}}function uL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(n)}setAll(e){let n=gn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,s,a),s={},a=[],n=h.popLast()}u?s[h.lastSegment()]=Ic(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,a)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Rd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Sa(n,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Bn(Ic(this.value))}}function MR(t){const e=[];return Sa(t.fields,((n,s)=>{const a=new gn([n]);if(Rd(s)){const l=MR(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,s,a,l,u,h){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new wn(e,0,Le.min(),Le.min(),Le.min(),Bn.empty(),0)}static newFoundDocument(e,n,s,a){return new wn(e,1,n,Le.min(),s,a,0)}static newNoDocument(e,n){return new wn(e,2,n,Le.min(),Le.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Le.min(),Le.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.position=e,this.inclusive=n}}function yx(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const l=e[a],u=t.position[a];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(u.referenceValue),n.key):s=Fl(u,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function vx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function cL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{}class $t extends VR{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new fL(e,n,s):n==="array-contains"?new pL(e,s):n==="in"?new gL(e,s):n==="not-in"?new yL(e,s):n==="array-contains-any"?new vL(e,s):new $t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new dL(e,s):new mL(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fl(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(Fl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fs extends VR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Fs(e,n)}matches(e){return OR(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OR(t){return t.op==="and"}function kR(t){return hL(t)&&OR(t)}function hL(t){for(const e of t.filters)if(e instanceof Fs)return!1;return!0}function ov(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(kR(t))return t.filters.map((e=>ov(e))).join(",");{const e=t.filters.map((n=>ov(n))).join(",");return`${t.op}(${e})`}}function jR(t,e){return t instanceof $t?(function(s,a){return a instanceof $t&&s.op===a.op&&s.field.isEqual(a.field)&&Si(s.value,a.value)})(t,e):t instanceof Fs?(function(s,a){return a instanceof Fs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&jR(u,a.filters[h])),!0):!1})(t,e):void Ve(19439)}function LR(t){return t instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${zl(n.value)}`})(t):t instanceof Fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(LR).join(" ,")+"}"})(t):"Filter"}class fL extends $t{constructor(e,n,s){super(e,n,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class dL extends $t{constructor(e,n){super(e,"in",n),this.keys=UR("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class mL extends $t{constructor(e,n){super(e,"not-in",n),this.keys=UR("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function UR(t,e){return(e.arrayValue?.values||[]).map((n=>Ce.fromName(n.referenceValue)))}class pL extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _0(n)&&Qc(n.arrayValue,this.value)}}class gL extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class yL extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qc(this.value.arrayValue,n)}}class vL extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Qc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function _x(t,e=null,n=[],s=[],a=null,l=null,u=null){return new _L(t,e,n,s,a,l,u)}function b0(t){const e=Ue(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>ov(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>zl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>zl(s))).join(",")),e.Te=n}return e.Te}function E0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vx(t.startAt,e.startAt)&&vx(t.endAt,e.endAt)}function lv(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n=null,s=[],a=[],l=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bL(t,e,n,s,a,l,u,h){return new gh(t,e,n,s,a,l,u,h)}function T0(t){return new gh(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BR(t){return t.collectionGroup!==null}function Cc(t){const e=Ue(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Jt(gn.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Zd(l,s))})),n.has(gn.keyField().canonicalString())||e.Ie.push(new Zd(gn.keyField(),s))}return e.Ie}function yi(t){const e=Ue(t);return e.Ee||(e.Ee=EL(e,Cc(t))),e.Ee}function EL(t,e){if(t.limitType==="F")return _x(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Zd(a.field,l)}));const n=t.endAt?new Xd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Xd(t.startAt.position,t.startAt.inclusive):null;return _x(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function uv(t,e){const n=t.filters.concat([e]);return new gh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cv(t,e,n){return new gh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vm(t,e){return E0(yi(t),yi(e))&&t.limitType===e.limitType}function FR(t){return`${b0(yi(t))}|lt:${t.limitType}`}function Tl(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>LR(a))).join(", ")}]`),Pm(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>zl(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>zl(a))).join(",")),`Target(${s})`})(yi(t))}; limitType=${t.limitType})`}function Om(t,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(t,e)&&(function(s,a){for(const l of Cc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,d){const p=yx(u,h,d);return u.inclusive?p<=0:p<0})(s.startAt,Cc(s),a)||s.endAt&&!(function(u,h,d){const p=yx(u,h,d);return u.inclusive?p>=0:p>0})(s.endAt,Cc(s),a))})(t,e)}function TL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zR(t){return(e,n)=>{let s=!1;for(const a of Cc(t)){const l=wL(a,e,n);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function wL(t,e,n){const s=t.field.isKeyField()?Ce.comparator(e.key,n.key):(function(l,u,h){const d=u.data.field(l),p=h.data.field(l);return d!==null&&p!==null?Fl(d,p):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,((n,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return SR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=new St(Ce.comparator);function pr(){return xL}const qR=new St(Ce.comparator);function Tc(...t){let e=qR;for(const n of t)e=e.insert(n.key,n);return e}function HR(t){let e=qR;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function lo(){return Nc()}function GR(){return Nc()}function Nc(){return new Io((t=>t.toString()),((t,e)=>t.isEqual(e)))}const SL=new St(Ce.comparator),AL=new Jt(Ce.comparator);function Ye(...t){let e=AL;for(const n of t)e=e.add(n);return e}const RL=new Jt(We);function IL(){return RL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function $R(t){return{integerValue:""+t}}function CL(t,e){return nL(e)?$R(e):w0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this._=void 0}}function NL(t,e,n){return t instanceof Xc?(function(a,l){const u={fields:{[IR]:{stringValue:RR},[NR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&v0(l)&&(l=Mm(l)),l&&(u.fields[CR]=l),{mapValue:u}})(n,e):t instanceof Zc?WR(t,e):t instanceof Jc?YR(t,e):(function(a,l){const u=KR(a,l),h=Ex(u)+Ex(a.Ae);return av(u)&&av(a.Ae)?$R(h):w0(a.serializer,h)})(t,e)}function DL(t,e,n){return t instanceof Zc?WR(t,e):t instanceof Jc?YR(t,e):n}function KR(t,e){return t instanceof Jd?(function(s){return av(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Xc extends km{}class Zc extends km{constructor(e){super(),this.elements=e}}function WR(t,e){const n=QR(e);for(const s of t.elements)n.some((a=>Si(a,s)))||n.push(s);return{arrayValue:{values:n}}}class Jc extends km{constructor(e){super(),this.elements=e}}function YR(t,e){let n=QR(e);for(const s of t.elements)n=n.filter((a=>!Si(a,s)));return{arrayValue:{values:n}}}class Jd extends km{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ex(t){return Vt(t.integerValue||t.doubleValue)}function QR(t){return _0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n){this.field=e,this.transform=n}}function ML(t,e){return t.field.isEqual(e.field)&&(function(s,a){return s instanceof Zc&&a instanceof Zc||s instanceof Jc&&a instanceof Jc?Bl(s.elements,a.elements,Si):s instanceof Jd&&a instanceof Jd?Si(s.Ae,a.Ae):s instanceof Xc&&a instanceof Xc})(t.transform,e.transform)}class VL{constructor(e,n){this.version=e,this.transformResults=n}}class vi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vi}static exists(e){return new vi(void 0,e)}static updateTime(e){return new vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jm{}function XR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new JR(t.key,vi.none()):new yh(t.key,t.data,vi.none());{const n=t.data,s=Bn.empty();let a=new Jt(gn.comparator);for(let l of e.fields)if(!a.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Aa(t.key,s,new ts(a.toArray()),vi.none())}}function OL(t,e,n){t instanceof yh?(function(a,l,u){const h=a.value.clone(),d=wx(a.fieldTransforms,l,u.transformResults);h.setAll(d),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Aa?(function(a,l,u){if(!Id(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=wx(a.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(ZR(a)),d.setAll(h),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Dc(t,e,n,s){return t instanceof yh?(function(l,u,h,d){if(!Id(l.precondition,u))return h;const p=l.value.clone(),g=xx(l.fieldTransforms,d,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,s):t instanceof Aa?(function(l,u,h,d){if(!Id(l.precondition,u))return h;const p=xx(l.fieldTransforms,d,u),g=u.data;return g.setAll(ZR(l)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(t,e,n,s):(function(l,u,h){return Id(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function kL(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),l=KR(s.transform,a||null);l!=null&&(n===null&&(n=Bn.empty()),n.set(s.field,l))}return n||null}function Tx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Bl(s,a,((l,u)=>ML(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yh extends jm{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Aa extends jm{constructor(e,n,s,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ZR(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function wx(t,e,n){const s=new Map;st(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,DL(u,h,n[a]))}return s}function xx(t,e,n){const s=new Map;for(const a of t){const l=a.transform,u=n.data.field(a.field);s.set(a.field,NL(l,u,e))}return s}class JR extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jL extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&OL(l,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Dc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Dc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=GR();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=n.has(a.key)?null:h;const d=XR(u,h);d!==null&&s.set(a.key,d),u.isValidDocument()||u.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,((n,s)=>Tx(n,s)))&&Bl(this.baseMutations,e.baseMutations,((n,s)=>Tx(n,s)))}}class x0{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){st(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return SL})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new x0(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Je;function FL(t){switch(t){case ae.OK:return Ve(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function eI(t){if(t===void 0)return dr("GRPC error has no .code"),ae.UNKNOWN;switch(t){case zt.OK:return ae.OK;case zt.CANCELLED:return ae.CANCELLED;case zt.UNKNOWN:return ae.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ae.INTERNAL;case zt.UNAVAILABLE:return ae.UNAVAILABLE;case zt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case zt.NOT_FOUND:return ae.NOT_FOUND;case zt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case zt.ABORTED:return ae.ABORTED;case zt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case zt.DATA_LOSS:return ae.DATA_LOSS;default:return Ve(39323,{code:t})}}(Je=zt||(zt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new ua([4294967295,4294967295],0);function Sx(t){const e=zL().encode(t),n=new mR;return n.update(e),new Uint8Array(n.digest())}function Ax(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ua([n,s],0),new ua([a,l],0)]}class S0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wc(`Invalid padding: ${n}`);if(s<0)throw new wc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ua.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(ua.fromNumber(s)));return a.compare(qL)===1&&(a=new ua([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sx(e),[s,a]=Ax(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new S0(l,a,n);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=Sx(e),[s,a]=Ax(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,s,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,vh.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Lm(Le.min(),a,new St(We),pr(),Ye())}}class vh{constructor(e,n,s,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vh(s,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class tI{constructor(e,n){this.targetId=e,this.Ce=n}}class nI{constructor(e,n,s=vn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Rx{constructor(){this.ve=0,this.Fe=Ix(),this.Me=vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),s=Ye();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ve(38017,{changeType:l})}})),new vh(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Ix()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HL{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=rd(),this.He=rd(),this.Ye=new St(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(lv(l))if(s===0){const u=new Ce(l.path);this.et(n,u,wn.newNoDocument(u,Le.min()))}else st(s===1,20013,{expectedCount:s});else{const u=this._t(n);if(u!==s){const h=this.ut(e),d=h?this.ct(h,e,u):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=n;let u,h;try{u=pa(s).toUint8Array()}catch(d){if(d instanceof AR)return Ul("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new S0(u,a,l)}catch(d){return Ul(d instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&lv(h.target)){const d=new Ce(h.target.path);this.It(d).has(u)||this.Et(u,d)||this.et(u,d,wn.newNoDocument(d,e))}l.Be&&(n.set(u,l.ke()),l.qe())}}));let s=Ye();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Lm(e,n,this.Ye,this.je,s);return this.je=pr(),this.Je=rd(),this.He=rd(),this.Ye=new St(We),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function rd(){return new St(Ce.comparator)}function Ix(){return new St(Ce.comparator)}const GL={asc:"ASCENDING",desc:"DESCENDING"},$L={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KL={and:"AND",or:"OR"};class WL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hv(t,e){return t.useProto3Json||Pm(e)?e:{value:e}}function em(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YL(t,e){return em(t,e.toTimestamp())}function _i(t){return st(!!t,49232),Le.fromTimestamp((function(n){const s=ma(n);return new gt(s.seconds,s.nanos)})(t))}function A0(t,e){return fv(t,e).canonicalString()}function fv(t,e){const n=(function(a){return new pt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function iI(t){const e=pt.fromString(t);return st(uI(e),10190,{key:e.toString()}),e}function dv(t,e){return A0(t.databaseId,e.path)}function py(t,e){const n=iI(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(aI(n))}function rI(t,e){return A0(t.databaseId,e)}function QL(t){const e=iI(t);return e.length===4?pt.emptyPath():aI(e)}function mv(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aI(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cx(t,e,n){return{name:dv(t,e),fields:n.value.mapValue.fields}}function XL(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ve(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,g){return p.useProto3Json?(st(g===void 0||typeof g=="string",58123),vn.fromBase64String(g||"")):(st(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),vn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const g=p.code===void 0?ae.UNKNOWN:eI(p.code);return new be(g,p.message||"")})(u);n=new nI(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=py(t,s.document.name),l=_i(s.document.updateTime),u=s.document.createTime?_i(s.document.createTime):Le.min(),h=new Bn({mapValue:{fields:s.document.fields}}),d=wn.newFoundDocument(a,l,u,h),p=s.targetIds||[],g=s.removedTargetIds||[];n=new Cd(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=py(t,s.document),l=s.readTime?_i(s.readTime):Le.min(),u=wn.newNoDocument(a,l),h=s.removedTargetIds||[];n=new Cd([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=py(t,s.document),l=s.removedTargetIds||[];n=new Cd([],l,a,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new BL(a,l),h=s.targetId;n=new tI(h,u)}}return n}function ZL(t,e){let n;if(e instanceof yh)n={update:Cx(t,e.key,e.value)};else if(e instanceof JR)n={delete:dv(t,e.key)};else if(e instanceof Aa)n={update:Cx(t,e.key,e.data),updateMask:o6(e.fieldMask)};else{if(!(e instanceof jL))return Ve(16599,{Vt:e.type});n={verify:dv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Xc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Jd)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Ve(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:YL(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(t,e.precondition)),n}function JL(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map((n=>(function(a,l){let u=a.updateTime?_i(a.updateTime):_i(l);return u.isEqual(Le.min())&&(u=_i(l)),new VL(u,a.transformResults||[])})(n,e)))):[]}function e6(t,e){return{documents:[rI(t,e.path)]}}function t6(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=rI(t,a);const l=(function(p){if(p.length!==0)return lI(Fs.create(p,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((g=>(function(E){return{field:wl(E.field),direction:i6(E.dir)}})(g)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=hv(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function n6(t){let e=QL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){st(s===1,65062);const g=n.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let l=[];n.where&&(l=(function(b){const E=oI(b);return E instanceof Fs&&kR(E)?E.getFilters():[E]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((E=>(function(D){return new Zd(xl(D.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let E;return E=typeof b=="object"?b.value:b,Pm(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(b){const E=!!b.before,S=b.values||[];return new Xd(S,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(b){const E=!b.before,S=b.values||[];return new Xd(S,E)})(n.endAt)),bL(e,a,u,l,h,"F",d,p)}function s6(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=xl(n.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=xl(n.unaryFilter.field);return $t.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xl(n.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=xl(n.unaryFilter.field);return $t.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return $t.create(xl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Fs.create(n.compositeFilter.filters.map((s=>oI(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function i6(t){return GL[t]}function r6(t){return $L[t]}function a6(t){return KL[t]}function wl(t){return{fieldPath:t.canonicalString()}}function xl(t){return gn.fromServerFormat(t.fieldPath)}function lI(t){return t instanceof $t?(function(n){if(n.op==="=="){if(gx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(px(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gx(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(px(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:r6(n.op),value:n.value}}})(t):t instanceof Fs?(function(n){const s=n.getFilters().map((a=>lI(a)));return s.length===1?s[0]:{compositeFilter:{op:a6(n.op),filters:s}}})(t):Ve(54877,{filter:t})}function o6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s,a,l=Le.min(),u=Le.min(),h=vn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.yt=e}}function u6(t){const e=n6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.Cn=new h6}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(da.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(da.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class h6{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new Jt(pt.comparator),l=!a.has(s);return this.index[n]=a.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Jt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cI=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(cI,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ql(0)}static cr(){return new ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="LruGarbageCollector",f6=1048576;function Px([t,e],[n,s]){const a=We(t,n);return a===0?We(e,s):a}class d6{constructor(e){this.Ir=e,this.buffer=new Jt(Px),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Px(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class m6{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(Dx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tu(n)?Ee(Dx,"Ignoring IndexedDB error during garbage collection: ",n):await eu(n)}await this.Vr(3e5)}))}}class p6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Dm.ce);const s=new d6(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Nx)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,l,u,h,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(s=b,h=Date.now(),this.removeTargets(e,s,n)))).next((b=>(l=b,d=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(p=Date.now(),El()<=Ke.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(d-h)+`ms
	Removed ${b} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function g6(t,e){return new p6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this.changes=new Io((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&Dc(s.mutation,a,ts.empty(),gt.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ye()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ye()){const a=lo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((l=>{let u=Tc();return l.forEach(((h,d)=>{u=u.insert(h,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=lo();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ye())))}populateOverlays(e,n,s){const a=[];return s.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,s,a){let l=pr();const u=Nc(),h=(function(){return Nc()})();return n.forEach(((d,p)=>{const g=s.get(p.key);a.has(p.key)&&(g===void 0||g.mutation instanceof Aa)?l=l.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),Dc(g.mutation,p,g.mutation.getFieldMask(),gt.now())):u.set(p.key,ts.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,g)=>u.set(p,g))),n.forEach(((p,g)=>h.set(p,new v6(g,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,n){const s=Nc();let a=new St(((u,h)=>u-h)),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let g=s.get(d)||ts.empty();g=h.applyToLocalView(p,g),s.set(d,g);const b=(a.get(h.batchId)||Ye()).add(d);a=a.insert(h.batchId,b)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,g=d.value,b=GR();g.forEach((E=>{if(!l.has(E)){const S=XR(n.get(E),s.get(E));S!==null&&b.set(E,S),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return le.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-l.size):le.resolve(lo());let h=Kc,d=l;return u.next((p=>le.forEach(p,((g,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),l.get(g)?le.resolve():this.remoteDocumentCache.getEntry(e,g).next((E=>{d=d.insert(g,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,Ye()))).next((g=>({batchId:h,changes:HR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((s=>{let a=Tc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const l=n.collectionGroup;let u=Tc();return this.indexManager.getCollectionParents(e,l).next((h=>le.forEach(h,(d=>{const p=(function(b,E){return new gh(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((g=>{g.forEach(((b,E)=>{u=u.insert(b,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,a)))).next((u=>{l.forEach(((d,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,wn.newInvalidDocument(g)))}));let h=Tc();return u.forEach(((d,p)=>{const g=l.get(d);g!==void 0&&Dc(g.mutation,p,ts.empty(),gt.now()),Om(n,p)&&(h=h.insert(d,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:_i(a.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:u6(a.bundledQuery),readTime:_i(a.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.overlays=new St(Ce.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=lo();return le.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,l)=>{this.St(e,n,l)})),le.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const a=lo(),l=n.length+1,u=new Ce(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>s&&a.set(d.getKey(),d)}return le.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let l=new St(((p,g)=>p-g));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let g=l.get(p.largestBatchId);g===null&&(g=lo(),l=l.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=lo(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,g)=>h.set(p,g))),!(h.size()>=a)););return le.resolve(h)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new UL(n,s));let l=this.qr.get(n);l===void 0&&(l=Ye(),this.qr.set(n,l)),this.qr.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.Qr=new Jt(on.$r),this.Ur=new Jt(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new on(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new on(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ce(new pt([])),s=new on(n,e),a=new on(n,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ce(new pt([])),s=new on(n,e),a=new on(n,e+1);let l=Ye();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new on(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class on{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ce.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(on.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new LL(l,n,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new on(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),l=a<0?0:a;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?y0:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Jt(We);return n.forEach((a=>{const l=new on(a,0),u=new on(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const u=new on(new Ce(l),0);let h=new Jt(We);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(d.Yr)),!0)}),u),le.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){st(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(n.mutations,(a=>{const l=new on(a.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new on(n,0),a=this.Zr.firstAfterOrEqual(s);return le.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.ri=e,this.docs=(function(){return new St(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let s=pr();return n.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():wn.newInvalidDocument(a))})),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let l=pr();const u=n.path,h=new Ce(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Zj(Xj(g),s)<=0||(a.has(g.key)||Om(n,g))&&(l=l.insert(g.key,g.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,n,s,a){Ve(9500)}ii(e,n){return le.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new S6(this)}getSize(e){return le.resolve(this.size)}}class S6 extends y6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.persistence=e,this.si=new Io((n=>b0(n)),E0),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new R0,this.targetCount=0,this.ai=ql.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ql(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),le.waitFor(l).next((()=>a))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dm(0),this.li=!1,this.li=!0,this.hi=new T6,this.referenceDelegate=e(this),this.Pi=new A6(this),this.indexManager=new c6,this.remoteDocumentCache=(function(a){return new x6(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new l6(n),this.Ii=new b6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new w6(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ee("MemoryPersistence","Starting transaction:",e);const a=new R6(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class R6 extends eL{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new R0,this.Vi=null}static mi(e){return new I0(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const a=Ce.fromPath(s);return this.gi(e,a).next((l=>{l||n.removeEntry(a,Le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class tm{constructor(e,n){this.persistence=e,this.pi=new Io((s=>sL(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=g6(this,n)}static mi(e,n){return new tm(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?le.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,n).next((h=>{h||(s++,l.removeEntry(u,Le.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ad(e.data.value)),n}br(e,n,s){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return le.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Ye(),a=Ye();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new C0(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eO()?8:tL(Sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const l={result:null};return this.ys(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,n,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new I6;return this.Ss(e,n,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>l.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(El()<=Ke.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(El()<=Ke.DEBUG&&Ee("QueryEngine","Query:",Tl(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(El()<=Ke.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):le.resolve())}ys(e,n){if(bx(n))return le.resolve(null);let s=yi(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=cv(n,null,"F"),s=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Ye(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((d=>{const p=this.Ds(n,h);return this.Cs(n,p,u,d.readTime)?this.ys(e,cv(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ws(e,n,s,a){return bx(n)||a.isEqual(Le.min())?le.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(n,l);return this.Cs(n,u,s,a)?le.resolve(null):(El()<=Ke.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Tl(n)),this.vs(e,u,n,Qj(a,Kc)).next((h=>h)))}))}Ds(e,n){let s=new Jt(zR(e));return n.forEach(((a,l)=>{Om(e,l)&&(s=s.add(l))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,s){return El()<=Ke.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Tl(n)),this.ps.getDocumentsMatchingQuery(e,n,da.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="LocalStore",N6=3e8;class D6{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new St(We),this.xs=new Io((l=>b0(l)),E0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function P6(t,e,n,s){return new D6(t,e,n,s)}async function fI(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let d=Ye();for(const p of a){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of l){h.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(s,d).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function M6(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,p,g){const b=p.batch,E=b.keys();let S=le.resolve();return E.forEach((D=>{S=S.next((()=>g.getEntry(d,D))).next((M=>{const k=p.docVersions.get(D);st(k!==null,48541),M.version.compareTo(k)<0&&(b.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),g.addEntry(M)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(d,b)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let d=Ye();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function dI(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function V6(t,e){const n=Ue(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((g,b)=>{const E=a.get(b);if(!E)return;h.push(n.Pi.removeMatchingKeys(l,g.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(l,g.addedDocuments,b))));let S=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?S=S.withResumeToken(vn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,s)),a=a.insert(b,S),(function(M,k,V){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=N6?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,S,g)&&h.push(n.Pi.updateTargetData(l,S))}));let d=pr(),p=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,g))})),h.push(O6(l,u,e.documentUpdates).next((g=>{d=g.ks,p=g.qs}))),!s.isEqual(Le.min())){const g=n.Pi.getLastRemoteSnapshotVersion(l).next((b=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(g)}return le.waitFor(h).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Ms=a,l)))}function O6(t,e,n){let s=Ye(),a=Ye();return n.forEach((l=>s=s.add(l))),e.getEntries(t,s).next((l=>{let u=pr();return n.forEach(((h,d)=>{const p=l.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(Le.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):Ee(N0,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)})),{ks:u,qs:a}}))}function k6(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=y0),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j6(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((l=>l?(a=l,le.resolve(a)):n.Pi.allocateTargetId(s).next((u=>(a=new aa(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function pv(t,e,n){const s=Ue(t),a=s.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!tu(u))throw u;Ee(N0,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function Mx(t,e,n){const s=Ue(t);let a=Le.min(),l=Ye();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,p,g){const b=Ue(d),E=b.xs.get(g);return E!==void 0?le.resolve(b.Ms.get(E)):b.Pi.getTargetData(p,g)})(s,u,yi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((d=>{l=d}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,n?a:Le.min(),n?l:Ye()))).next((h=>(L6(s,TL(e),h),{documents:h,Qs:l})))))}function L6(t,e,n){let s=t.Os.get(e)||Le.min();n.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),t.Os.set(e,s)}class Vx{constructor(){this.activeTargetIds=IL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U6{constructor(){this.Mo=new Vx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vx,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="ConnectivityMonitor";class kx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(Ox,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(Ox,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function gv(){return ad===null?ad=(function(){return 268435456+Math.round(2147483648*Math.random())})():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="RestConnection",F6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Yd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,l){const u=gv(),h=this.zo(e,n.toUriEncodedString());Ee(gy,`Sending RPC '${e}' ${u}:`,h,s);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,l);const{host:p}=new URL(h),g=So(p);return this.Jo(e,h,d,s,g).then((b=>(Ee(gy,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Ul(gy,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",s),b}))}Ho(e,n,s,a,l,u){return this.Go(e,n,s,a,l)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const s=F6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class H6 extends z6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,l){const u=gv();return new Promise(((h,d)=>{const p=new pR;p.setWithCredentials(!0),p.listenOnce(gR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Sd.NO_ERROR:const b=p.getResponseJson();Ee(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case Sd.TIMEOUT:Ee(En,`RPC '${e}' ${u} timed out`),d(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:const E=p.getStatus();if(Ee(En,`RPC '${e}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S?.error;if(D&&D.status&&D.message){const M=(function(V){const P=V.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(P)>=0?P:ae.UNKNOWN})(D.status);d(new be(M,D.message))}else d(new be(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new be(ae.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ee(En,`RPC '${e}' ${u} completed.`)}}));const g=JSON.stringify(a);Ee(En,`RPC '${e}' ${u} sending request:`,a),p.send(n,"POST",g,s,15)}))}T_(e,n,s){const a=gv(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_R(),h=vR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,s),d.encodeInitMessageHeaders=!0;const g=l.join("");Ee(En,`Creating RPC '${e}' stream ${a}: ${g}`,d);const b=u.createWebChannel(g,d);this.I_(b);let E=!1,S=!1;const D=new q6({Yo:k=>{S?Ee(En,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(E||(Ee(En,`Opening RPC '${e}' stream ${a} transport.`),b.open(),E=!0),Ee(En,`RPC '${e}' stream ${a} sending:`,k),b.send(k))},Zo:()=>b.close()}),M=(k,V,P)=>{k.listen(V,(q=>{try{P(q)}catch(se){setTimeout((()=>{throw se}),0)}}))};return M(b,Ec.EventType.OPEN,(()=>{S||(Ee(En,`RPC '${e}' stream ${a} transport opened.`),D.o_())})),M(b,Ec.EventType.CLOSE,(()=>{S||(S=!0,Ee(En,`RPC '${e}' stream ${a} transport closed`),D.a_(),this.E_(b))})),M(b,Ec.EventType.ERROR,(k=>{S||(S=!0,Ul(En,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),D.a_(new be(ae.UNAVAILABLE,"The operation could not be completed")))})),M(b,Ec.EventType.MESSAGE,(k=>{if(!S){const V=k.data[0];st(!!V,16349);const P=V,q=P?.error||P[0]?.error;if(q){Ee(En,`RPC '${e}' stream ${a} received error:`,q);const se=q.status;let X=(function(A){const N=zt[A];if(N!==void 0)return eI(N)})(se),ce=q.message;X===void 0&&(X=ae.INTERNAL,ce="Unknown error status: "+se+" with message "+q.message),S=!0,D.a_(new be(X,ce)),b.close()}else Ee(En,`RPC '${e}' stream ${a} received:`,V),D.u_(V)}})),M(h,yR.STAT_EVENT,(k=>{k.stat===sv.PROXY?Ee(En,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===sv.NOPROXY&&Ee(En,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function yy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return new WL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="PersistentStream";class pI{constructor(e,n,s,a,l,u,h,d){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new be(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ee(jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G6 extends pI{constructor(e,n,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,u),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=XL(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Le.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?_i(u.readTime):Le.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=mv(this.serializer),n.addTarget=(function(l,u){let h;const d=u.target;if(h=lv(d)?{documents:e6(l,d)}:{query:t6(l,d).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=sI(l,u.resumeToken);const p=hv(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Le.min())>0){h.readTime=em(l,u.snapshotVersion.toTimestamp());const p=hv(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=s6(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=mv(this.serializer),n.removeTarget=e,this.q_(n)}}class $6 extends pI{constructor(e,n,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JL(e.writeResults,e.commitTime),s=_i(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=mv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>ZL(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{}class W6 extends K6{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,fv(n,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ae.UNKNOWN,l.toString())}))}Ho(e,n,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,fv(n,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Y6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dr(n),this.aa=!1):Ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="RemoteStore";class Q6{constructor(e,n,s,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Co(this)&&(Ee(To,"Restarting streams for network reachability change."),await(async function(d){const p=Ue(d);p.Ea.add(4),await _h(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Bm(p)})(this))}))})),this.Ra=new Y6(s,a)}}async function Bm(t){if(Co(t))for(const e of t.da)await e(!0)}async function _h(t){for(const e of t.da)await e(!1)}function gI(t,e){const n=Ue(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),V0(n)?M0(n):nu(n).O_()&&P0(n,e))}function D0(t,e){const n=Ue(t),s=nu(n);n.Ia.delete(e),s.O_()&&yI(n,e),n.Ia.size===0&&(s.O_()?s.L_():Co(n)&&n.Ra.set("Unknown"))}function P0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nu(t).Y_(e)}function yI(t,e){t.Va.Ue(e),nu(t).Z_(e)}function M0(t){t.Va=new HL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nu(t).start(),t.Ra.ua()}function V0(t){return Co(t)&&!nu(t).x_()&&t.Ia.size>0}function Co(t){return Ue(t).Ea.size===0}function vI(t){t.Va=void 0}async function X6(t){t.Ra.set("Online")}async function Z6(t){t.Ia.forEach(((e,n)=>{P0(t,e)}))}async function J6(t,e){vI(t),V0(t)?(t.Ra.ha(e),M0(t)):t.Ra.set("Unknown")}async function e3(t,e,n){if(t.Ra.set("Online"),e instanceof nI&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(s){Ee(To,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nm(t,s)}else if(e instanceof Cd?t.Va.Ze(e):e instanceof tI?t.Va.st(e):t.Va.tt(e),!n.isEqual(Le.min()))try{const s=await dI(t.localStore);n.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=l.Ia.get(p);g&&l.Ia.set(p,g.withResumeToken(d.resumeToken,u))}})),h.targetMismatches.forEach(((d,p)=>{const g=l.Ia.get(d);if(!g)return;l.Ia.set(d,g.withResumeToken(vn.EMPTY_BYTE_STRING,g.snapshotVersion)),yI(l,d);const b=new aa(g.target,d,p,g.sequenceNumber);P0(l,b)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(s){Ee(To,"Failed to raise snapshot:",s),await nm(t,s)}}async function nm(t,e,n){if(!tu(e))throw e;t.Ea.add(1),await _h(t),t.Ra.set("Offline"),n||(n=()=>dI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(To,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bm(t)}))}function _I(t,e){return e().catch((n=>nm(t,n,e)))}async function Fm(t){const e=Ue(t),n=ya(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:y0;for(;t3(e);)try{const a=await k6(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,n3(e,a)}catch(a){await nm(e,a)}bI(e)&&EI(e)}function t3(t){return Co(t)&&t.Ta.length<10}function n3(t,e){t.Ta.push(e);const n=ya(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bI(t){return Co(t)&&!ya(t).x_()&&t.Ta.length>0}function EI(t){ya(t).start()}async function s3(t){ya(t).ra()}async function i3(t){const e=ya(t);for(const n of t.Ta)e.ea(n.mutations)}async function r3(t,e,n){const s=t.Ta.shift(),a=x0.from(s,e,n);await _I(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Fm(t)}async function a3(t,e){e&&ya(t).X_&&await(async function(s,a){if((function(u){return FL(u)&&u!==ae.ABORTED})(a.code)){const l=s.Ta.shift();ya(s).B_(),await _I(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Fm(s)}})(t,e),bI(t)&&EI(t)}async function Lx(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),Ee(To,"RemoteStore received new credentials");const s=Co(n);n.Ea.add(3),await _h(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bm(n)}async function o3(t,e){const n=Ue(t);e?(n.Ea.delete(2),await Bm(n)):e||(n.Ea.add(2),await _h(n),n.Ra.set("Unknown"))}function nu(t){return t.ma||(t.ma=(function(n,s,a){const l=Ue(n);return l.sa(),new G6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:X6.bind(null,t),t_:Z6.bind(null,t),r_:J6.bind(null,t),H_:e3.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),V0(t)?M0(t):t.Ra.set("Unknown")):(await t.ma.stop(),vI(t))}))),t.ma}function ya(t){return t.fa||(t.fa=(function(n,s,a){const l=Ue(n);return l.sa(),new $6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:s3.bind(null,t),r_:a3.bind(null,t),ta:i3.bind(null,t),na:r3.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Fm(t)):(await t.fa.stop(),t.Ta.length>0&&(Ee(To,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,s,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,l){const u=Date.now()+s,h=new O0(e,n,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k0(t,e){if(dr("AsyncQueue",`${e}: ${t}`),tu(t))return new be(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ce.comparator(n.key,s.key):(n,s)=>Ce.comparator(n.key,s.key),this.keyedMap=Tc(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ol;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.ga=new St(Ce.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Hl{constructor(e,n,s,a,l,u,h,d,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,a,l){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new Hl(e,n,Ol.emptySet(n),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class u3{constructor(){this.queries=Bx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Ue(n),l=a.queries;a.queries=Bx(),l.forEach(((u,h)=>{for(const d of h.Sa)d.onError(s)}))})(this,new be(ae.ABORTED,"Firestore shutting down"))}}function Bx(){return new Io((t=>FR(t)),Vm)}async function TI(t,e){const n=Ue(t);let s=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new l3,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const h=k0(u,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&j0(n)}async function wI(t,e){const n=Ue(t),s=e.query;let a=3;const l=n.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function c3(t,e){const n=Ue(t);let s=!1;for(const a of e){const l=a.query,u=n.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&j0(n)}function h3(t,e,n){const s=Ue(t),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);s.queries.delete(e)}function j0(t){t.Ca.forEach((e=>{e.next()}))}var yv,Fx;(Fx=yv||(yv={})).Ma="default",Fx.Cache="cache";class xI{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Hl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.key=e}}class AI{constructor(e){this.key=e}}class f3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=zR(e),this.tu=new Ol(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Ux,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,u=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((g,b)=>{const E=a.get(g),S=Om(this.query,b)?b:null,D=!!E&&this.mutatedKeys.has(E.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;E&&S?E.data.isEqual(S.data)?D!==M&&(s.track({type:3,doc:S}),k=!0):this.su(E,S)||(s.track({type:2,doc:S}),k=!0,(d&&this.eu(S,d)>0||p&&this.eu(S,p)<0)&&(h=!0)):!E&&S?(s.track({type:0,doc:S}),k=!0):E&&!S&&(s.track({type:1,doc:E}),k=!0,(d||p)&&(h=!0)),k&&(S?(u=u.add(S),l=M?l.add(g):l.delete(g)):(u=u.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),l=l.delete(g.key),s.track({type:1,doc:g})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((g,b)=>(function(S,D){const M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:k})}};return M(S)-M(D)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(s),a=a??!1;const h=n&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,p=d!==this.Za;return this.Za=d,u.length!==0||p?{snapshot:new Hl(this.query,e.tu,l,u,e.mutatedKeys,d===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new AI(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new SI(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const L0="SyncEngine";class d3{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class m3{constructor(e){this.key=e,this.hu=!1}}class p3{constructor(e,n,s,a,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Io((h=>FR(h)),Vm),this.Iu=new Map,this.Eu=new Set,this.du=new St(Ce.comparator),this.Au=new Map,this.Ru=new R0,this.Vu={},this.mu=new Map,this.fu=ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g3(t,e,n=!0){const s=PI(t);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await RI(s,e,n,!0),a}async function y3(t,e){const n=PI(t);await RI(n,e,!0,!1)}async function RI(t,e,n,s){const a=await j6(t.localStore,yi(e)),l=a.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let h;return s&&(h=await v3(t,e,l,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&gI(t.remoteStore,a),h}async function v3(t,e,n,s,a){t.pu=(b,E,S)=>(async function(M,k,V,P){let q=k.view.ru(V);q.Cs&&(q=await Mx(M.localStore,k.query,!1).then((({documents:j})=>k.view.ru(j,q))));const se=P&&P.targetChanges.get(k.targetId),X=P&&P.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(q,M.isPrimaryClient,se,X);return qx(M,k.targetId,ce.au),ce.snapshot})(t,b,E,S);const l=await Mx(t.localStore,e,!0),u=new f3(e,l.Qs),h=u.ru(l.documents),d=vh.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),p=u.applyChanges(h,t.isPrimaryClient,d);qx(t,n,p.au);const g=new d3(e,n,u);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function _3(t,e,n){const s=Ue(t),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!Vm(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await pv(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&D0(s.remoteStore,a.targetId),vv(s,a.targetId)})).catch(eu)):(vv(s,a.targetId),await pv(s.localStore,a.targetId,!0))}async function b3(t,e){const n=Ue(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),D0(n.remoteStore,s.targetId))}async function E3(t,e,n){const s=I3(t);try{const a=await(function(u,h){const d=Ue(u),p=gt.now(),g=h.reduce(((S,D)=>S.add(D.key)),Ye());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let D=pr(),M=Ye();return d.Ns.getEntries(S,g).next((k=>{D=k,D.forEach(((V,P)=>{P.isValidDocument()||(M=M.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,D))).next((k=>{b=k;const V=[];for(const P of h){const q=kL(P,b.get(P.key).overlayedDocument);q!=null&&V.push(new Aa(P.key,q,MR(q.value.mapValue),vi.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,V,h)})).next((k=>{E=k;const V=k.applyToLocalDocumentSet(b,M);return d.documentOverlayCache.saveOverlays(S,k.batchId,V)}))})).then((()=>({batchId:E.batchId,changes:HR(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,d){let p=u.Vu[u.currentUser.toKey()];p||(p=new St(We)),p=p.insert(h,d),u.Vu[u.currentUser.toKey()]=p})(s,a.batchId,n),await bh(s,a.changes),await Fm(s.remoteStore)}catch(a){const l=k0(a,"Failed to persist write");n.reject(l)}}async function II(t,e){const n=Ue(t);try{const s=await V6(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=n.Au.get(l);u&&(st(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?st(u.hu,14607):a.removedDocuments.size>0&&(st(u.hu,42227),u.hu=!1))})),await bh(n,s,e)}catch(s){await eu(s)}}function zx(t,e,n){const s=Ue(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const d=Ue(u);d.onlineState=h;let p=!1;d.queries.forEach(((g,b)=>{for(const E of b.Sa)E.va(h)&&(p=!0)})),p&&j0(d)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function T3(t,e,n){const s=Ue(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new St(Ce.comparator);u=u.insert(l,wn.newNoDocument(l,Le.min()));const h=Ye().add(l),d=new Lm(Le.min(),new Map,new St(We),u,h);await II(s,d),s.du=s.du.remove(l),s.Au.delete(e),U0(s)}else await pv(s.localStore,e,!1).then((()=>vv(s,e,n))).catch(eu)}async function w3(t,e){const n=Ue(t),s=e.batch.batchId;try{const a=await M6(n.localStore,e);NI(n,s,null),CI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bh(n,a)}catch(a){await eu(a)}}async function x3(t,e,n){const s=Ue(t);try{const a=await(function(u,h){const d=Ue(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return d.mutationQueue.lookupMutationBatch(p,h).next((b=>(st(b!==null,37113),g=b.keys(),d.mutationQueue.removeMutationBatch(p,b)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>d.localDocuments.getDocuments(p,g)))}))})(s.localStore,e);NI(s,e,n),CI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await bh(s,a)}catch(a){await eu(a)}}function CI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function NI(t,e,n){const s=Ue(t);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function vv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||DI(t,s)}))}function DI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(D0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),U0(t))}function qx(t,e,n){for(const s of n)s instanceof SI?(t.Ru.addReference(s.key,e),S3(t,s)):s instanceof AI?(Ee(L0,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||DI(t,s.key)):Ve(19791,{wu:s})}function S3(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ee(L0,"New document in limbo: "+n),t.Eu.add(s),U0(t))}function U0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ce(pt.fromString(e)),s=t.fu.next();t.Au.set(s,new m3(n)),t.du=t.du.insert(n,s),gI(t.remoteStore,new aa(yi(T0(n.path)),s,"TargetPurposeLimboResolution",Dm.ce))}}async function bh(t,e,n){const s=Ue(t),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,d)=>{u.push(s.pu(d,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const g=p?!p.fromCache:n?.targetChanges.get(d.targetId)?.current;s.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(p){a.push(p);const g=C0.As(d.targetId,p);l.push(g)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(d,p){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(p,(E=>le.forEach(E.Es,(S=>g.persistence.referenceDelegate.addReference(b,E.targetId,S))).next((()=>le.forEach(E.ds,(S=>g.persistence.referenceDelegate.removeReference(b,E.targetId,S)))))))))}catch(b){if(!tu(b))throw b;Ee(N0,"Failed to update sequence numbers: "+b)}for(const b of p){const E=b.targetId;if(!b.fromCache){const S=g.Ms.get(E),D=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(D);g.Ms=g.Ms.insert(E,M)}}})(s.localStore,l))}async function A3(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){Ee(L0,"User change. New user:",e.toKey());const s=await fI(n.localStore,e);n.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((d=>{d.reject(new be(ae.CANCELLED,u))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await bh(n,s.Ls)}}function R3(t,e){const n=Ue(t),s=n.Au.get(e);if(s&&s.hu)return Ye().add(s.key);{let a=Ye();const l=n.Iu.get(e);if(!l)return a;for(const u of l){const h=n.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function PI(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=II.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T3.bind(null,e),e.Pu.H_=c3.bind(null,e.eventManager),e.Pu.yu=h3.bind(null,e.eventManager),e}function I3(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x3.bind(null,e),e}class sm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Um(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return P6(this.persistence,new C6,e.initialUser,this.serializer)}Cu(e){return new hI(I0.mi,this.serializer)}Du(e){return new U6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sm.provider={build:()=>new sm};class C3 extends sm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof tm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new m6(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new hI((s=>tm.mi(s,n)),this.serializer)}}class _v{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=A3.bind(null,this.syncEngine),await o3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new u3})()}createDatastore(e){const n=Um(e.databaseInfo.databaseId),s=(function(l){return new H6(l)})(e.databaseInfo);return(function(l,u,h,d){return new W6(l,u,h,d)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,l,u,h){return new Q6(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>zx(this.syncEngine,n,0)),(function(){return kx.v()?new kx:new B6})())}createSyncEngine(e,n){return(function(a,l,u,h,d,p,g){const b=new p3(a,l,u,h,d,p);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ue(n);Ee(To,"RemoteStore shutting down."),s.Ea.add(5),await _h(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_v.provider={build:()=>new _v};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="FirestoreClient";class N3{constructor(e,n,s,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Tn.UNAUTHENTICATED,this.clientId=g0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Ee(va,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Ee(va,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=k0(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function vy(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(va,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async a=>{s.isEqual(a)||(await fI(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Hx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await D3(t);Ee(va,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Lx(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,a)=>Lx(e.remoteStore,a))),t._onlineComponents=e}async function D3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(va,"Using user provided OfflineComponentProvider");try{await vy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ae.FAILED_PRECONDITION||a.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Ul("Error using user provided cache. Falling back to memory cache: "+n),await vy(t,new sm)}}else Ee(va,"Using default OfflineComponentProvider"),await vy(t,new C3(void 0));return t._offlineComponents}async function VI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(va,"Using user provided OnlineComponentProvider"),await Hx(t,t._uninitializedComponentsProvider._online)):(Ee(va,"Using default OnlineComponentProvider"),await Hx(t,new _v))),t._onlineComponents}function P3(t){return VI(t).then((e=>e.syncEngine))}async function OI(t){const e=await VI(t),n=e.eventManager;return n.onListen=g3.bind(null,e.syncEngine),n.onUnlisten=_3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b3.bind(null,e.syncEngine),n}function M3(t,e,n={}){const s=new lr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,d,p){const g=new MI({next:E=>{g.Nu(),u.enqueueAndForget((()=>wI(l,b)));const S=E.docs.has(h);!S&&E.fromCache?p.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&d&&d.source==="server"?p.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new xI(T0(h.path),g,{includeMetadataChanges:!0,qa:!0});return TI(l,b)})(await OI(t),t.asyncQueue,e,n,s))),s.promise}function V3(t,e,n={}){const s=new lr;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,d,p){const g=new MI({next:E=>{g.Nu(),u.enqueueAndForget((()=>wI(l,b))),E.fromCache&&d.source==="server"?p.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new xI(h,g,{includeMetadataChanges:!0,qa:!0});return TI(l,b)})(await OI(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firestore.googleapis.com",$x=!0;class Kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jI,this.ssl=$x}else this.host=e.host,this.ssl=e.ssl??$x;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f6)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kI(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Uj;switch(s.type){case"firstParty":return new qj(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Gx.get(n);s&&(Ee("ComponentProvider","Removing Datastore"),Gx.delete(n),s.terminate())})(this),Promise.resolve()}}function O3(t,e,n,s={}){t=mr(t,zm);const a=So(e),l=t._getSettings(),u={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(i0(`https://${h}`),r0("Firestore",!0)),l.host!==jI&&l.host!==h&&Ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...l,host:h,ssl:a,emulatorOptions:s};if(!fa(d,u)&&(t._setSettings(d),s.mockUserToken)){let p,g;if(typeof s.mockUserToken=="string")p=s.mockUserToken,g=Tn.MOCK_USER;else{p=$V(s.mockUserToken,t._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Tn(b)}t._authCredentials=new Bj(new ER(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new su(this.firestore,e,this._query)}}class Ot{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ph(n,Ot._jsonSchema))return new Ot(e,s||null,new Ce(pt.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Kt("string",Ot._jsonSchemaVersion),referencePath:Kt("string")};class ca extends su{constructor(e,n,s){super(e,n,T0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Ce(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function od(t,e,...n){if(t=xt(t),TR("collection","path",e),t instanceof zm){const s=pt.fromString(e,...n);return ax(s),new ca(t,null,s)}{if(!(t instanceof Ot||t instanceof ca))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return ax(s),new ca(t.firestore,null,s)}}function Zr(t,e,...n){if(t=xt(t),arguments.length===1&&(e=g0.newId()),TR("doc","path",e),t instanceof zm){const s=pt.fromString(e,...n);return rx(s),new Ot(t,null,new Ce(s))}{if(!(t instanceof Ot||t instanceof ca))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return rx(s),new Ot(t.firestore,t instanceof ca?t.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="AsyncQueue";class Yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mI(this,"async_queue_retry"),this._c=()=>{const s=yy();s&&Ee(Wx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tu(e))throw e;Ee(Wx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,dr("INTERNAL UNHANDLED ERROR: ",Qx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=O0.createAndSchedule(this,e,n,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ve(47125,{Pc:Qx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Qx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Eh extends zm{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Yx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yx(e),this._firestoreClient=void 0,await e}}}function k3(t,e){const n=typeof t=="object"?t:Am(),s=typeof t=="string"?t:Yd,a=wa(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=T1("firestore");l&&O3(a,...l)}return a}function B0(t){if(t._terminated)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j3(t),t._firestoreClient}function j3(t){const e=t._freezeSettings(),n=(function(a,l,u,h){return new aL(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(vn.fromBase64String(e))}catch(n){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bs(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ph(e,bs._jsonSchema))return bs.fromBase64String(e.bytes)}}bs._jsonSchemaVersion="firestore/bytes/1.0",bs._jsonSchema={type:Kt("string",bs._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(ph(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:Kt("string",bi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ph(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ei(e.vectorValues);throw new be(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Kt("string",Ei._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^__.*__$/;class U3{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new yh(e,this.data,n,this.fieldTransforms)}}class LI{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:t})}}class F0{constructor(e,n,s,a,l,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new F0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return im(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UI(this.Ac)&&L3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class B3{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Um(e)}Cc(e,n,s,a=!1){return new F0({Ac:e,methodName:n,Dc:s,path:gn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(t){const e=t._freezeSettings(),n=Um(t._databaseId);return new B3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function F3(t,e,n,s,a,l={}){const u=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);H0("Data must be an object, but it was:",u,s);const h=BI(s,u);let d,p;if(l.merge)d=new ts(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const g=[];for(const b of l.mergeFields){const E=bv(e,b,n);if(!u.contains(E))throw new be(ae.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);zI(g,E)||g.push(E)}d=new ts(g),p=u.fieldTransforms.filter((b=>d.covers(b.field)))}else d=null,p=u.fieldTransforms;return new U3(new Bn(h),d,p)}class Gm extends Hm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gm}}class q0 extends Hm{_toFieldTransform(e){return new PL(e.path,new Xc)}isEqual(e){return e instanceof q0}}function z3(t,e,n,s){const a=t.Cc(1,e,n);H0("Data must be an object, but it was:",a,s);const l=[],u=Bn.empty();Sa(s,((d,p)=>{const g=G0(e,d,n);p=xt(p);const b=a.yc(g);if(p instanceof Gm)l.push(g);else{const E=Th(p,b);E!=null&&(l.push(g),u.set(g,E))}}));const h=new ts(l);return new LI(u,h,a.fieldTransforms)}function q3(t,e,n,s,a,l){const u=t.Cc(1,e,n),h=[bv(e,s,n)],d=[a];if(l.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)h.push(bv(e,l[E])),d.push(l[E+1]);const p=[],g=Bn.empty();for(let E=h.length-1;E>=0;--E)if(!zI(p,h[E])){const S=h[E];let D=d[E];D=xt(D);const M=u.yc(S);if(D instanceof Gm)p.push(S);else{const k=Th(D,M);k!=null&&(p.push(S),g.set(S,k))}}const b=new ts(p);return new LI(g,b,u.fieldTransforms)}function H3(t,e,n,s=!1){return Th(n,t.Cc(s?4:3,e))}function Th(t,e){if(FI(t=xt(t)))return H0("Unsupported field value:",e,t),BI(t,e);if(t instanceof Hm)return(function(s,a){if(!UI(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let d=Th(h,a.wc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}})(t,e)}return(function(s,a){if((s=xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CL(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=gt.fromDate(s);return{timestampValue:em(a.serializer,l)}}if(s instanceof gt){const l=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:em(a.serializer,l)}}if(s instanceof bi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bs)return{bytesValue:sI(a.serializer,s._byteString)};if(s instanceof Ot){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:A0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ei)return(function(u,h){return{mapValue:{fields:{[DR]:{stringValue:PR},[Qd]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return w0(h.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Nm(s)}`)})(t,e)}function BI(t,e){const n={};return SR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(t,((s,a)=>{const l=Th(a,e.mc(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function FI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof bi||t instanceof bs||t instanceof Ot||t instanceof Hm||t instanceof Ei)}function H0(t,e,n){if(!FI(n)||!wR(n)){const s=Nm(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function bv(t,e,n){if((e=xt(e))instanceof qm)return e._internalPath;if(typeof e=="string")return G0(t,e);throw im("Field path arguments must be of type string or ",t,!1,void 0,n)}const G3=new RegExp("[~\\*/\\[\\]]");function G0(t,e,n){if(e.search(G3)>=0)throw im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qm(...e.split("."))._internalPath}catch{throw im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function im(t,e,n,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${s}`),u&&(d+=` in document ${a}`),d+=")"),new be(ae.INVALID_ARGUMENT,h+t+d)}function zI(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,s,a,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $3 extends qI{data(){return super.data()}}function $0(t,e){return typeof e=="string"?G0(t,e):e instanceof qm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}class W3 extends K0{}function ld(t,e,...n){let s=[];e instanceof K0&&s.push(e),s=s.concat(n),(function(l){const u=l.filter((d=>d instanceof W0)).length,h=l.filter((d=>d instanceof $m)).length;if(u>1||u>0&&h>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)t=a._apply(t);return t}class $m extends W3{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new $m(e,n,s)}_apply(e){const n=this._parse(e);return HI(e._query,n),new su(e.firestore,e.converter,uv(e._query,n))}_parse(e){const n=z0(e.firestore);return(function(l,u,h,d,p,g,b){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Zx(b,g);const D=[];for(const M of b)D.push(Xx(d,l,M));E={arrayValue:{values:D}}}else E=Xx(d,l,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Zx(b,g),E=H3(h,u,b,g==="in"||g==="not-in");return $t.create(p,g,E)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ud(t,e,n){const s=e,a=$0("where",t);return $m._create(a,s,n)}class W0 extends K0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new W0(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const d of h)HI(u,d),u=uv(u,d)})(e._query,n),new su(e.firestore,e.converter,uv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Xx(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BR(e)&&n.indexOf("/")!==-1)throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!Ce.isDocumentKey(s))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mx(t,new Ce(s))}if(n instanceof Ot)return mx(t,n._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(n)}.`)}function Zx(t,e){if(!Array.isArray(t)||t.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HI(t,e){const n=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Y3{convertValue(e,n="none"){switch(ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Sa(e,((a,l)=>{s[a]=this.convertValue(l,n)})),s}convertVectorValue(e){const n=e.fields?.[Qd].arrayValue?.values?.map((s=>Vt(s.doubleValue)));return new Ei(n)}convertGeoPoint(e){return new bi(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Mm(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const n=ma(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);st(uI(s),9688,{name:e});const a=new Yc(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return a.isEqual(n)||dr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends qI{constructor(e,n,s,a,l,u){super(e,n,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field($0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:Kt("string",mo._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Nd extends mo{data(e={}){return super.data(e)}}class kl{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new xc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Nd(this._firestore,this._userDataWriter,s.key,s,new xc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const d=new Nd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new xc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const d=new Nd(a._firestore,a._userDataWriter,h.doc.key,h.doc,new xc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,g=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),g=u.indexOf(h.doc.key)),{type:X3(h.type),doc:d,oldIndex:p,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=kl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=g0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){t=mr(t,Ot);const e=mr(t.firestore,Eh);return M3(B0(e),t._key).then((n=>Z3(e,t,n)))}kl._jsonSchemaVersion="firestore/querySnapshot/1.0",kl._jsonSchema={type:Kt("string",kl._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class GI extends Y3{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function cd(t){t=mr(t,su);const e=mr(t.firestore,Eh),n=B0(e),s=new GI(e);return K3(t._query),V3(n,t._query).then((a=>new kl(e,s,t,a)))}function hd(t,e,n){t=mr(t,Ot);const s=mr(t.firestore,Eh),a=Q3(t.converter,e);return $I(s,[F3(z0(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,vi.none())])}function eS(t,e,n,...s){t=mr(t,Ot);const a=mr(t.firestore,Eh),l=z0(a);let u;return u=typeof(e=xt(e))=="string"||e instanceof qm?q3(l,"updateDoc",t._key,e,n,s):z3(l,"updateDoc",t._key,e),$I(a,[u.toMutation(t._key,vi.exists(!0))])}function $I(t,e){return(function(s,a){const l=new lr;return s.asyncQueue.enqueueAndForget((async()=>E3(await P3(s),a,l))),l.promise})(B0(t),e)}function Z3(t,e,n){const s=n.docs.get(e._key),a=new GI(t);return new mo(t,a,e._key,s,new xc(n.hasPendingWrites,n.fromCache),e.converter)}function tS(){return new q0("serverTimestamp")}(function(e,n=!0){(function(a){Jl=a})(Xl),Us(new Ts("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new Eh(new Fj(s.getProvider("auth-internal")),new Hj(u,s.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(p.options.projectId,g)})(u,a),u);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),zn(tx,nx,e),zn(tx,nx,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n,s,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,es(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||s.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="us-central1";class eU{constructor(e,n,s,a,l=Ev,u=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new J3(e,n,s,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Ev}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function tU(t,e,n){const s=So(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(i0(t.emulatorOrigin+"/backends"),r0("Functions",!0))}const nS="@firebase/functions",sS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="auth-internal",sU="app-check-internal",iU="messaging-internal";function rU(t){const e=(n,{instanceIdentifier:s})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(nU),u=n.getProvider(iU),h=n.getProvider(sU);return new eU(a,l,u,h,s)};Us(new Ts(KI,e,"PUBLIC").setMultipleInstances(!0)),zn(nS,sS,t),zn(nS,sS,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t=Am(),e=Ev){const s=wa(xt(t),KI).getImmediate({identifier:e}),a=T1("functions");return a&&oU(s,...a),s}function oU(t,e,n){tU(xt(t),e,n)}rU();const WI="@firebase/installations",Y0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1e4,QI=`w:${Y0}`,XI="FIS_v2",lU="https://firebaseinstallations.googleapis.com/v1",uU=3600*1e3,cU="installations",hU="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wo=new Ao(cU,hU,fU);function ZI(t){return t instanceof Hs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI({projectId:t}){return`${lU}/projects/${t}/installations`}function eC(t){return{token:t.token,requestStatus:2,expiresIn:mU(t.expiresIn),creationTime:Date.now()}}async function tC(t,e){const s=(await e.json()).error;return wo.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function nC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function dU(t,{refreshToken:e}){const n=nC(t);return n.append("Authorization",pU(e)),n}async function sC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function mU(t){return Number(t.replace("s","000"))}function pU(t){return`${XI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=JI(t),a=nC(t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:n,authVersion:XI,appId:t.appId,sdkVersion:QI},h={method:"POST",headers:a,body:JSON.stringify(u)},d=await sC(()=>fetch(s,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:eC(p.authToken)}}else throw await tC("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=/^[cdef][\w-]{21}$/,Tv="";function _U(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bU(t);return vU.test(n)?n:Tv}catch{return Tv}}function bU(t){return yU(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Map;function aC(t,e){const n=Km(t);oC(n,e),EU(n,e)}function oC(t,e){const n=rC.get(t);if(n)for(const s of n)s(e)}function EU(t,e){const n=TU();n&&n.postMessage({key:t,fid:e}),wU()}let uo=null;function TU(){return!uo&&"BroadcastChannel"in self&&(uo=new BroadcastChannel("[Firebase] FID Change"),uo.onmessage=t=>{oC(t.data.key,t.data.fid)}),uo}function wU(){rC.size===0&&uo&&(uo.close(),uo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="firebase-installations-database",SU=1,xo="firebase-installations-store";let _y=null;function Q0(){return _y||(_y=N1(xU,SU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xo)}}})),_y}async function rm(t,e){const n=Km(t),a=(await Q0()).transaction(xo,"readwrite"),l=a.objectStore(xo),u=await l.get(n);return await l.put(e,n),await a.done,(!u||u.fid!==e.fid)&&aC(t,e.fid),e}async function lC(t){const e=Km(t),s=(await Q0()).transaction(xo,"readwrite");await s.objectStore(xo).delete(e),await s.done}async function Wm(t,e){const n=Km(t),a=(await Q0()).transaction(xo,"readwrite"),l=a.objectStore(xo),u=await l.get(n),h=e(u);return h===void 0?await l.delete(n):await l.put(h,n),await a.done,h&&(!u||u.fid!==h.fid)&&aC(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X0(t){let e;const n=await Wm(t.appConfig,s=>{const a=AU(s),l=RU(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===Tv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function AU(t){const e=t||{fid:_U(),registrationStatus:0};return uC(e)}function RU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(wo.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=IU(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:CU(t)}:{installationEntry:e}}async function IU(t,e){try{const n=await gU(t,e);return rm(t.appConfig,n)}catch(n){throw ZI(n)&&n.customData.serverCode===409?await lC(t.appConfig):await rm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function CU(t){let e=await iS(t.appConfig);for(;e.registrationStatus===1;)await iC(100),e=await iS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await X0(t);return s||n}return e}function iS(t){return Wm(t,e=>{if(!e)throw wo.create("installation-not-found");return uC(e)})}function uC(t){return NU(t)?{fid:t.fid,registrationStatus:0}:t}function NU(t){return t.registrationStatus===1&&t.registrationTime+YI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU({appConfig:t,heartbeatServiceProvider:e},n){const s=PU(t,n),a=dU(t,n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:QI,appId:t.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},d=await sC(()=>fetch(s,h));if(d.ok){const p=await d.json();return eC(p)}else throw await tC("Generate Auth Token",d)}function PU(t,{fid:e}){return`${JI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(t,e=!1){let n;const s=await Wm(t.appConfig,l=>{if(!cC(l))throw wo.create("not-registered");const u=l.authToken;if(!e&&OU(u))return l;if(u.requestStatus===1)return n=MU(t,e),l;{if(!navigator.onLine)throw wo.create("app-offline");const h=jU(l);return n=VU(t,h),h}});return n?await n:s.authToken}async function MU(t,e){let n=await rS(t.appConfig);for(;n.authToken.requestStatus===1;)await iC(100),n=await rS(t.appConfig);const s=n.authToken;return s.requestStatus===0?Z0(t,e):s}function rS(t){return Wm(t,e=>{if(!cC(e))throw wo.create("not-registered");const n=e.authToken;return LU(n)?{...e,authToken:{requestStatus:0}}:e})}async function VU(t,e){try{const n=await DU(t,e),s={...e,authToken:n};return await rm(t.appConfig,s),n}catch(n){if(ZI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lC(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await rm(t.appConfig,s)}throw n}}function cC(t){return t!==void 0&&t.registrationStatus===2}function OU(t){return t.requestStatus===2&&!kU(t)}function kU(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uU}function jU(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function LU(t){return t.requestStatus===1&&t.requestTime+YI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t){const e=t,{installationEntry:n,registrationPromise:s}=await X0(e);return s?s.catch(console.error):Z0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e=!1){const n=t;return await FU(n),(await Z0(n,e)).token}async function FU(t){const{registrationPromise:e}=await X0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){if(!t||!t.options)throw by("App Configuration");if(!t.name)throw by("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw by(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function by(t){return wo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="installations",qU="installations-internal",HU=t=>{const e=t.getProvider("app").getImmediate(),n=zU(e),s=wa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},GU=t=>{const e=t.getProvider("app").getImmediate(),n=wa(e,hC).getImmediate();return{getId:()=>UU(n),getToken:a=>BU(n,a)}};function $U(){Us(new Ts(hC,HU,"PUBLIC")),Us(new Ts(qU,GU,"PRIVATE"))}$U();zn(WI,Y0);zn(WI,Y0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="analytics",KU="firebase_id",WU="origin",YU=60*1e3,QU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Sm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ss=new Ao("analytics","Analytics",XU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){if(!t.startsWith(J0)){const e=ss.create("invalid-gtag-resource",{gtagURL:t});return qn.warn(e.message),""}return t}function fC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function JU(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function e5(t,e){const n=JU("firebase-js-sdk-policy",{createScriptURL:ZU}),s=document.createElement("script"),a=`${J0}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function t5(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function n5(t,e,n,s,a,l){const u=s[a];try{if(u)await e[u];else{const d=(await fC(n)).find(p=>p.measurementId===a);d&&await e[d.appId]}}catch(h){qn.error(h)}t("config",a,l)}async function s5(t,e,n,s,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await fC(n);for(const d of u){const p=h.find(b=>b.measurementId===d),g=p&&e[p.appId];if(g)l.push(g);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",s,a||{})}catch(l){qn.error(l)}}function i5(t,e,n,s){async function a(l,...u){try{if(l==="event"){const[h,d]=u;await s5(t,e,n,h,d)}else if(l==="config"){const[h,d]=u;await n5(t,e,n,s,h,d)}else if(l==="consent"){const[h,d]=u;t("consent",h,d)}else if(l==="get"){const[h,d,p]=u;t("get",h,d,p)}else if(l==="set"){const[h]=u;t("set",h)}else t(l,...u)}catch(h){qn.error(h)}}return a}function r5(t,e,n,s,a){let l=function(...u){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=i5(l,t,e,n),{gtagCore:l,wrappedGtag:window[a]}}function a5(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(J0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=30,l5=1e3;class u5{constructor(e={},n=l5){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dC=new u5;function c5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function h5(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:c5(n)},a=QU.replace("{app-id}",e),l=await fetch(a,s);if(l.status!==200&&l.status!==304){let u="";try{const h=await l.json();h.error?.message&&(u=h.error.message)}catch{}throw ss.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function f5(t,e=dC,n){const{appId:s,apiKey:a,measurementId:l}=t.options;if(!s)throw ss.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw ss.create("no-api-key")}const u=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new p5;return setTimeout(async()=>{h.abort()},YU),mC({appId:s,apiKey:a,measurementId:l},u,h,e)}async function mC(t,{throttleEndTimeMillis:e,backoffCount:n},s,a=dC){const{appId:l,measurementId:u}=t;try{await d5(s,e)}catch(h){if(u)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:u};throw h}try{const h=await h5(t);return a.deleteThrottleMetadata(l),h}catch(h){const d=h;if(!m5(d)){if(a.deleteThrottleMetadata(l),u)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:u};throw h}const p=Number(d?.customData?.httpStatus)===503?Aw(n,a.intervalMillis,o5):Aw(n,a.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return a.setThrottleMetadata(l,g),qn.debug(`Calling attemptFetch again in ${p} millis`),mC(t,g,s,a)}}function d5(t,e){return new Promise((n,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(l),s(ss.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function m5(t){if(!(t instanceof Hs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class p5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function g5(t,e,n,s,a){if(a&&a.global){t("event",n,s);return}else{const l=await e,u={...s,send_to:l};t("event",n,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(){if(A1())try{await R1()}catch(t){return qn.warn(ss.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return qn.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function v5(t,e,n,s,a,l,u){const h=f5(t);h.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>qn.error(E)),e.push(h);const d=y5().then(E=>{if(E)return s.getId()}),[p,g]=await Promise.all([h,d]);a5(l)||e5(l,p.measurementId),a("js",new Date);const b=u?.config??{};return b[WU]="firebase",b.update=!0,g!=null&&(b[KU]=g),a("config",p.measurementId,b),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.app=e}_delete(){return delete Pc[this.app.options.appId],Promise.resolve()}}let Pc={},aS=[];const oS={};let Ey="dataLayer",b5="gtag",lS,pC,uS=!1;function E5(){const t=[];if(S1()&&t.push("This is a browser extension environment."),tO()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,a)=>`(${a+1}) ${s}`).join(" "),n=ss.create("invalid-analytics-context",{errorInfo:e});qn.warn(n.message)}}function T5(t,e,n){E5();const s=t.options.appId;if(!s)throw ss.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ss.create("no-api-key");if(Pc[s]!=null)throw ss.create("already-exists",{id:s});if(!uS){t5(Ey);const{wrappedGtag:l,gtagCore:u}=r5(Pc,aS,oS,Ey,b5);pC=l,lS=u,uS=!0}return Pc[s]=v5(t,aS,oS,e,lS,Ey,n),new _5(t)}function w5(t=Am()){t=xt(t);const e=wa(t,am);return e.isInitialized()?e.getImmediate():x5(t)}function x5(t,e={}){const n=wa(t,am);if(n.isInitialized()){const a=n.getImmediate();if(fa(e,n.getOptions()))return a;throw ss.create("already-initialized")}return n.initialize({options:e})}function S5(t,e,n,s){t=xt(t),g5(pC,Pc[t.app.options.appId],e,n,s).catch(a=>qn.error(a))}const cS="@firebase/analytics",hS="0.10.18";function A5(){Us(new Ts(am,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return T5(s,a,n)},"PUBLIC")),Us(new Ts("analytics-internal",t,"PRIVATE")),zn(cS,hS),zn(cS,hS,"esm2020");function t(e){try{const n=e.getProvider(am).getImmediate();return{logEvent:(s,a,l)=>S5(n,s,a,l)}}catch(n){throw ss.create("interop-component-reg-failed",{reason:n})}}}A5();const R5={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""},Ym=D1(R5),Dd=Oj(Ym),Ds=k3(Ym);aU(Ym);typeof window<"u"&&w5(Ym);class yn{static async createUserProfile(e,n){const s=Zr(Ds,"users",e),a={id:e,...n,createdAt:new Date};return await hd(s,{...a,createdAt:tS()}),a}static async getUserProfile(e){const n=Zr(Ds,"users",e),s=await Jx(n);if(s.exists()){const a=s.data();return{...a,id:s.id,createdAt:a.createdAt?.toDate()||new Date,subscriptionEndDate:a.subscriptionEndDate?.toDate()}}return null}static async updateUserProfile(e,n){const s=Zr(Ds,"users",e),a={...n};n.subscriptionEndDate&&(a.subscriptionEndDate=n.subscriptionEndDate),await eS(s,a)}static async getUserInnermosts(e){const n=od(Ds,"innermosts"),s=ld(n,ud("partnerA","==",e)),a=ld(n,ud("partnerB","==",e)),[l,u]=await Promise.all([cd(s),cd(a)]),h=[];return[...l.docs,...u.docs].forEach(d=>{const p=d.data();h.push({...p,id:d.id,createdAt:p.createdAt?.toDate()||new Date})}),h}static async createInnermost(e){const n=Zr(od(Ds,"innermosts")),s={...e,id:n.id,createdAt:new Date};return await hd(n,{...s,createdAt:tS()}),s}static async getWillingBox(e){const n=Zr(Ds,"willingBoxes",e),s=await Jx(n);if(s.exists()){const a=s.data();return{...a,id:s.id,lockedAt:a.lockedAt?.toDate()}}return null}static async saveWillingBox(e){const n=Zr(Ds,"willingBoxes",e.id),s={...e,lockedAt:e.lockedAt||null};await hd(n,s)}static async getWeeklyScores(e){const n=od(Ds,"weeklyScores"),s=ld(n,ud("innermostId","==",e)),a=await cd(s),l=[];return a.docs.forEach(u=>{const h=u.data();l.push({...h,id:u.id,completedAt:h.completedAt?.toDate()})}),l.sort((u,h)=>u.weekNumber-h.weekNumber)}static async saveWeeklyScore(e){const n=Zr(Ds,"weeklyScores",e.id),s={...e,completedAt:e.completedAt||null};await hd(n,s)}static async updateSubscriptionStatus(e,n,s){const a=Zr(Ds,"users",e),l={subscriptionStatus:n};s&&(l.subscriptionEndDate=s),await eS(a,l)}static async isEmailRegistered(e){const n=od(Ds,"users"),s=ld(n,ud("email","==",e.toLowerCase()));return!(await cd(s)).empty}}const Ht=g1()(y1(kV((t,e)=>({user:null,firebaseUser:null,isLoading:!1,isInitialized:!1,error:null,setUser:n=>t({user:n}),setFirebaseUser:n=>t({firebaseUser:n}),setLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),setInitialized:n=>t({isInitialized:n}),clearError:()=>t({error:null}),login:async(n,s)=>{try{t({isLoading:!0,error:null});const a=await v4(Dd,n,s)}catch(a){const l=a instanceof Error?a.message:"Login failed";throw t({error:l}),a}finally{t({isLoading:!1})}},signup:async(n,s,a,l,u)=>{try{t({isLoading:!0,error:null});const h=await y4(Dd,n,s);await b4(h.user,{displayName:a});const d=await yn.createUserProfile(h.user.uid,{email:h.user.email,displayName:a,age:l,gender:u,activeInnermosts:[],subscriptionStatus:"free"});t({user:d})}catch(h){const d=h instanceof Error?h.message:"Signup failed";throw t({error:d}),h}finally{t({isLoading:!1})}},logout:async()=>{try{t({isLoading:!0,error:null}),await x4(Dd),t({user:null,firebaseUser:null})}catch(n){const s=n instanceof Error?n.message:"Logout failed";throw t({error:s}),n}finally{t({isLoading:!1})}}}),{name:"auth-storage",partialize:t=>({user:t.user,isInitialized:t.isInitialized})}),{name:"auth-store"}));let fS=null;const I5=()=>{if(fS)return;console.log("[AuthStore] Starting auth initialization...");const t=setTimeout(()=>{console.error("[AuthStore] Auth initialization timeout - forcing initialized state"),Ht.getState().setInitialized(!0),Ht.getState().setError("Authentication initialization timed out")},5e3);fS=w4(Dd,async e=>{if(clearTimeout(t),console.log("[AuthStore] Auth state changed:",e?.email||"no user"),Ht.getState().setFirebaseUser(e),e)try{const n=await yn.getUserProfile(e.uid);n?(console.log("[AuthStore] User profile loaded:",n.email),Ht.getState().setUser(n)):(console.warn("[AuthStore] User exists in Auth but not in Firestore"),Ht.getState().setUser(null))}catch(n){console.error("[AuthStore] Error fetching user profile:",n),Ht.getState().setError("Failed to load user profile"),Ht.getState().setUser(null)}else console.log("[AuthStore] No authenticated user"),Ht.getState().setUser(null);console.log("[AuthStore] Setting initialized to true"),Ht.getState().setInitialized(!0)})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),dS=t=>{const e=N5(t);return e.charAt(0).toUpperCase()+e.slice(1)},gC=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),D5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},d)=>O.createElement("svg",{ref:d,...P5,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:gC("lucide",a),...!l&&!D5(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,g])=>O.createElement(p,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(t,e)=>{const n=O.forwardRef(({className:s,...a},l)=>O.createElement(M5,{ref:l,iconNode:e,className:gC(`lucide-${C5(dS(t))}`,`lucide-${t}`,s),...a}));return n.displayName=dS(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],po=lt("arrow-left",V5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],k5=lt("arrow-right",O5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],L5=lt("bell",j5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],e_=lt("calendar",U5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Al=lt("check",B5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],z5=lt("circle-check-big",F5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mS=lt("clock",q5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],G5=lt("credit-card",H5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],K5=lt("crown",$5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Y5=lt("download",W5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],om=lt("eye-off",Q5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lm=lt("eye",X5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ha=lt("heart",Z5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],e9=lt("loader-circle",J5);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wv=lt("lock",t9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],yC=lt("mail",n9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],i9=lt("pen",s9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eh=lt("plus",r9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],o9=lt("save",a9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],t_=lt("settings",l9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],c9=lt("shield",u9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],f9=lt("smartphone",h9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],go=lt("star",d9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vC=lt("trash-2",m9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],g9=lt("triangle-alert",p9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Mc=lt("trophy",y9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_C=lt("user",v9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gl=lt("users",_9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],E9=lt("x",b9),bC=g1()(y1((t,e)=>({innermosts:[],activeInnermost:null,pendingInvitations:[],willingBoxes:{},weeklyScores:{},isLoading:!1,error:null,setInnermosts:n=>t({innermosts:n}),setActiveInnermost:n=>t({activeInnermost:n}),setPendingInvitations:n=>t({pendingInvitations:n}),setWillingBox:(n,s)=>t(a=>({willingBoxes:{...a.willingBoxes,[n]:s}})),setWeeklyScores:(n,s)=>t(a=>({weeklyScores:{...a.weeklyScores,[n]:s}})),setLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),addInnermost:n=>t(s=>({innermosts:[...s.innermosts,n]})),removeInnermost:n=>t(s=>({innermosts:s.innermosts.filter(a=>a.id!==n),activeInnermost:s.activeInnermost?.id===n?null:s.activeInnermost})),updateInnermost:(n,s)=>t(a=>({innermosts:a.innermosts.map(l=>l.id===n?{...l,...s}:l),activeInnermost:a.activeInnermost?.id===n?{...a.activeInnermost,...s}:a.activeInnermost})),canAddInnermost:()=>{const{innermosts:n}=e();return n.length<3},addInvitation:n=>t(s=>({pendingInvitations:[...s.pendingInvitations,n]})),updateInvitation:(n,s)=>t(a=>({pendingInvitations:a.pendingInvitations.map(l=>l.id===n?{...l,...s}:l)})),removeInvitation:n=>t(s=>({pendingInvitations:s.pendingInvitations.filter(a=>a.id!==n)})),getWillingBox:n=>{const{willingBoxes:s}=e();return s[n]||null},getWeeklyScores:n=>{const{weeklyScores:s}=e();return s[n]||[]},getCurrentWeek:n=>e().innermosts.find(a=>a.id===n)?.currentWeek||1}),{name:"innermost-store"})),n_=O.createContext({});function s_(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const i_=typeof window<"u",EC=i_?O.useLayoutEffect:O.useEffect,Qm=O.createContext(null);function r_(t,e){t.indexOf(e)===-1&&t.push(e)}function a_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gr=(t,e,n)=>n>e?e:n<t?t:n;let o_=()=>{};const yr={},TC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function wC(t){return typeof t=="object"&&t!==null}const xC=t=>/^0[^.\s]+$/u.test(t);function l_(t){let e;return()=>(e===void 0&&(e=t()),e)}const Es=t=>t,T9=(t,e)=>n=>e(t(n)),wh=(...t)=>t.reduce(T9),th=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class u_{constructor(){this.subscriptions=[]}add(e){return r_(this.subscriptions,e),()=>a_(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let l=0;l<a;l++){const u=this.subscriptions[l];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ti=t=>t*1e3,wi=t=>t/1e3;function SC(t,e){return e?t*(1e3/e):0}const AC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,w9=1e-7,x9=12;function S9(t,e,n,s,a){let l,u,h=0;do u=e+(n-e)/2,l=AC(u,s,a)-t,l>0?n=u:e=u;while(Math.abs(l)>w9&&++h<x9);return u}function xh(t,e,n,s){if(t===e&&n===s)return Es;const a=l=>S9(l,0,1,t,n);return l=>l===0||l===1?l:AC(a(l),e,s)}const RC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IC=t=>e=>1-t(1-e),CC=xh(.33,1.53,.69,.99),c_=IC(CC),NC=RC(c_),DC=t=>(t*=2)<1?.5*c_(t):.5*(2-Math.pow(2,-10*(t-1))),h_=t=>1-Math.sin(Math.acos(t)),PC=IC(h_),MC=RC(h_),A9=xh(.42,0,1,1),R9=xh(0,0,.58,1),VC=xh(.42,0,.58,1),I9=t=>Array.isArray(t)&&typeof t[0]!="number",OC=t=>Array.isArray(t)&&typeof t[0]=="number",C9={linear:Es,easeIn:A9,easeInOut:VC,easeOut:R9,circIn:h_,circInOut:MC,circOut:PC,backIn:c_,backInOut:NC,backOut:CC,anticipate:DC},N9=t=>typeof t=="string",pS=t=>{if(OC(t)){o_(t.length===4);const[e,n,s,a]=t;return xh(e,n,s,a)}else if(N9(t))return C9[t];return t},fd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function D9(t,e){let n=new Set,s=new Set,a=!1,l=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(g){u.has(g)&&(p.schedule(g),t()),g(h)}const p={schedule:(g,b=!1,E=!1)=>{const D=E&&a?n:s;return b&&u.add(g),D.has(g)||D.add(g),g},cancel:g=>{s.delete(g),u.delete(g)},process:g=>{if(h=g,a){l=!0;return}a=!0,[n,s]=[s,n],n.forEach(d),n.clear(),a=!1,l&&(l=!1,p.process(g))}};return p}const P9=40;function kC(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=fd.reduce((q,se)=>(q[se]=D9(l),q),{}),{setup:h,read:d,resolveKeyframes:p,preUpdate:g,update:b,preRender:E,render:S,postRender:D}=u,M=()=>{const q=yr.useManualTiming?a.timestamp:performance.now();n=!1,yr.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(q-a.timestamp,P9),1)),a.timestamp=q,a.isProcessing=!0,h.process(a),d.process(a),p.process(a),g.process(a),b.process(a),E.process(a),S.process(a),D.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(M))},k=()=>{n=!0,s=!0,a.isProcessing||t(M)};return{schedule:fd.reduce((q,se)=>{const X=u[se];return q[se]=(ce,j=!1,A=!1)=>(n||k(),X.schedule(ce,j,A)),q},{}),cancel:q=>{for(let se=0;se<fd.length;se++)u[fd[se]].cancel(q)},state:a,steps:u}}const{schedule:bt,cancel:_a,state:dn,steps:Ty}=kC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Es,!0);let Pd;function M9(){Pd=void 0}const Fn={now:()=>(Pd===void 0&&Fn.set(dn.isProcessing||yr.useManualTiming?dn.timestamp:performance.now()),Pd),set:t=>{Pd=t,queueMicrotask(M9)}},jC=t=>e=>typeof e=="string"&&e.startsWith(t),f_=jC("--"),V9=jC("var(--"),d_=t=>V9(t)?O9.test(t.split("/*")[0].trim()):!1,O9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nh={...iu,transform:t=>gr(0,1,t)},dd={...iu,default:1},Vc=t=>Math.round(t*1e5)/1e5,m_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function k9(t){return t==null}const j9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,p_=(t,e)=>n=>!!(typeof n=="string"&&j9.test(n)&&n.startsWith(t)||e&&!k9(n)&&Object.prototype.hasOwnProperty.call(n,e)),LC=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,l,u,h]=s.match(m_);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},L9=t=>gr(0,255,t),wy={...iu,transform:t=>Math.round(L9(t))},co={test:p_("rgb","red"),parse:LC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+wy.transform(t)+", "+wy.transform(e)+", "+wy.transform(n)+", "+Vc(nh.transform(s))+")"};function U9(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const xv={test:p_("#"),parse:U9,transform:co.transform},Sh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Jr=Sh("deg"),xi=Sh("%"),je=Sh("px"),B9=Sh("vh"),F9=Sh("vw"),gS={...xi,parse:t=>xi.parse(t)/100,transform:t=>xi.transform(t*100)},Rl={test:p_("hsl","hue"),parse:LC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+xi.transform(Vc(e))+", "+xi.transform(Vc(n))+", "+Vc(nh.transform(s))+")"},qt={test:t=>co.test(t)||xv.test(t)||Rl.test(t),parse:t=>co.test(t)?co.parse(t):Rl.test(t)?Rl.parse(t):xv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?co.transform(t):Rl.transform(t),getAnimatableNone:t=>{const e=qt.parse(t);return e.alpha=0,qt.transform(e)}},z9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function q9(t){return isNaN(t)&&typeof t=="string"&&(t.match(m_)?.length||0)+(t.match(z9)?.length||0)>0}const UC="number",BC="color",H9="var",G9="var(",yS="${}",$9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sh(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let l=0;const h=e.replace($9,d=>(qt.test(d)?(s.color.push(l),a.push(BC),n.push(qt.parse(d))):d.startsWith(G9)?(s.var.push(l),a.push(H9),n.push(d)):(s.number.push(l),a.push(UC),n.push(parseFloat(d))),++l,yS)).split(yS);return{values:n,split:h,indexes:s,types:a}}function FC(t){return sh(t).values}function zC(t){const{split:e,types:n}=sh(t),s=e.length;return a=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],a[u]!==void 0){const h=n[u];h===UC?l+=Vc(a[u]):h===BC?l+=qt.transform(a[u]):l+=a[u]}return l}}const K9=t=>typeof t=="number"?0:qt.test(t)?qt.getAnimatableNone(t):t;function W9(t){const e=FC(t);return zC(t)(e.map(K9))}const ba={test:q9,parse:FC,createTransformer:zC,getAnimatableNone:W9};function xy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y9({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,l=0,u=0;if(!e)a=l=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,d=2*n-h;a=xy(d,h,t+1/3),l=xy(d,h,t),u=xy(d,h,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function um(t,e){return n=>n>0?e:t}const wt=(t,e,n)=>t+(e-t)*n,Sy=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},Q9=[xv,co,Rl],X9=t=>Q9.find(e=>e.test(t));function vS(t){const e=X9(t);if(!e)return!1;let n=e.parse(t);return e===Rl&&(n=Y9(n)),n}const _S=(t,e)=>{const n=vS(t),s=vS(e);if(!n||!s)return um(t,e);const a={...n};return l=>(a.red=Sy(n.red,s.red,l),a.green=Sy(n.green,s.green,l),a.blue=Sy(n.blue,s.blue,l),a.alpha=wt(n.alpha,s.alpha,l),co.transform(a))},Sv=new Set(["none","hidden"]);function Z9(t,e){return Sv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function J9(t,e){return n=>wt(t,e,n)}function g_(t){return typeof t=="number"?J9:typeof t=="string"?d_(t)?um:qt.test(t)?_S:nB:Array.isArray(t)?qC:typeof t=="object"?qt.test(t)?_S:eB:um}function qC(t,e){const n=[...t],s=n.length,a=t.map((l,u)=>g_(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)n[u]=a[u](l);return n}}function eB(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=g_(t[a])(t[a],e[a]));return a=>{for(const l in s)n[l]=s[l](a);return n}}function tB(t,e){const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],u=t.indexes[l][s[l]],h=t.values[u]??0;n[a]=h,s[l]++}return n}const nB=(t,e)=>{const n=ba.createTransformer(e),s=sh(t),a=sh(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?Sv.has(t)&&!a.values.length||Sv.has(e)&&!s.values.length?Z9(t,e):wh(qC(tB(s,a),a.values),n):um(t,e)};function HC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):g_(t)(t,e)}const sB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>bt.update(e,n),stop:()=>_a(e),now:()=>dn.isProcessing?dn.timestamp:Fn.now()}},GC=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)s+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},cm=2e4;function y_(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<cm;)e+=n,s=t.next(e);return e>=cm?1/0:e}function iB(t,e=100,n){const s=n({...t,keyframes:[0,e]}),a=Math.min(y_(s),cm);return{type:"keyframes",ease:l=>s.next(a*l).value/e,duration:wi(a)}}const rB=5;function $C(t,e,n){const s=Math.max(e-rB,0);return SC(n-t(s),e-s)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ay=.001;function aB({duration:t=Ct.duration,bounce:e=Ct.bounce,velocity:n=Ct.velocity,mass:s=Ct.mass}){let a,l,u=1-e;u=gr(Ct.minDamping,Ct.maxDamping,u),t=gr(Ct.minDuration,Ct.maxDuration,wi(t)),u<1?(a=p=>{const g=p*u,b=g*t,E=g-n,S=Av(p,u),D=Math.exp(-b);return Ay-E/S*D},l=p=>{const b=p*u*t,E=b*n+n,S=Math.pow(u,2)*Math.pow(p,2)*t,D=Math.exp(-b),M=Av(Math.pow(p,2),u);return(-a(p)+Ay>0?-1:1)*((E-S)*D)/M}):(a=p=>{const g=Math.exp(-p*t),b=(p-n)*t+1;return-Ay+g*b},l=p=>{const g=Math.exp(-p*t),b=(n-p)*(t*t);return g*b});const h=5/t,d=lB(a,l,h);if(t=Ti(t),isNaN(d))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:t};{const p=Math.pow(d,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:t}}}const oB=12;function lB(t,e,n){let s=n;for(let a=1;a<oB;a++)s=s-t(s)/e(s);return s}function Av(t,e){return t*Math.sqrt(1-e*e)}const uB=["duration","bounce"],cB=["stiffness","damping","mass"];function bS(t,e){return e.some(n=>t[n]!==void 0)}function hB(t){let e={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...t};if(!bS(t,cB)&&bS(t,uB))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,l=2*gr(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Ct.mass,stiffness:a,damping:l}}else{const n=aB(t);e={...e,...n,mass:Ct.mass},e.isResolvedFromDuration=!0}return e}function hm(t=Ct.visualDuration,e=Ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:l},{stiffness:d,damping:p,mass:g,duration:b,velocity:E,isResolvedFromDuration:S}=hB({...n,velocity:-wi(n.velocity||0)}),D=E||0,M=p/(2*Math.sqrt(d*g)),k=u-l,V=wi(Math.sqrt(d/g)),P=Math.abs(k)<5;s||(s=P?Ct.restSpeed.granular:Ct.restSpeed.default),a||(a=P?Ct.restDelta.granular:Ct.restDelta.default);let q;if(M<1){const X=Av(V,M);q=ce=>{const j=Math.exp(-M*V*ce);return u-j*((D+M*V*k)/X*Math.sin(X*ce)+k*Math.cos(X*ce))}}else if(M===1)q=X=>u-Math.exp(-V*X)*(k+(D+V*k)*X);else{const X=V*Math.sqrt(M*M-1);q=ce=>{const j=Math.exp(-M*V*ce),A=Math.min(X*ce,300);return u-j*((D+M*V*k)*Math.sinh(A)+X*k*Math.cosh(A))/X}}const se={calculatedDuration:S&&b||null,next:X=>{const ce=q(X);if(S)h.done=X>=b;else{let j=X===0?D:0;M<1&&(j=X===0?Ti(D):$C(q,X,ce));const A=Math.abs(j)<=s,N=Math.abs(u-ce)<=a;h.done=A&&N}return h.value=h.done?u:ce,h},toString:()=>{const X=Math.min(y_(se),cm),ce=GC(j=>se.next(X*j).value,X,30);return X+"ms "+ce},toTransition:()=>{}};return se}hm.applyToOptions=t=>{const e=iB(t,100,hm);return t.ease=e.ease,t.duration=Ti(e.duration),t.type="keyframes",t};function Rv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:d,restDelta:p=.5,restSpeed:g}){const b=t[0],E={done:!1,value:b},S=A=>h!==void 0&&A<h||d!==void 0&&A>d,D=A=>h===void 0?d:d===void 0||Math.abs(h-A)<Math.abs(d-A)?h:d;let M=n*e;const k=b+M,V=u===void 0?k:u(k);V!==k&&(M=V-b);const P=A=>-M*Math.exp(-A/s),q=A=>V+P(A),se=A=>{const N=P(A),L=q(A);E.done=Math.abs(N)<=p,E.value=E.done?V:L};let X,ce;const j=A=>{S(E.value)&&(X=A,ce=hm({keyframes:[E.value,D(E.value)],velocity:$C(q,A,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:g}))};return j(0),{calculatedDuration:null,next:A=>{let N=!1;return!ce&&X===void 0&&(N=!0,se(A),j(A)),X!==void 0&&A>=X?ce.next(A-X):(!N&&se(A),E)}}}function fB(t,e,n){const s=[],a=n||yr.mix||HC,l=t.length-1;for(let u=0;u<l;u++){let h=a(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||Es:e;h=wh(d,h)}s.push(h)}return s}function dB(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const l=t.length;if(o_(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=fB(e,s,a),d=h.length,p=g=>{if(u&&g<t[0])return e[0];let b=0;if(d>1)for(;b<t.length-2&&!(g<t[b+1]);b++);const E=th(t[b],t[b+1],g);return h[b](E)};return n?g=>p(gr(t[0],t[l-1],g)):p}function mB(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=th(0,e,s);t.push(wt(n,1,a))}}function pB(t){const e=[0];return mB(e,t.length-1),e}function gB(t,e){return t.map(n=>n*e)}function yB(t,e){return t.map(()=>e||VC).splice(0,t.length-1)}function Oc({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=I9(s)?s.map(pS):pS(s),l={done:!1,value:e[0]},u=gB(n&&n.length===e.length?n:pB(e),t),h=dB(u,e,{ease:Array.isArray(a)?a:yB(e,a)});return{calculatedDuration:t,next:d=>(l.value=h(d),l.done=d>=t,l)}}const vB=t=>t!==null;function v_(t,{repeat:e,repeatType:n="loop"},s,a=1){const l=t.filter(vB),h=a<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const _B={decay:Rv,inertia:Rv,tween:Oc,keyframes:Oc,spring:hm};function KC(t){typeof t.type=="string"&&(t.type=_B[t.type])}class __{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const bB=t=>t/100;class b_ extends __{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Fn.now()&&this.tick(Fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;KC(e);const{type:n=Oc,repeat:s=0,repeatDelay:a=0,repeatType:l,velocity:u=0}=e;let{keyframes:h}=e;const d=n||Oc;d!==Oc&&typeof h[0]!="number"&&(this.mixKeyframes=wh(bB,HC(h[0],h[1])),h=[0,100]);const p=d({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=y_(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:a,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:g,repeat:b,repeatType:E,repeatDelay:S,type:D,onUpdate:M,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const V=this.currentTime-p*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?V<0:V>a;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let q=this.currentTime,se=s;if(b){const A=Math.min(this.currentTime,a)/h;let N=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&N--,N=Math.min(N,b+1),!!(N%2)&&(E==="reverse"?(L=1-L,S&&(L-=S/h)):E==="mirror"&&(se=u)),q=gr(0,1,L)*h}const X=P?{done:!1,value:g[0]}:se.next(q);l&&(X.value=l(X.value));let{done:ce}=X;!P&&d!==null&&(ce=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ce);return j&&D!==Rv&&(X.value=v_(g,this.options,k,this.speed)),M&&M(X.value),j&&this.finish(),X}then(e,n){return this.finished.then(e,n)}get duration(){return wi(this.calculatedDuration)}get time(){return wi(this.currentTime)}set time(e){e=Ti(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Fn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=sB,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function EB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ho=t=>t*180/Math.PI,Iv=t=>{const e=ho(Math.atan2(t[1],t[0]));return Cv(e)},TB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Iv,rotateZ:Iv,skewX:t=>ho(Math.atan(t[1])),skewY:t=>ho(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Cv=t=>(t=t%360,t<0&&(t+=360),t),ES=Iv,TS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),wB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TS,scaleY:wS,scale:t=>(TS(t)+wS(t))/2,rotateX:t=>Cv(ho(Math.atan2(t[6],t[5]))),rotateY:t=>Cv(ho(Math.atan2(-t[2],t[0]))),rotateZ:ES,rotate:ES,skewX:t=>ho(Math.atan(t[4])),skewY:t=>ho(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nv(t){return t.includes("scale")?1:0}function Dv(t,e){if(!t||t==="none")return Nv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=wB,a=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=TB,a=h}if(!a)return Nv(e);const l=s[e],u=a[1].split(",").map(SB);return typeof l=="function"?l(u):u[l]}const xB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Dv(n,e)};function SB(t){return parseFloat(t.trim())}const ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],au=new Set(ru),xS=t=>t===iu||t===je,AB=new Set(["x","y","z"]),RB=ru.filter(t=>!AB.has(t));function IB(t){const e=[];return RB.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const yo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Dv(e,"x"),y:(t,{transform:e})=>Dv(e,"y")};yo.translateX=yo.x;yo.translateY=yo.y;const vo=new Set;let Pv=!1,Mv=!1,Vv=!1;function WC(){if(Mv){const t=Array.from(vo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=IB(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([l,u])=>{s.getValue(l)?.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Mv=!1,Pv=!1,vo.forEach(t=>t.complete(Vv)),vo.clear()}function YC(){vo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mv=!0)})}function CB(){Vv=!0,YC(),WC(),Vv=!1}class E_{constructor(e,n,s,a,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(vo.add(this),Pv||(Pv=!0,bt.read(YC),bt.resolveKeyframes(WC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;if(e[0]===null){const l=a?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const h=s.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),a&&l===void 0&&a.set(e[0])}EB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vo.delete(this)}cancel(){this.state==="scheduled"&&(vo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NB=t=>t.startsWith("--");function DB(t,e,n){NB(e)?t.style.setProperty(e,n):t.style[e]=n}const PB=l_(()=>window.ScrollTimeline!==void 0),MB={};function VB(t,e){const n=l_(t);return()=>MB[e]??n()}const QC=VB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sc=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,SS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sc([0,.65,.55,1]),circOut:Sc([.55,0,1,.45]),backIn:Sc([.31,.01,.66,-.59]),backOut:Sc([.33,1.53,.69,.99])};function XC(t,e){if(t)return typeof t=="function"?QC()?GC(t,e):"ease-out":OC(t)?Sc(t):Array.isArray(t)?t.map(n=>XC(n,e)||SS.easeOut):SS[t]}function OB(t,e,n,{delay:s=0,duration:a=300,repeat:l=0,repeatType:u="loop",ease:h="easeOut",times:d}={},p=void 0){const g={[e]:n};d&&(g.offset=d);const b=XC(h,a);Array.isArray(b)&&(g.easing=b);const E={delay:s,duration:a,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return p&&(E.pseudoElement=p),t.animate(g,E)}function ZC(t){return typeof t=="function"&&"applyToOptions"in t}function kB({type:t,...e}){return ZC(t)&&QC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jB extends __{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:a,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:h,onComplete:d}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,o_(typeof e.type!="string");const p=kB(e);this.animation=OB(n,s,a,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=v_(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):DB(n,s,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return wi(Number(e))}get time(){return wi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ti(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&PB()?(this.animation.timeline=e,Es):n(this)}}const JC={anticipate:DC,backInOut:NC,circInOut:MC};function LB(t){return t in JC}function UB(t){typeof t.ease=="string"&&LB(t.ease)&&(t.ease=JC[t.ease])}const AS=10;class BB extends jB{constructor(e){UB(e),KC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:a,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new b_({...u,autoplay:!1}),d=Ti(this.finishedTime??this.time);n.setWithVelocity(h.sample(d-AS).value,h.sample(d).value,AS),h.stop()}}const RS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ba.test(t)||t==="0")&&!t.startsWith("url("));function FB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function zB(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=RS(a,e),h=RS(l,e);return!u||!h?!1:FB(t)||(n==="spring"||ZC(n))&&s}function Ov(t){t.duration=0,t.type}const qB=new Set(["opacity","clipPath","filter","transform"]),HB=l_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GB(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:l,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return HB()&&n&&qB.has(n)&&(n!=="transform"||!p)&&!d&&!s&&a!=="mirror"&&l!==0&&u!=="inertia"}const $B=40;class KB extends __{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:u="loop",keyframes:h,name:d,motionValue:p,element:g,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Fn.now();const E={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:l,repeatType:u,name:d,motionValue:p,element:g,...b},S=g?.KeyframeResolver||E_;this.keyframeResolver=new S(h,(D,M,k)=>this.onKeyframesResolved(D,M,E,!k),d,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,a){this.keyframeResolver=void 0;const{name:l,type:u,velocity:h,delay:d,isHandoff:p,onUpdate:g}=s;this.resolvedAt=Fn.now(),zB(e,l,u,h)||((yr.instantAnimations||!d)&&g?.(v_(e,s,n)),e[0]=e[e.length-1],Ov(s),s.repeat=0);const E={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>$B?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},S=!p&&GB(E)?new BB({...E,element:E.motionValue.owner.current}):new b_(E);S.finished.then(()=>this.notifyFinished()).catch(Es),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),CB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const WB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YB(t){const e=WB.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function eN(t,e,n=1){const[s,a]=YB(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return TC(u)?parseFloat(u):u}return d_(a)?eN(a,e,n+1):a}function T_(t,e){return t?.[e]??t?.default??t}const tN=new Set(["width","height","top","left","right","bottom",...ru]),QB={test:t=>t==="auto",parse:t=>t},nN=t=>e=>e.test(t),sN=[iu,je,xi,Jr,F9,B9,QB],IS=t=>sN.find(nN(t));function XB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xC(t):!0}const ZB=new Set(["brightness","contrast","saturate","opacity"]);function JB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(m_)||[];if(!s)return t;const a=n.replace(s,"");let l=ZB.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+a+")"}const eF=/\b([a-z-]*)\(.*?\)/gu,kv={...ba,getAnimatableNone:t=>{const e=t.match(eF);return e?e.map(JB).join(" "):t}},CS={...iu,transform:Math.round},tF={rotate:Jr,rotateX:Jr,rotateY:Jr,rotateZ:Jr,scale:dd,scaleX:dd,scaleY:dd,scaleZ:dd,skew:Jr,skewX:Jr,skewY:Jr,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:nh,originX:gS,originY:gS,originZ:je},w_={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je,...tF,zIndex:CS,fillOpacity:nh,strokeOpacity:nh,numOctaves:CS},nF={...w_,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:kv,WebkitFilter:kv},iN=t=>nF[t];function rN(t,e){let n=iN(t);return n!==kv&&(n=ba),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sF=new Set(["auto","none","0"]);function iF(t,e,n){let s=0,a;for(;s<t.length&&!a;){const l=t[s];typeof l=="string"&&!sF.has(l)&&sh(l).values.length&&(a=t[s]),s++}if(a&&n)for(const l of e)t[l]=rN(n,a)}class rF extends E_{constructor(e,n,s,a,l){super(e,n,s,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),d_(p))){const g=eN(p,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!tN.has(s)||e.length!==2)return;const[a,l]=e,u=IS(a),h=IS(l);if(u!==h)if(xS(u)&&xS(h))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else yo[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||XB(e[a]))&&s.push(a);s.length&&iF(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yo[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=yo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{e.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function aF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=n?.[t]??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const aN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function oN(t){return wC(t)&&"offsetHeight"in t}const NS=30,oF=t=>!isNaN(parseFloat(t));class lF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=Fn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new u_);const s=this.events[e].add(n);return e==="change"?()=>{s(),bt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>NS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,NS);return SC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $l(t,e){return new lF(t,e)}const{schedule:x_}=kC(queueMicrotask,!1),Ms={x:!1,y:!1};function lN(){return Ms.x||Ms.y}function uF(t){return t==="x"||t==="y"?Ms[t]?null:(Ms[t]=!0,()=>{Ms[t]=!1}):Ms.x||Ms.y?null:(Ms.x=Ms.y=!0,()=>{Ms.x=Ms.y=!1})}function uN(t,e){const n=aF(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function DS(t){return!(t.pointerType==="touch"||lN())}function cF(t,e,n={}){const[s,a,l]=uN(t,n),u=h=>{if(!DS(h))return;const{target:d}=h,p=e(d,h);if(typeof p!="function"||!d)return;const g=b=>{DS(b)&&(p(b),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,a)};return s.forEach(h=>{h.addEventListener("pointerenter",u,a)}),l}const cN=(t,e)=>e?t===e?!0:cN(t,e.parentElement):!1,S_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,hF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fF(t){return hF.has(t.tagName)||t.tabIndex!==-1}const Md=new WeakSet;function PS(t){return e=>{e.key==="Enter"&&t(e)}}function Ry(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dF=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=PS(()=>{if(Md.has(n))return;Ry(n,"down");const a=PS(()=>{Ry(n,"up")}),l=()=>Ry(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function MS(t){return S_(t)&&!lN()}function mF(t,e,n={}){const[s,a,l]=uN(t,n),u=h=>{const d=h.currentTarget;if(!MS(h))return;Md.add(d);const p=e(d,h),g=(S,D)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",E),Md.has(d)&&Md.delete(d),MS(S)&&typeof p=="function"&&p(S,{success:D})},b=S=>{g(S,d===window||d===document||n.useGlobalTarget||cN(d,S.target))},E=S=>{g(S,!1)};window.addEventListener("pointerup",b,a),window.addEventListener("pointercancel",E,a)};return s.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),oN(h)&&(h.addEventListener("focus",p=>dF(p,a)),!fF(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function hN(t){return wC(t)&&"ownerSVGElement"in t}function pF(t){return hN(t)&&t.tagName==="svg"}const xn=t=>!!(t&&t.getVelocity),gF=[...sN,qt,ba],yF=t=>gF.find(nN(t)),A_=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vF extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=oN(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _F({children:t,isPresent:e,anchorX:n,root:s}){const a=O.useId(),l=O.useRef(null),u=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=O.useContext(A_);return O.useInsertionEffect(()=>{const{width:d,height:p,top:g,left:b,right:E}=u.current;if(e||!l.current||!d||!p)return;const S=n==="left"?`left: ${b}`:`right: ${E}`;l.current.dataset.motionPopId=a;const D=document.createElement("style");h&&(D.nonce=h);const M=s??document.head;return M.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${p}px !important;
            ${S}px !important;
            top: ${g}px !important;
          }
        `),()=>{M.contains(D)&&M.removeChild(D)}},[e]),v.jsx(vF,{isPresent:e,childRef:l,sizeRef:u,children:O.cloneElement(t,{ref:l})})}const bF=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:u,anchorX:h,root:d})=>{const p=s_(EF),g=O.useId();let b=!0,E=O.useMemo(()=>(b=!1,{id:g,initial:e,isPresent:n,custom:a,onExitComplete:S=>{p.set(S,!0);for(const D of p.values())if(!D)return;s&&s()},register:S=>(p.set(S,!1),()=>p.delete(S))}),[n,p,s]);return l&&b&&(E={...E}),O.useMemo(()=>{p.forEach((S,D)=>p.set(D,!1))},[n]),O.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),u==="popLayout"&&(t=v.jsx(_F,{isPresent:n,anchorX:h,root:d,children:t})),v.jsx(Qm.Provider,{value:E,children:t})};function EF(){return new Map}function fN(t=!0){const e=O.useContext(Qm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,l=O.useId();O.useEffect(()=>{if(t)return a(l)},[t]);const u=O.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,u]:[!0]}const md=t=>t.key||"";function VS(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const R_=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:l="sync",propagate:u=!1,anchorX:h="left",root:d})=>{const[p,g]=fN(u),b=O.useMemo(()=>VS(t),[t]),E=u&&!p?[]:b.map(md),S=O.useRef(!0),D=O.useRef(b),M=s_(()=>new Map),[k,V]=O.useState(b),[P,q]=O.useState(b);EC(()=>{S.current=!1,D.current=b;for(let ce=0;ce<P.length;ce++){const j=md(P[ce]);E.includes(j)?M.delete(j):M.get(j)!==!0&&M.set(j,!1)}},[P,E.length,E.join("-")]);const se=[];if(b!==k){let ce=[...b];for(let j=0;j<P.length;j++){const A=P[j],N=md(A);E.includes(N)||(ce.splice(j,0,A),se.push(A))}return l==="wait"&&se.length&&(ce=se),q(VS(ce)),V(b),null}const{forceRender:X}=O.useContext(n_);return v.jsx(v.Fragment,{children:P.map(ce=>{const j=md(ce),A=u&&!p?!1:b===P||E.includes(j),N=()=>{if(M.has(j))M.set(j,!0);else return;let L=!0;M.forEach(B=>{B||(L=!1)}),L&&(X?.(),q(D.current),u&&g?.(),s&&s())};return v.jsx(bF,{isPresent:A,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:d,onExitComplete:A?void 0:N,anchorX:h,children:ce},j)})})},dN=O.createContext({strict:!1}),OS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kl={};for(const t in OS)Kl[t]={isEnabled:e=>OS[t].some(n=>!!e[n])};function TF(t){for(const e in t)Kl[e]={...Kl[e],...t[e]}}const wF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wF.has(t)}let mN=t=>!fm(t);function xF(t){typeof t=="function"&&(mN=e=>e.startsWith("on")?!fm(e):t(e))}try{xF(require("@emotion/is-prop-valid").default)}catch{}function SF(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(mN(a)||n===!0&&fm(a)||!e&&!fm(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const Xm=O.createContext({});function Zm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ih(t){return typeof t=="string"||Array.isArray(t)}const I_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],C_=["initial",...I_];function Jm(t){return Zm(t.animate)||C_.some(e=>ih(t[e]))}function pN(t){return!!(Jm(t)||t.variants)}function AF(t,e){if(Jm(t)){const{initial:n,animate:s}=t;return{initial:n===!1||ih(n)?n:void 0,animate:ih(s)?s:void 0}}return t.inherit!==!1?e:{}}function RF(t){const{initial:e,animate:n}=AF(t,O.useContext(Xm));return O.useMemo(()=>({initial:e,animate:n}),[kS(e),kS(n)])}function kS(t){return Array.isArray(t)?t.join(" "):t}const rh={};function IF(t){for(const e in t)rh[e]=t[e],f_(e)&&(rh[e].isCSSVariable=!0)}function gN(t,{layout:e,layoutId:n}){return au.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!rh[t]||t==="opacity")}const CF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NF=ru.length;function DF(t,e,n){let s="",a=!0;for(let l=0;l<NF;l++){const u=ru[l],h=t[u];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(u.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||n){const p=aN(h,w_[u]);if(!d){a=!1;const g=CF[u]||u;s+=`${g}(${p}) `}n&&(e[u]=p)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function N_(t,e,n){const{style:s,vars:a,transformOrigin:l}=t;let u=!1,h=!1;for(const d in e){const p=e[d];if(au.has(d)){u=!0;continue}else if(f_(d)){a[d]=p;continue}else{const g=aN(p,w_[d]);d.startsWith("origin")?(h=!0,l[d]=g):s[d]=g}}if(e.transform||(u||n?s.transform=DF(e,t.transform,n):s.transform&&(s.transform="none")),h){const{originX:d="50%",originY:p="50%",originZ:g=0}=l;s.transformOrigin=`${d} ${p} ${g}`}}const D_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yN(t,e,n){for(const s in e)!xn(e[s])&&!gN(s,n)&&(t[s]=e[s])}function PF({transformTemplate:t},e){return O.useMemo(()=>{const n=D_();return N_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function MF(t,e){const n=t.style||{},s={};return yN(s,n,t),Object.assign(s,PF(t,e)),s}function VF(t,e){const n={},s=MF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const OF={offset:"stroke-dashoffset",array:"stroke-dasharray"},kF={offset:"strokeDashoffset",array:"strokeDasharray"};function jF(t,e,n=1,s=0,a=!0){t.pathLength=1;const l=a?OF:kF;t[l.offset]=je.transform(-s);const u=je.transform(e),h=je.transform(n);t[l.array]=`${u} ${h}`}function vN(t,{attrX:e,attrY:n,attrScale:s,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...h},d,p,g){if(N_(t,h,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:E}=t;b.transform&&(E.transform=b.transform,delete b.transform),(E.transform||b.transformOrigin)&&(E.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),E.transform&&(E.transformBox=g?.transformBox??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),s!==void 0&&(b.scale=s),a!==void 0&&jF(b,a,l,u,!1)}const _N=()=>({...D_(),attrs:{}}),bN=t=>typeof t=="string"&&t.toLowerCase()==="svg";function LF(t,e,n,s){const a=O.useMemo(()=>{const l=_N();return vN(l,e,bN(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};yN(l,t.style,t),a.style={...l,...a.style}}return a}const UF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P_(t){return typeof t!="string"||t.includes("-")?!1:!!(UF.indexOf(t)>-1||/[A-Z]/u.test(t))}function BF(t,e,n,{latestValues:s},a,l=!1){const h=(P_(t)?LF:VF)(e,s,a,t),d=SF(e,typeof t=="string",l),p=t!==O.Fragment?{...d,...h,ref:n}:{},{children:g}=e,b=O.useMemo(()=>xn(g)?g.get():g,[g]);return O.createElement(t,{...p,children:b})}function jS(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function M_(t,e,n,s){if(typeof e=="function"){const[a,l]=jS(s);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=jS(s);e=e(n!==void 0?n:t.custom,a,l)}return e}function Vd(t){return xn(t)?t.get():t}function FF({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,a){return{latestValues:zF(n,s,a,t),renderState:e()}}function zF(t,e,n,s){const a={},l=s(t,{});for(const E in l)a[E]=Vd(l[E]);let{initial:u,animate:h}=t;const d=Jm(t),p=pN(t);e&&p&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const b=g?h:u;if(b&&typeof b!="boolean"&&!Zm(b)){const E=Array.isArray(b)?b:[b];for(let S=0;S<E.length;S++){const D=M_(t,E[S]);if(D){const{transitionEnd:M,transition:k,...V}=D;for(const P in V){let q=V[P];if(Array.isArray(q)){const se=g?q.length-1:0;q=q[se]}q!==null&&(a[P]=q)}for(const P in M)a[P]=M[P]}}}return a}const EN=t=>(e,n)=>{const s=O.useContext(Xm),a=O.useContext(Qm),l=()=>FF(t,e,s,a);return n?l():s_(l)};function V_(t,e,n){const{style:s}=t,a={};for(const l in s)(xn(s[l])||e.style&&xn(e.style[l])||gN(l,t)||n?.getValue(l)?.liveStyle!==void 0)&&(a[l]=s[l]);return a}const qF=EN({scrapeMotionValuesFromProps:V_,createRenderState:D_});function TN(t,e,n){const s=V_(t,e,n);for(const a in t)if(xn(t[a])||xn(e[a])){const l=ru.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[l]=t[a]}return s}const HF=EN({scrapeMotionValuesFromProps:TN,createRenderState:_N}),GF=Symbol.for("motionComponentSymbol");function Il(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $F(t,e,n){return O.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Il(n)&&(n.current=s))},[e])}const O_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),KF="framerAppearId",wN="data-"+O_(KF),xN=O.createContext({});function WF(t,e,n,s,a){const{visualElement:l}=O.useContext(Xm),u=O.useContext(dN),h=O.useContext(Qm),d=O.useContext(A_).reducedMotion,p=O.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:l,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,b=O.useContext(xN);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&YF(p.current,n,a,b);const E=O.useRef(!1);O.useInsertionEffect(()=>{g&&E.current&&g.update(n,h)});const S=n[wN],D=O.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return EC(()=>{g&&(E.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),D.current&&g.animationState&&g.animationState.animateChanges())}),O.useEffect(()=>{g&&(!D.current&&g.animationState&&g.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),D.current=!1),g.enteringChildren=void 0)}),g}function YF(t,e,n,s){const{layoutId:a,layout:l,drag:u,dragConstraints:h,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:SN(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!u||h&&Il(h),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:d,layoutRoot:p})}function SN(t){if(t)return t.options.allowProjection!==!1?t.projection:SN(t.parent)}function Iy(t,{forwardMotionProps:e=!1}={},n,s){n&&TF(n);const a=P_(t)?HF:qF;function l(h,d){let p;const g={...O.useContext(A_),...h,layoutId:QF(h)},{isStatic:b}=g,E=RF(h),S=a(h,b);if(!b&&i_){XF();const D=ZF(g);p=D.MeasureLayout,E.visualElement=WF(t,S,g,s,D.ProjectionNode)}return v.jsxs(Xm.Provider,{value:E,children:[p&&E.visualElement?v.jsx(p,{visualElement:E.visualElement,...g}):null,BF(t,h,$F(S,E.visualElement,d),S,b,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=O.forwardRef(l);return u[GF]=t,u}function QF({layoutId:t}){const e=O.useContext(n_).id;return e&&t!==void 0?e+"-"+t:t}function XF(t,e){O.useContext(dN).strict}function ZF(t){const{drag:e,layout:n}=Kl;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function JF(t,e){if(typeof Proxy>"u")return Iy;const n=new Map,s=(l,u)=>Iy(l,u,t,e),a=(l,u)=>s(l,u);return new Proxy(a,{get:(l,u)=>u==="create"?s:(n.has(u)||n.set(u,Iy(u,void 0,t,e)),n.get(u))})}function AN({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function e7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function t7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Cy(t){return t===void 0||t===1}function jv({scale:t,scaleX:e,scaleY:n}){return!Cy(t)||!Cy(e)||!Cy(n)}function oo(t){return jv(t)||RN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RN(t){return LS(t.x)||LS(t.y)}function LS(t){return t&&t!=="0%"}function dm(t,e,n){const s=t-n,a=e*s;return n+a}function US(t,e,n,s,a){return a!==void 0&&(t=dm(t,a,s)),dm(t,n,s)+e}function Lv(t,e=0,n=1,s,a){t.min=US(t.min,e,n,s,a),t.max=US(t.max,e,n,s,a)}function IN(t,{x:e,y:n}){Lv(t.x,e.translate,e.scale,e.originPoint),Lv(t.y,n.translate,n.scale,n.originPoint)}const BS=.999999999999,FS=1.0000000000001;function n7(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,u;for(let h=0;h<a;h++){l=n[h],u=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Nl(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,IN(t,u)),s&&oo(l.latestValues)&&Nl(t,l.latestValues))}e.x<FS&&e.x>BS&&(e.x=1),e.y<FS&&e.y>BS&&(e.y=1)}function Cl(t,e){t.min=t.min+e,t.max=t.max+e}function zS(t,e,n,s,a=.5){const l=wt(t.min,t.max,a);Lv(t,e,n,l,s)}function Nl(t,e){zS(t.x,e.x,e.scaleX,e.scale,e.originX),zS(t.y,e.y,e.scaleY,e.scale,e.originY)}function CN(t,e){return AN(t7(t.getBoundingClientRect(),e))}function s7(t,e,n){const s=CN(t,n),{scroll:a}=e;return a&&(Cl(s.x,a.offset.x),Cl(s.y,a.offset.y)),s}const qS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dl=()=>({x:qS(),y:qS()}),HS=()=>({min:0,max:0}),Mt=()=>({x:HS(),y:HS()}),Uv={current:null},NN={current:!1};function i7(){if(NN.current=!0,!!i_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Uv.current=t.matches;t.addEventListener("change",e),e()}else Uv.current=!1}const r7=new WeakMap;function a7(t,e,n){for(const s in e){const a=e[s],l=n[s];if(xn(a))t.addValue(s,a);else if(xn(l))t.addValue(s,$l(a,{owner:t}));else if(l!==a)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=t.getStaticValue(s);t.addValue(s,$l(u!==void 0?u:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const GS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class o7{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=E_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Fn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,bt.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=Jm(n),this.isVariantNode=pN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in b){const S=b[E];d[E]!==void 0&&xn(S)&&S.set(d[E])}}mount(e){this.current=e,r7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),NN.current||i7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=au.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&bt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Kl){const n=Kl[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<GS.length;s++){const a=GS[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,u=e[l];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=a7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=$l(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(TC(s)||xC(s))?s=parseFloat(s):!yF(s)&&ba.test(n)&&(s=rN(e,n)),this.setBaseTarget(e,xn(s)?s.get():s)),xn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const l=M_(this.props,n,this.presenceContext?.custom);l&&(s=l[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!xn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new u_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){x_.render(this.render)}}class DN extends o7{constructor(){super(...arguments),this.KeyframeResolver=rF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function PN(t,{style:e,vars:n},s,a){const l=t.style;let u;for(u in e)l[u]=e[u];a?.applyProjectionStyles(l,s);for(u in n)l.setProperty(u,n[u])}function l7(t){return window.getComputedStyle(t)}class u7 extends DN{constructor(){super(...arguments),this.type="html",this.renderInstance=PN}readValueFromInstance(e,n){if(au.has(n))return this.projection?.isProjecting?Nv(n):xB(e,n);{const s=l7(e),a=(f_(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CN(e,n)}build(e,n,s){N_(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return V_(e,n,s)}}const MN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function c7(t,e,n,s){PN(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(MN.has(a)?a:O_(a),e.attrs[a])}class h7 extends DN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(au.has(n)){const s=iN(n);return s&&s.default||0}return n=MN.has(n)?n:O_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return TN(e,n,s)}build(e,n,s){vN(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,a){c7(e,n,s,a)}mount(e){this.isSVGTag=bN(e.tagName),super.mount(e)}}const f7=(t,e)=>P_(t)?new h7(e):new u7(e,{allowProjection:t!==O.Fragment});function jl(t,e,n){const s=t.getProps();return M_(s,e,n!==void 0?n:s.custom,t)}const Bv=t=>Array.isArray(t);function d7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$l(n))}function m7(t){return Bv(t)?t[t.length-1]||0:t}function p7(t,e){const n=jl(t,e);let{transitionEnd:s={},transition:a={},...l}=n||{};l={...l,...s};for(const u in l){const h=m7(l[u]);d7(t,u,h)}}function g7(t){return!!(xn(t)&&t.add)}function Fv(t,e){const n=t.getValue("willChange");if(g7(n))return n.add(e);if(!n&&yr.WillChange){const s=new yr.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function VN(t){return t.props[wN]}const y7=t=>t!==null;function v7(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(y7),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[l]}const _7={type:"spring",stiffness:500,damping:25,restSpeed:10},b7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),E7={type:"keyframes",duration:.8},T7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w7=(t,{keyframes:e})=>e.length>2?E7:au.has(t)?t.startsWith("scale")?b7(e[1]):_7:T7;function x7({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:l,repeatType:u,repeatDelay:h,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const k_=(t,e,n,s={},a,l)=>u=>{const h=T_(s,t)||{},d=h.delay||s.delay||0;let{elapsed:p=0}=s;p=p-Ti(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:E=>{e.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:l?void 0:a};x7(h)||Object.assign(g,w7(t,g)),g.duration&&(g.duration=Ti(g.duration)),g.repeatDelay&&(g.repeatDelay=Ti(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let b=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Ov(g),g.delay===0&&(b=!0)),(yr.instantAnimations||yr.skipAnimations)&&(b=!0,Ov(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,b&&!l&&e.get()!==void 0){const E=v7(g.keyframes,h);if(E!==void 0){bt.update(()=>{g.onUpdate(E),g.onComplete()});return}}return h.isSync?new b_(g):new KB(g)};function S7({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function ON(t,e,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...h}=e;s&&(l=s);const d=[],p=a&&t.animationState&&t.animationState.getState()[a];for(const g in h){const b=t.getValue(g,t.latestValues[g]??null),E=h[g];if(E===void 0||p&&S7(p,g))continue;const S={delay:n,...T_(l||{},g)},D=b.get();if(D!==void 0&&!b.isAnimating&&!Array.isArray(E)&&E===D&&!S.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const V=VN(t);if(V){const P=window.MotionHandoffAnimation(V,g,bt);P!==null&&(S.startTime=P,M=!0)}}Fv(t,g),b.start(k_(g,b,E,t.shouldReduceMotion&&tN.has(g)?{type:!1}:S,t,M));const k=b.animation;k&&d.push(k)}return u&&Promise.all(d).then(()=>{bt.update(()=>{u&&p7(t,u)})}),d}function kN(t,e,n,s=0,a=1){const l=Array.from(t).sort((p,g)=>p.sortNodePosition(g)).indexOf(e),u=t.size,h=(u-1)*s;return typeof n=="function"?n(l,u):a===1?l*s:h-l*s}function zv(t,e,n={}){const s=jl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const l=s?()=>Promise.all(ON(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:b}=a;return A7(t,e,d,p,g,b,n)}:()=>Promise.resolve(),{when:h}=a;if(h){const[d,p]=h==="beforeChildren"?[l,u]:[u,l];return d().then(()=>p())}else return Promise.all([l(),u(n.delay)])}function A7(t,e,n=0,s=0,a=0,l=1,u){const h=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),h.push(zv(d,e,{...u,delay:n+(typeof s=="function"?0:s)+kN(t.variantChildren,d,s,a,l)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(h)}function R7(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(l=>zv(t,l,n));s=Promise.all(a)}else if(typeof e=="string")s=zv(t,e,n);else{const a=typeof e=="function"?jl(t,e,n.custom):e;s=Promise.all(ON(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function jN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const I7=C_.length;function LN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?LN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I7;n++){const s=C_[n],a=t.props[s];(ih(a)||a===!1)&&(e[s]=a)}return e}const C7=[...I_].reverse(),N7=I_.length;function D7(t){return e=>Promise.all(e.map(({animation:n,options:s})=>R7(t,n,s)))}function P7(t){let e=D7(t),n=$S(),s=!0;const a=d=>(p,g)=>{const b=jl(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(b){const{transition:E,transitionEnd:S,...D}=b;p={...p,...D,...S}}return p};function l(d){e=d(t)}function u(d){const{props:p}=t,g=LN(t.parent)||{},b=[],E=new Set;let S={},D=1/0;for(let k=0;k<N7;k++){const V=C7[k],P=n[V],q=p[V]!==void 0?p[V]:g[V],se=ih(q),X=V===d?P.isActive:null;X===!1&&(D=k);let ce=q===g[V]&&q!==p[V]&&se;if(ce&&s&&t.manuallyAnimateOnMount&&(ce=!1),P.protectedKeys={...S},!P.isActive&&X===null||!q&&!P.prevProp||Zm(q)||typeof q=="boolean")continue;const j=M7(P.prevProp,q);let A=j||V===d&&P.isActive&&!ce&&se||k>D&&se,N=!1;const L=Array.isArray(q)?q:[q];let B=L.reduce(a(V),{});X===!1&&(B={});const{prevResolvedValues:C={}}=P,I={...C,...B},ve=te=>{A=!0,E.has(te)&&(N=!0,E.delete(te)),P.needsAnimating[te]=!0;const me=t.getValue(te);me&&(me.liveStyle=!1)};for(const te in I){const me=B[te],Ne=C[te];if(S.hasOwnProperty(te))continue;let F=!1;Bv(me)&&Bv(Ne)?F=!jN(me,Ne):F=me!==Ne,F?me!=null?ve(te):E.add(te):me!==void 0&&E.has(te)?ve(te):P.protectedKeys[te]=!0}P.prevProp=q,P.prevResolvedValues=B,P.isActive&&(S={...S,...B}),s&&t.blockInitialAnimation&&(A=!1);const we=ce&&j;A&&(!we||N)&&b.push(...L.map(te=>{const me={type:V};if(typeof te=="string"&&s&&!we&&t.manuallyAnimateOnMount&&t.parent){const{parent:Ne}=t,F=jl(Ne,te);if(Ne.enteringChildren&&F){const{delayChildren:ue}=F.transition||{};me.delay=kN(Ne.enteringChildren,t,ue)}}return{animation:te,options:me}}))}if(E.size){const k={};if(typeof p.initial!="boolean"){const V=jl(t,Array.isArray(p.initial)?p.initial[0]:p.initial);V&&V.transition&&(k.transition=V.transition)}E.forEach(V=>{const P=t.getBaseTarget(V),q=t.getValue(V);q&&(q.liveStyle=!0),k[V]=P??null}),b.push({animation:k})}let M=!!b.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(M=!1),s=!1,M?e(b):Promise.resolve()}function h(d,p){if(n[d].isActive===p)return Promise.resolve();t.variantChildren?.forEach(b=>b.animationState?.setActive(d,p)),n[d].isActive=p;const g=u(d);for(const b in n)n[b].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>n,reset:()=>{n=$S(),s=!0}}}function M7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jN(e,t):!1}function so(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $S(){return{animate:so(!0),whileInView:so(),whileHover:so(),whileTap:so(),whileDrag:so(),whileFocus:so(),exit:so()}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class V7 extends Ra{constructor(e){super(e),e.animationState||(e.animationState=P7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Zm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let O7=0;class k7 extends Ra{constructor(){super(...arguments),this.id=O7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const j7={animation:{Feature:V7},exit:{Feature:k7}};function ah(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ah(t){return{point:{x:t.pageX,y:t.pageY}}}const L7=t=>e=>S_(e)&&t(e,Ah(e));function kc(t,e,n,s){return ah(t,e,L7(n),s)}const UN=1e-4,U7=1-UN,B7=1+UN,BN=.01,F7=0-BN,z7=0+BN;function Pn(t){return t.max-t.min}function q7(t,e,n){return Math.abs(t-e)<=n}function KS(t,e,n,s=.5){t.origin=s,t.originPoint=wt(e.min,e.max,t.origin),t.scale=Pn(n)/Pn(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=U7&&t.scale<=B7||isNaN(t.scale))&&(t.scale=1),(t.translate>=F7&&t.translate<=z7||isNaN(t.translate))&&(t.translate=0)}function jc(t,e,n,s){KS(t.x,e.x,n.x,s?s.originX:void 0),KS(t.y,e.y,n.y,s?s.originY:void 0)}function WS(t,e,n){t.min=n.min+e.min,t.max=t.min+Pn(e)}function H7(t,e,n){WS(t.x,e.x,n.x),WS(t.y,e.y,n.y)}function YS(t,e,n){t.min=e.min-n.min,t.max=t.min+Pn(e)}function Lc(t,e,n){YS(t.x,e.x,n.x),YS(t.y,e.y,n.y)}function _s(t){return[t("x"),t("y")]}const FN=({current:t})=>t?t.ownerDocument.defaultView:null,QS=(t,e)=>Math.abs(t-e);function G7(t,e){const n=QS(t.x,e.x),s=QS(t.y,e.y);return Math.sqrt(n**2+s**2)}class zN{constructor(e,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Dy(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,D=G7(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!D)return;const{point:M}=E,{timestamp:k}=dn;this.history.push({...M,timestamp:k});const{onStart:V,onMove:P}=this.handlers;S||(V&&V(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,E)},this.handlePointerMove=(E,S)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Ny(S,this.transformPagePoint),bt.update(this.updatePoint,!0)},this.handlePointerUp=(E,S)=>{this.end();const{onEnd:D,onSessionEnd:M,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=Dy(E.type==="pointercancel"?this.lastMoveEventInfo:Ny(S,this.transformPagePoint),this.history);this.startEvent&&D&&D(E,V),M&&M(E,V)},!S_(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=a||window;const h=Ah(e),d=Ny(h,this.transformPagePoint),{point:p}=d,{timestamp:g}=dn;this.history=[{...p,timestamp:g}];const{onSessionStart:b}=n;b&&b(e,Dy(d,this.history)),this.removeListeners=wh(kc(this.contextWindow,"pointermove",this.handlePointerMove),kc(this.contextWindow,"pointerup",this.handlePointerUp),kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function Ny(t,e){return e?{point:e(t.point)}:t}function XS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Dy({point:t},e){return{point:t,delta:XS(t,qN(e)),offset:XS(t,$7(e)),velocity:K7(e,.1)}}function $7(t){return t[0]}function qN(t){return t[t.length-1]}function K7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=qN(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>Ti(e)));)n--;if(!s)return{x:0,y:0};const l=wi(a.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(a.x-s.x)/l,y:(a.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function W7(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?wt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?wt(n,t,s.max):Math.min(t,n)),t}function ZS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Y7(t,{top:e,left:n,bottom:s,right:a}){return{x:ZS(t.x,n,a),y:ZS(t.y,e,s)}}function JS(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function Q7(t,e){return{x:JS(t.x,e.x),y:JS(t.y,e.y)}}function X7(t,e){let n=.5;const s=Pn(t),a=Pn(e);return a>s?n=th(e.min,e.max-s,t.min):s>a&&(n=th(t.min,t.max-a,e.min)),gr(0,1,n)}function Z7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qv=.35;function J7(t=qv){return t===!1?t=0:t===!0&&(t=qv),{x:eA(t,"left","right"),y:eA(t,"top","bottom")}}function eA(t,e,n){return{min:tA(t,e),max:tA(t,n)}}function tA(t,e){return typeof t=="number"?t:t[e]||0}const ez=new WeakMap;class tz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ah(b).point)},u=(b,E)=>{const{drag:S,dragPropagation:D,onDragStart:M}=this.getProps();if(S&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uF(S),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_s(V=>{let P=this.getAxisMotionValue(V).get()||0;if(xi.test(P)){const{projection:q}=this.visualElement;if(q&&q.layout){const se=q.layout.layoutBox[V];se&&(P=Pn(se)*(parseFloat(P)/100))}}this.originPoint[V]=P}),M&&bt.postRender(()=>M(b,E)),Fv(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},h=(b,E)=>{this.latestPointerEvent=b,this.latestPanInfo=E;const{dragPropagation:S,dragDirectionLock:D,onDirectionLock:M,onDrag:k}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:V}=E;if(D&&this.currentDirection===null){this.currentDirection=nz(V),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",E.point,V),this.updateAxis("y",E.point,V),this.visualElement.render(),k&&k(b,E)},d=(b,E)=>{this.latestPointerEvent=b,this.latestPanInfo=E,this.stop(b,E),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>_s(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new zN(e,{onSessionStart:l,onStart:u,onMove:h,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:FN(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,a=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!s)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&bt.postRender(()=>h(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!pd(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=W7(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Il(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=Y7(s.layoutBox,e):this.constraints=!1,this.elastic=J7(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_s(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Z7(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Il(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=s7(s,a.root,this.visualElement.getTransformPagePoint());let u=Q7(a.layout.layoutBox,l);if(n){const h=n(e7(u));this.hasMutatedConstraints=!!h,h&&(u=AN(h))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},p=_s(g=>{if(!pd(g,n,this.currentDirection))return;let b=d&&d[g]||{};u&&(b={min:0,max:0});const E=a?200:1e6,S=a?40:1e7,D={type:"inertia",velocity:s?e[g]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(g,D)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Fv(this.visualElement,e),s.start(k_(e,s,0,n,this.visualElement,!1))}stopAnimation(){_s(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_s(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){_s(n=>{const{drag:s}=this.getProps();if(!pd(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[n];l.set(e[n]-wt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Il(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};_s(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const d=h.get();a[u]=X7({min:d,max:d},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),_s(u=>{if(!pd(u,e,null))return;const h=this.getAxisMotionValue(u),{min:d,max:p}=this.constraints[u];h.set(wt(d,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;ez.set(this.visualElement,this);const e=this.visualElement.current,n=kc(e,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Il(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),bt.read(s);const u=ah(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(_s(g=>{const b=this.getAxisMotionValue(g);b&&(this.originPoint[g]+=d[g].translate,b.set(b.get()+d[g].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:u=qv,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function pd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function nz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class sz extends Ra{constructor(e){super(e),this.removeGroupControls=Es,this.removeListeners=Es,this.controls=new tz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Es}unmount(){this.removeGroupControls(),this.removeListeners()}}const nA=t=>(e,n)=>{t&&bt.postRender(()=>t(e,n))};class iz extends Ra{constructor(){super(...arguments),this.removePointerDownListener=Es}onPointerDown(e){this.session=new zN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:nA(e),onStart:nA(n),onMove:s,onEnd:(l,u)=>{delete this.session,a&&bt.postRender(()=>a(l,u))}}}mount(){this.removePointerDownListener=kc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Od={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const mc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(je.test(t))t=parseFloat(t);else return t;const n=sA(t,e.target.x),s=sA(t,e.target.y);return`${n}% ${s}%`}},rz={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=ba.parse(t);if(a.length>5)return s;const l=ba.createTransformer(t),u=typeof a[0]!="number"?1:0,h=n.x.scale*e.x,d=n.y.scale*e.y;a[0+u]/=h,a[1+u]/=d;const p=wt(h,d,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),l(a)}};let Py=!1;class az extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:l}=e;IF(oz),l&&(n.group&&n.group.add(l),s&&s.register&&a&&s.register(l),Py&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Od.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,Py=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||bt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),x_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;Py=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HN(t){const[e,n]=fN(),s=O.useContext(n_);return v.jsx(az,{...t,layoutGroup:s,switchLayoutGroup:O.useContext(xN),isPresent:e,safeToRemove:n})}const oz={borderRadius:{...mc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mc,borderTopRightRadius:mc,borderBottomLeftRadius:mc,borderBottomRightRadius:mc,boxShadow:rz};function lz(t,e,n){const s=xn(t)?t:$l(t);return s.start(k_("",s,e,n)),s.animation}const uz=(t,e)=>t.depth-e.depth;class cz{constructor(){this.children=[],this.isDirty=!1}add(e){r_(this.children,e),this.isDirty=!0}remove(e){a_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uz),this.isDirty=!1,this.children.forEach(e)}}function hz(t,e){const n=Fn.now(),s=({timestamp:a})=>{const l=a-n;l>=e&&(_a(s),t(l-e))};return bt.setup(s,!0),()=>_a(s)}const GN=["TopLeft","TopRight","BottomLeft","BottomRight"],fz=GN.length,iA=t=>typeof t=="string"?parseFloat(t):t,rA=t=>typeof t=="number"||je.test(t);function dz(t,e,n,s,a,l){a?(t.opacity=wt(0,n.opacity??1,mz(s)),t.opacityExit=wt(e.opacity??1,0,pz(s))):l&&(t.opacity=wt(e.opacity??1,n.opacity??1,s));for(let u=0;u<fz;u++){const h=`border${GN[u]}Radius`;let d=aA(e,h),p=aA(n,h);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||rA(d)===rA(p)?(t[h]=Math.max(wt(iA(d),iA(p),s),0),(xi.test(p)||xi.test(d))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,s))}function aA(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mz=$N(0,.5,PC),pz=$N(.5,.95,Es);function $N(t,e,n){return s=>s<t?0:s>e?1:n(th(t,e,s))}function oA(t,e){t.min=e.min,t.max=e.max}function vs(t,e){oA(t.x,e.x),oA(t.y,e.y)}function lA(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uA(t,e,n,s,a){return t-=e,t=dm(t,1/n,s),a!==void 0&&(t=dm(t,1/a,s)),t}function gz(t,e=0,n=1,s=.5,a,l=t,u=t){if(xi.test(e)&&(e=parseFloat(e),e=wt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=wt(l.min,l.max,s);t===l&&(h-=e),t.min=uA(t.min,e,n,h,a),t.max=uA(t.max,e,n,h,a)}function cA(t,e,[n,s,a],l,u){gz(t,e[n],e[s],e[a],e.scale,l,u)}const yz=["x","scaleX","originX"],vz=["y","scaleY","originY"];function hA(t,e,n,s){cA(t.x,e,yz,n?n.x:void 0,s?s.x:void 0),cA(t.y,e,vz,n?n.y:void 0,s?s.y:void 0)}function fA(t){return t.translate===0&&t.scale===1}function KN(t){return fA(t.x)&&fA(t.y)}function dA(t,e){return t.min===e.min&&t.max===e.max}function _z(t,e){return dA(t.x,e.x)&&dA(t.y,e.y)}function mA(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WN(t,e){return mA(t.x,e.x)&&mA(t.y,e.y)}function pA(t){return Pn(t.x)/Pn(t.y)}function gA(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class bz{constructor(){this.members=[]}add(e){r_(this.members,e),e.scheduleRender()}remove(e){if(a_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ez(t,e,n){let s="";const a=t.x.translate/e.x,l=t.y.translate/e.y,u=n?.z||0;if((a||l||u)&&(s=`translate3d(${a}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:b,rotateY:E,skewX:S,skewY:D}=n;p&&(s=`perspective(${p}px) ${s}`),g&&(s+=`rotate(${g}deg) `),b&&(s+=`rotateX(${b}deg) `),E&&(s+=`rotateY(${E}deg) `),S&&(s+=`skewX(${S}deg) `),D&&(s+=`skewY(${D}deg) `)}const h=t.x.scale*e.x,d=t.y.scale*e.y;return(h!==1||d!==1)&&(s+=`scale(${h}, ${d})`),s||"none"}const My=["","X","Y","Z"],Tz=1e3;let wz=0;function Vy(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function YN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",bt,!(a||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&YN(s)}function QN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(u={},h=e?.()){this.id=wz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Az),this.nodes.forEach(Nz),this.nodes.forEach(Dz),this.nodes.forEach(Rz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new cz)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new u_),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const d=this.eventHandlers.get(u);d&&d.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=hN(u)&&!pF(u),this.instance=u;const{layoutId:h,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),t){let g,b=0;const E=()=>this.root.updateBlockedByResize=!1;bt.read(()=>{b=window.innerWidth}),t(u,()=>{const S=window.innerWidth;S!==b&&(b=S,this.root.updateBlockedByResize=!0,g&&g(),g=hz(E,250),Od.hasAnimatedSinceResize&&(Od.hasAnimatedSinceResize=!1,this.nodes.forEach(_A)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b,hasRelativeLayoutChanged:E,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||p.getDefaultTransition()||kz,{onLayoutAnimationStart:M,onLayoutAnimationComplete:k}=p.getProps(),V=!this.targetLayout||!WN(this.targetLayout,S),P=!b&&E;if(this.options.layoutRoot||this.resumeFrom||P||b&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const q={...T_(D,"layout"),onPlay:M,onComplete:k};(p.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q),this.setAnimationOrigin(g,P)}else b||_A(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Pz),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const b=this.path[g];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Cz),this.nodes.forEach(xz),this.nodes.forEach(Sz)):this.nodes.forEach(vA),this.clearAllSnapshots();const h=Fn.now();dn.delta=gr(0,1e3/60,h-dn.timestamp),dn.timestamp=h,dn.isProcessing=!0,Ty.update.process(dn),Ty.preRender.process(dn),Ty.render.process(dn),dn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,x_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Iz),this.sharedNodes.forEach(Mz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pn(this.snapshot.measuredBox.x)&&!Pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!KN(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||oo(this.latestValues)||g)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return u&&(d=this.removeTransform(d)),jz(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Mt();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Lz))){const{scroll:p}=this.root;p&&(Cl(h.x,p.offset.x),Cl(h.y,p.offset.y))}return h}removeElementScroll(u){const h=Mt();if(vs(h,u),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:g,options:b}=p;p!==this.root&&g&&b.layoutScroll&&(g.wasRoot&&vs(h,u),Cl(h.x,g.offset.x),Cl(h.y,g.offset.y))}return h}applyTransform(u,h=!1){const d=Mt();vs(d,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Nl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),oo(g.latestValues)&&Nl(d,g.latestValues)}return oo(this.latestValues)&&Nl(d,this.latestValues),d}removeTransform(u){const h=Mt();vs(h,u);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!oo(p.latestValues))continue;jv(p.latestValues)&&p.updateSnapshot();const g=Mt(),b=p.measurePageBox();vs(g,b),hA(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return oo(this.latestValues)&&hA(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:b}=this.options;if(!(!this.layout||!(g||b))){if(this.resolvedRelativeTargetAt=dn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Lc(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vs(this.target,this.layout.layoutBox),IN(this.target,this.targetDelta)):vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Lc(this.relativeTargetOrigin,this.target,E.target),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jv(this.parent.latestValues)||RN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===dn.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;vs(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,E=this.treeScale.y;n7(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Mt());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lA(this.prevProjectionDelta.x,this.projectionDelta.x),lA(this.prevProjectionDelta.y,this.projectionDelta.y)),jc(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==E||!gA(this.projectionDelta.x,this.prevProjectionDelta.x)||!gA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dl(),this.projectionDelta=Dl(),this.projectionDeltaWithTransform=Dl()}setAnimationOrigin(u,h=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},b=Dl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=Mt(),S=d?d.source:void 0,D=this.layout?this.layout.source:void 0,M=S!==D,k=this.getStack(),V=!k||k.members.length<=1,P=!!(M&&!V&&this.options.crossfade===!0&&!this.path.some(Oz));this.animationProgress=0;let q;this.mixTargetDelta=se=>{const X=se/1e3;bA(b.x,u.x,X),bA(b.y,u.y,X),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lc(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vz(this.relativeTarget,this.relativeTargetOrigin,E,X),q&&_z(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=Mt()),vs(q,this.relativeTarget)),M&&(this.animationValues=g,dz(g,p,this.latestValues,X,P,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bt.update(()=>{Od.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$l(0)),this.currentAnimation=lz(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Tz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:d,layout:p,latestValues:g}=u;if(!(!h||!d||!p)){if(this!==u&&this.layout&&p&&XN(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Mt();const b=Pn(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+b;const E=Pn(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+E}vs(h,d),Nl(h,g),jc(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new bz),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const p={};d.z&&Vy("z",u,p,this.animationValues);for(let g=0;g<My.length;g++)Vy(`rotate${My[g]}`,u,p,this.animationValues),Vy(`skew${My[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Vd(h?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Vd(h?.pointerEvents)||""),this.hasProjected&&!oo(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let b=Ez(this.projectionDeltaWithTransform,this.treeScale,g);d&&(b=d(g,b)),u.transform=b;const{x:E,y:S}=this.projectionDelta;u.transformOrigin=`${E.origin*100}% ${S.origin*100}% 0`,p.animationValues?u.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const D in rh){if(g[D]===void 0)continue;const{correct:M,applyTo:k,isCSSVariable:V}=rh[D],P=b==="none"?g[D]:M(g[D],p);if(k){const q=k.length;for(let se=0;se<q;se++)u[k[se]]=P}else V?this.options.visualElement.renderState.vars[D]=P:u[D]=P}this.options.layoutId&&(u.pointerEvents=p===this?Vd(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(yA),this.root.sharedNodes.clear()}}}function xz(t){t.updateLayout()}function Sz(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?_s(g=>{const b=l?e.measuredBox[g]:e.layoutBox[g],E=Pn(b);b.min=n[g].min,b.max=b.min+E}):XN(a,e.layoutBox,n)&&_s(g=>{const b=l?e.measuredBox[g]:e.layoutBox[g],E=Pn(n[g]);b.max=b.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+E)});const u=Dl();jc(u,n,e.layoutBox);const h=Dl();l?jc(h,t.applyTransform(s,!0),e.measuredBox):jc(h,n,e.layoutBox);const d=!KN(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:b,layout:E}=g;if(b&&E){const S=Mt();Lc(S,e.layoutBox,b.layoutBox);const D=Mt();Lc(D,n,E.layoutBox),WN(S,D)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Az(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Rz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Iz(t){t.clearSnapshot()}function yA(t){t.clearMeasurements()}function vA(t){t.isLayoutDirty=!1}function Cz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _A(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Nz(t){t.resolveTargetDelta()}function Dz(t){t.calcProjection()}function Pz(t){t.resetSkewAndRotation()}function Mz(t){t.removeLeadSnapshot()}function bA(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function EA(t,e,n,s){t.min=wt(e.min,n.min,s),t.max=wt(e.max,n.max,s)}function Vz(t,e,n,s){EA(t.x,e.x,n.x,s),EA(t.y,e.y,n.y,s)}function Oz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kz={duration:.45,ease:[.4,0,.1,1]},TA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wA=TA("applewebkit/")&&!TA("chrome/")?Math.round:Es;function xA(t){t.min=wA(t.min),t.max=wA(t.max)}function jz(t){xA(t.x),xA(t.y)}function XN(t,e,n){return t==="position"||t==="preserve-aspect"&&!q7(pA(e),pA(n),.2)}function Lz(t){return t!==t.root&&t.scroll?.wasRoot}const Uz=QN({attachResizeListener:(t,e)=>ah(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Oy={current:void 0},ZN=QN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Oy.current){const t=new Uz({});t.mount(window),t.setOptions({layoutScroll:!0}),Oy.current=t}return Oy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Bz={pan:{Feature:iz},drag:{Feature:sz,ProjectionNode:ZN,MeasureLayout:HN}};function SA(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=s[a];l&&bt.postRender(()=>l(e,Ah(e)))}class Fz extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=cF(e,(n,s)=>(SA(this.node,s,"Start"),a=>SA(this.node,a,"End"))))}unmount(){}}class zz extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wh(ah(this.node.current,"focus",()=>this.onFocus()),ah(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function AA(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=s[a];l&&bt.postRender(()=>l(e,Ah(e)))}class qz extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=mF(e,(n,s)=>(AA(this.node,s,"Start"),(a,{success:l})=>AA(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hv=new WeakMap,ky=new WeakMap,Hz=t=>{const e=Hv.get(t.target);e&&e(t)},Gz=t=>{t.forEach(Hz)};function $z({root:t,...e}){const n=t||document;ky.has(n)||ky.set(n,{});const s=ky.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(Gz,{root:t,...e})),s[a]}function Kz(t,e,n){const s=$z(e);return Hv.set(t,n),s.observe(t),()=>{Hv.delete(t),s.unobserve(t)}}const Wz={some:0,all:1};class Yz extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:Wz[a]},h=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:b}=this.node.getProps(),E=p?g:b;E&&E(d)};return Kz(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Qz(e,n))&&this.startObserver()}unmount(){}}function Qz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Xz={inView:{Feature:Yz},tap:{Feature:qz},focus:{Feature:zz},hover:{Feature:Fz}},Zz={layout:{ProjectionNode:ZN,MeasureLayout:HN}},Jz={...j7,...Xz,...Bz,...Zz},ns=JF(Jz,f7),hi=({variant:t="primary",size:e="md",loading:n=!1,fullWidth:s=!1,leftIcon:a,rightIcon:l,children:u,disabled:h,className:d="",...p})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",b={primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-900 focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",ghost:"bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-gray-500"},E={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},S=s?"w-full":"",D=`${g} ${b[t]} ${E[e]} ${S} ${d}`;return v.jsxs(ns.button,{whileTap:{scale:.95},className:D,disabled:h||n,...p,children:[n&&v.jsx(e9,{className:"w-4 h-4 mr-2 animate-spin"}),!n&&a&&v.jsx("span",{className:"mr-2",children:a}),u,!n&&l&&v.jsx("span",{className:"ml-2",children:l})]})},e8=({title:t,showBack:e=!1,showPartnerNames:n=!0,rightActions:s})=>{const a=Ea();vr();const{user:l}=Ht(),{activeInnermost:u}=bC(),h=()=>{a(-1)},d=()=>{if(t)return t;if(n&&u&&l){const g=l.id===u.partnerA,b=g?u.partnerBName:u.partnerAName;return`${g?u.partnerAName:u.partnerBName} & ${b}`}return"Willing Box"},p=()=>!u||!n?null:`Week ${u.currentWeek} • Innermost`;return v.jsxs("nav",{className:"bg-white border-b border-gray-200 px-4 py-3",children:[v.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[v.jsx("div",{className:"flex items-center",children:e&&v.jsx(hi,{variant:"ghost",size:"sm",onClick:h,className:"mr-2 p-2",children:v.jsx(po,{className:"w-5 h-5"})})}),v.jsxs("div",{className:"flex-1 text-center",children:[v.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:d()}),p()&&v.jsx("p",{className:"text-sm text-gray-500 truncate",children:p()})]}),v.jsx("div",{className:"flex items-center space-x-2",children:s||v.jsx(hi,{variant:"ghost",size:"sm",onClick:()=>a("/settings"),className:"p-2",children:v.jsx(t_,{className:"w-5 h-5"})})})]}),u&&n&&v.jsx("div",{className:"max-w-md mx-auto mt-2",children:v.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[v.jsxs("span",{className:"flex items-center",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"You"]}),v.jsxs("span",{className:"text-gray-400",children:["Score: "," 0"]}),v.jsxs("span",{className:"flex items-center",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Partner"]})]})})]})},t8=()=>{const{user:t}=Ht(),{innermosts:e,canAddInnermost:n}=bC();return v.jsxs("div",{className:"p-4 space-y-6",children:[v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-primary-100 rounded-full mb-4",children:v.jsx(ha,{className:"w-10 h-10 text-primary-600 fill-current"})}),v.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",t?.displayName,"!"]}),v.jsx("p",{className:"text-gray-600",children:"Ready to grow your relationships?"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-gray-200",children:[v.jsx(Gl,{className:"w-6 h-6 text-primary-600 mx-auto mb-2"}),v.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"Active Innermosts"})]}),v.jsxs("div",{className:"bg-white rounded-xl p-4 text-center border border-gray-200",children:[v.jsx(Mc,{className:"w-6 h-6 text-willing-600 mx-auto mb-2"}),v.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"0"}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Score"})]})]}),v.jsx("div",{className:"space-y-4",children:e.length===0?v.jsxs("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl p-6 text-white text-center",children:[v.jsx(ha,{className:"w-12 h-12 mx-auto mb-4 opacity-80"}),v.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start Your First Innermost"}),v.jsx("p",{className:"text-primary-100 mb-4 text-sm",children:"Connect with a partner and begin your journey of intentional relationship growth."}),v.jsx(Jn,{to:"/innermosts",children:v.jsxs(hi,{variant:"secondary",className:"bg-white text-primary-600 hover:bg-gray-100",children:[v.jsx(eh,{className:"w-4 h-4 mr-2"}),"Create Innermost"]})})]}):v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Innermosts"}),n()&&v.jsx(Jn,{to:"/innermosts",children:v.jsx(hi,{size:"sm",variant:"ghost",children:v.jsx(eh,{className:"w-4 h-4"})})})]}),e.slice(0,3).map(s=>{const a=t?.id===s.partnerA?s.partnerBEmail:s.partnerAEmail;return v.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"font-medium text-gray-900",children:a||"Partner"}),v.jsx("div",{className:`text-sm px-2 py-1 rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),v.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Created ",s.createdAt.toLocaleDateString()]}),v.jsx(Jn,{to:`/innermosts/${s.id}`,children:v.jsx(hi,{size:"sm",fullWidth:!0,children:s.status==="active"?"Enter Innermost":"Continue Setup"})})]},s.id)}),e.length>3&&v.jsx(Jn,{to:"/innermosts",children:v.jsxs(hi,{variant:"ghost",fullWidth:!0,children:["View All Innermosts (",e.length,")"]})})]})}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsx(Jn,{to:"/innermosts",children:v.jsxs(hi,{variant:"ghost",fullWidth:!0,className:"h-16 flex-col",children:[v.jsx(Gl,{className:"w-6 h-6 mb-1"}),v.jsx("span",{className:"text-xs",children:"Innermosts"})]})}),v.jsx(Jn,{to:"/profile",children:v.jsxs(hi,{variant:"ghost",fullWidth:!0,className:"h-16 flex-col",children:[v.jsx(Mc,{className:"w-6 h-6 mb-1"}),v.jsx("span",{className:"text-xs",children:"Profile"})]})})]}),v.jsx("div",{className:"h-4 safe-area-bottom"})]})};var Rh=t=>t.type==="checkbox",fo=t=>t instanceof Date,Nn=t=>t==null;const JN=t=>typeof t=="object";var kt=t=>!Nn(t)&&!Array.isArray(t)&&JN(t)&&!fo(t),n8=t=>kt(t)&&t.target?Rh(t.target)?t.target.checked:t.target.value:t,s8=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,i8=(t,e)=>t.has(s8(e)),r8=t=>{const e=t.constructor&&t.constructor.prototype;return kt(e)&&e.hasOwnProperty("isPrototypeOf")},j_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function an(t){let e;const n=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(j_&&(t instanceof Blob||s))&&(n||kt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!r8(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=an(t[a]));else return t;return e}var ep=t=>/^\w*$/.test(t),Gt=t=>t===void 0,L_=t=>Array.isArray(t)?t.filter(Boolean):[],U_=t=>L_(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xe=(t,e,n)=>{if(!e||!kt(t))return n;const s=(ep(e)?[e]:U_(e)).reduce((a,l)=>Nn(a)?a:a[l],t);return Gt(s)||s===t?Gt(t[e])?n:t[e]:s},ci=t=>typeof t=="boolean",_t=(t,e,n)=>{let s=-1;const a=ep(e)?[e]:U_(e),l=a.length,u=l-1;for(;++s<l;){const h=a[s];let d=n;if(s!==u){const p=t[h];d=kt(p)||Array.isArray(p)?p:isNaN(+a[s+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=d,t=t[h]}};const RA={BLUR:"blur",FOCUS_OUT:"focusout"},Os={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},sr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},a8=mn.createContext(null);a8.displayName="HookFormContext";var o8=(t,e,n,s=!0)=>{const a={defaultValues:e._defaultValues};for(const l in t)Object.defineProperty(a,l,{get:()=>{const u=l;return e._proxyFormState[u]!==Os.all&&(e._proxyFormState[u]=!s||Os.all),t[u]}});return a};const l8=typeof window<"u"?mn.useLayoutEffect:mn.useEffect;var mi=t=>typeof t=="string",u8=(t,e,n,s,a)=>mi(t)?(s&&e.watch.add(t),xe(n,t,a)):Array.isArray(t)?t.map(l=>(s&&e.watch.add(l),xe(n,l))):(s&&(e.watchAll=!0),n),Gv=t=>Nn(t)||!JN(t);function ra(t,e,n=new WeakSet){if(Gv(t)||Gv(e))return t===e;if(fo(t)&&fo(e))return t.getTime()===e.getTime();const s=Object.keys(t),a=Object.keys(e);if(s.length!==a.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const l of s){const u=t[l];if(!a.includes(l))return!1;if(l!=="ref"){const h=e[l];if(fo(u)&&fo(h)||kt(u)&&kt(h)||Array.isArray(u)&&Array.isArray(h)?!ra(u,h,n):u!==h)return!1}}return!0}var c8=(t,e,n,s,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[s]:a||!0}}:{},Uc=t=>Array.isArray(t)?t:[t],IA=()=>{let t=[];return{get observers(){return t},next:a=>{for(const l of t)l.next&&l.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(l=>l!==a)}}),unsubscribe:()=>{t=[]}}},Ln=t=>kt(t)&&!Object.keys(t).length,B_=t=>t.type==="file",ks=t=>typeof t=="function",mm=t=>{if(!j_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},e2=t=>t.type==="select-multiple",F_=t=>t.type==="radio",h8=t=>F_(t)||Rh(t),jy=t=>mm(t)&&t.isConnected;function f8(t,e){const n=e.slice(0,-1).length;let s=0;for(;s<n;)t=Gt(t)?s++:t[e[s++]];return t}function d8(t){for(const e in t)if(t.hasOwnProperty(e)&&!Gt(t[e]))return!1;return!0}function Ft(t,e){const n=Array.isArray(e)?e:ep(e)?[e]:U_(e),s=n.length===1?t:f8(t,n),a=n.length-1,l=n[a];return s&&delete s[l],a!==0&&(kt(s)&&Ln(s)||Array.isArray(s)&&d8(s))&&Ft(t,n.slice(0,-1)),t}var t2=t=>{for(const e in t)if(ks(t[e]))return!0;return!1};function pm(t,e={}){const n=Array.isArray(t);if(kt(t)||n)for(const s in t)Array.isArray(t[s])||kt(t[s])&&!t2(t[s])?(e[s]=Array.isArray(t[s])?[]:{},pm(t[s],e[s])):Nn(t[s])||(e[s]=!0);return e}function n2(t,e,n){const s=Array.isArray(t);if(kt(t)||s)for(const a in t)Array.isArray(t[a])||kt(t[a])&&!t2(t[a])?Gt(e)||Gv(n[a])?n[a]=Array.isArray(t[a])?pm(t[a],[]):{...pm(t[a])}:n2(t[a],Nn(e)?{}:e[a],n[a]):n[a]=!ra(t[a],e[a]);return n}var pc=(t,e)=>n2(t,e,pm(e));const CA={value:!1,isValid:!1},NA={value:!0,isValid:!0};var s2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Gt(t[0].attributes.value)?Gt(t[0].value)||t[0].value===""?NA:{value:t[0].value,isValid:!0}:NA:CA}return CA},i2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:s})=>Gt(t)?t:e?t===""?NaN:t&&+t:n&&mi(t)?new Date(t):s?s(t):t;const DA={isValid:!1,value:null};var r2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,DA):DA;function PA(t){const e=t.ref;return B_(e)?e.files:F_(e)?r2(t.refs).value:e2(e)?[...e.selectedOptions].map(({value:n})=>n):Rh(e)?s2(t.refs).value:i2(Gt(e.value)?t.ref.value:e.value,t)}var m8=(t,e,n,s)=>{const a={};for(const l of t){const u=xe(e,l);u&&_t(a,l,u._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:s}},gm=t=>t instanceof RegExp,gc=t=>Gt(t)?t:gm(t)?t.source:kt(t)?gm(t.value)?t.value.source:t.value:t,MA=t=>({isOnSubmit:!t||t===Os.onSubmit,isOnBlur:t===Os.onBlur,isOnChange:t===Os.onChange,isOnAll:t===Os.all,isOnTouch:t===Os.onTouched});const VA="AsyncFunction";var p8=t=>!!t&&!!t.validate&&!!(ks(t.validate)&&t.validate.constructor.name===VA||kt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===VA)),g8=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),OA=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const Bc=(t,e,n,s)=>{for(const a of n||Object.keys(t)){const l=xe(t,a);if(l){const{_f:u,...h}=l;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],a)&&!s)return!0;if(u.ref&&e(u.ref,u.name)&&!s)return!0;if(Bc(h,e))break}else if(kt(h)&&Bc(h,e))break}}};function kA(t,e,n){const s=xe(t,n);if(s||ep(n))return{error:s,name:n};const a=n.split(".");for(;a.length;){const l=a.join("."),u=xe(e,l),h=xe(t,l);if(u&&!Array.isArray(u)&&n!==l)return{name:n};if(h&&h.type)return{name:l,error:h};if(h&&h.root&&h.root.type)return{name:`${l}.root`,error:h.root};a.pop()}return{name:n}}var y8=(t,e,n,s)=>{n(t);const{name:a,...l}=t;return Ln(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(u=>e[u]===(!s||Os.all))},v8=(t,e,n)=>!t||!e||t===e||Uc(t).some(s=>s&&(n?s===e:s.startsWith(e)||e.startsWith(s))),_8=(t,e,n,s,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?s.isOnBlur:a.isOnBlur)?!t:(n?s.isOnChange:a.isOnChange)?t:!0,b8=(t,e)=>!L_(xe(t,e)).length&&Ft(t,e),E8=(t,e,n)=>{const s=Uc(xe(t,n));return _t(s,"root",e[n]),_t(t,n,s),t},kd=t=>mi(t);function jA(t,e,n="validate"){if(kd(t)||Array.isArray(t)&&t.every(kd)||ci(t)&&!t)return{type:n,message:kd(t)?t:"",ref:e}}var bl=t=>kt(t)&&!gm(t)?t:{value:t,message:""},LA=async(t,e,n,s,a,l)=>{const{ref:u,refs:h,required:d,maxLength:p,minLength:g,min:b,max:E,pattern:S,validate:D,name:M,valueAsNumber:k,mount:V}=t._f,P=xe(n,M);if(!V||e.has(M))return{};const q=h?h[0]:u,se=C=>{a&&q.reportValidity&&(q.setCustomValidity(ci(C)?"":C||""),q.reportValidity())},X={},ce=F_(u),j=Rh(u),A=ce||j,N=(k||B_(u))&&Gt(u.value)&&Gt(P)||mm(u)&&u.value===""||P===""||Array.isArray(P)&&!P.length,L=c8.bind(null,M,s,X),B=(C,I,ve,we=sr.maxLength,Z=sr.minLength)=>{const te=C?I:ve;X[M]={type:C?we:Z,message:te,ref:u,...L(C?we:Z,te)}};if(l?!Array.isArray(P)||!P.length:d&&(!A&&(N||Nn(P))||ci(P)&&!P||j&&!s2(h).isValid||ce&&!r2(h).isValid)){const{value:C,message:I}=kd(d)?{value:!!d,message:d}:bl(d);if(C&&(X[M]={type:sr.required,message:I,ref:q,...L(sr.required,I)},!s))return se(I),X}if(!N&&(!Nn(b)||!Nn(E))){let C,I;const ve=bl(E),we=bl(b);if(!Nn(P)&&!isNaN(P)){const Z=u.valueAsNumber||P&&+P;Nn(ve.value)||(C=Z>ve.value),Nn(we.value)||(I=Z<we.value)}else{const Z=u.valueAsDate||new Date(P),te=F=>new Date(new Date().toDateString()+" "+F),me=u.type=="time",Ne=u.type=="week";mi(ve.value)&&P&&(C=me?te(P)>te(ve.value):Ne?P>ve.value:Z>new Date(ve.value)),mi(we.value)&&P&&(I=me?te(P)<te(we.value):Ne?P<we.value:Z<new Date(we.value))}if((C||I)&&(B(!!C,ve.message,we.message,sr.max,sr.min),!s))return se(X[M].message),X}if((p||g)&&!N&&(mi(P)||l&&Array.isArray(P))){const C=bl(p),I=bl(g),ve=!Nn(C.value)&&P.length>+C.value,we=!Nn(I.value)&&P.length<+I.value;if((ve||we)&&(B(ve,C.message,I.message),!s))return se(X[M].message),X}if(S&&!N&&mi(P)){const{value:C,message:I}=bl(S);if(gm(C)&&!P.match(C)&&(X[M]={type:sr.pattern,message:I,ref:u,...L(sr.pattern,I)},!s))return se(I),X}if(D){if(ks(D)){const C=await D(P,n),I=jA(C,q);if(I&&(X[M]={...I,...L(sr.validate,I.message)},!s))return se(I.message),X}else if(kt(D)){let C={};for(const I in D){if(!Ln(C)&&!s)break;const ve=jA(await D[I](P,n),q,I);ve&&(C={...ve,...L(I,ve.message)},se(ve.message),s&&(X[M]=C))}if(!Ln(C)&&(X[M]={ref:q,...C},!s))return X}}return se(!0),X};const T8={mode:Os.onSubmit,reValidateMode:Os.onChange,shouldFocusError:!0};function w8(t={}){let e={...T8,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ks(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},a=kt(e.defaultValues)||kt(e.values)?an(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:an(a),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...g};const E={array:IA(),state:IA()},S=e.criteriaMode===Os.all,D=z=>Y=>{clearTimeout(p),p=setTimeout(z,Y)},M=async z=>{if(!e.disabled&&(g.isValid||b.isValid||z)){const Y=e.resolver?Ln((await j()).errors):await N(s,!0);Y!==n.isValid&&E.state.next({isValid:Y})}},k=(z,Y)=>{!e.disabled&&(g.isValidating||g.validatingFields||b.isValidating||b.validatingFields)&&((z||Array.from(h.mount)).forEach(ne=>{ne&&(Y?_t(n.validatingFields,ne,Y):Ft(n.validatingFields,ne))}),E.state.next({validatingFields:n.validatingFields,isValidating:!Ln(n.validatingFields)}))},V=(z,Y=[],ne,_e,pe=!0,fe=!0)=>{if(_e&&ne&&!e.disabled){if(u.action=!0,fe&&Array.isArray(xe(s,z))){const ye=ne(xe(s,z),_e.argA,_e.argB);pe&&_t(s,z,ye)}if(fe&&Array.isArray(xe(n.errors,z))){const ye=ne(xe(n.errors,z),_e.argA,_e.argB);pe&&_t(n.errors,z,ye),b8(n.errors,z)}if((g.touchedFields||b.touchedFields)&&fe&&Array.isArray(xe(n.touchedFields,z))){const ye=ne(xe(n.touchedFields,z),_e.argA,_e.argB);pe&&_t(n.touchedFields,z,ye)}(g.dirtyFields||b.dirtyFields)&&(n.dirtyFields=pc(a,l)),E.state.next({name:z,isDirty:B(z,Y),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _t(l,z,Y)},P=(z,Y)=>{_t(n.errors,z,Y),E.state.next({errors:n.errors})},q=z=>{n.errors=z,E.state.next({errors:n.errors,isValid:!1})},se=(z,Y,ne,_e)=>{const pe=xe(s,z);if(pe){const fe=xe(l,z,Gt(ne)?xe(a,z):ne);Gt(fe)||_e&&_e.defaultChecked||Y?_t(l,z,Y?fe:PA(pe._f)):ve(z,fe),u.mount&&M()}},X=(z,Y,ne,_e,pe)=>{let fe=!1,ye=!1;const Ae={name:z};if(!e.disabled){if(!ne||_e){(g.isDirty||b.isDirty)&&(ye=n.isDirty,n.isDirty=Ae.isDirty=B(),fe=ye!==Ae.isDirty);const ze=ra(xe(a,z),Y);ye=!!xe(n.dirtyFields,z),ze?Ft(n.dirtyFields,z):_t(n.dirtyFields,z,!0),Ae.dirtyFields=n.dirtyFields,fe=fe||(g.dirtyFields||b.dirtyFields)&&ye!==!ze}if(ne){const ze=xe(n.touchedFields,z);ze||(_t(n.touchedFields,z,ne),Ae.touchedFields=n.touchedFields,fe=fe||(g.touchedFields||b.touchedFields)&&ze!==ne)}fe&&pe&&E.state.next(Ae)}return fe?Ae:{}},ce=(z,Y,ne,_e)=>{const pe=xe(n.errors,z),fe=(g.isValid||b.isValid)&&ci(Y)&&n.isValid!==Y;if(e.delayError&&ne?(d=D(()=>P(z,ne)),d(e.delayError)):(clearTimeout(p),d=null,ne?_t(n.errors,z,ne):Ft(n.errors,z)),(ne?!ra(pe,ne):pe)||!Ln(_e)||fe){const ye={..._e,...fe&&ci(Y)?{isValid:Y}:{},errors:n.errors,name:z};n={...n,...ye},E.state.next(ye)}},j=async z=>{k(z,!0);const Y=await e.resolver(l,e.context,m8(z||h.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return k(z),Y},A=async z=>{const{errors:Y}=await j(z);if(z)for(const ne of z){const _e=xe(Y,ne);_e?_t(n.errors,ne,_e):Ft(n.errors,ne)}else n.errors=Y;return Y},N=async(z,Y,ne={valid:!0})=>{for(const _e in z){const pe=z[_e];if(pe){const{_f:fe,...ye}=pe;if(fe){const Ae=h.array.has(fe.name),ze=pe._f&&p8(pe._f);ze&&g.validatingFields&&k([_e],!0);const rt=await LA(pe,h.disabled,l,S,e.shouldUseNativeValidation&&!Y,Ae);if(ze&&g.validatingFields&&k([_e]),rt[fe.name]&&(ne.valid=!1,Y))break;!Y&&(xe(rt,fe.name)?Ae?E8(n.errors,rt,fe.name):_t(n.errors,fe.name,rt[fe.name]):Ft(n.errors,fe.name))}!Ln(ye)&&await N(ye,Y,ne)}}return ne.valid},L=()=>{for(const z of h.unMount){const Y=xe(s,z);Y&&(Y._f.refs?Y._f.refs.every(ne=>!jy(ne)):!jy(Y._f.ref))&&At(z)}h.unMount=new Set},B=(z,Y)=>!e.disabled&&(z&&Y&&_t(l,z,Y),!ra(F(),a)),C=(z,Y,ne)=>u8(z,h,{...u.mount?l:Gt(Y)?a:mi(z)?{[z]:Y}:Y},ne,Y),I=z=>L_(xe(u.mount?l:a,z,e.shouldUnregister?xe(a,z,[]):[])),ve=(z,Y,ne={})=>{const _e=xe(s,z);let pe=Y;if(_e){const fe=_e._f;fe&&(!fe.disabled&&_t(l,z,i2(Y,fe)),pe=mm(fe.ref)&&Nn(Y)?"":Y,e2(fe.ref)?[...fe.ref.options].forEach(ye=>ye.selected=pe.includes(ye.value)):fe.refs?Rh(fe.ref)?fe.refs.forEach(ye=>{(!ye.defaultChecked||!ye.disabled)&&(Array.isArray(pe)?ye.checked=!!pe.find(Ae=>Ae===ye.value):ye.checked=pe===ye.value||!!pe)}):fe.refs.forEach(ye=>ye.checked=ye.value===pe):B_(fe.ref)?fe.ref.value="":(fe.ref.value=pe,fe.ref.type||E.state.next({name:z,values:an(l)})))}(ne.shouldDirty||ne.shouldTouch)&&X(z,pe,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&Ne(z)},we=(z,Y,ne)=>{for(const _e in Y){if(!Y.hasOwnProperty(_e))return;const pe=Y[_e],fe=z+"."+_e,ye=xe(s,fe);(h.array.has(z)||kt(pe)||ye&&!ye._f)&&!fo(pe)?we(fe,pe,ne):ve(fe,pe,ne)}},Z=(z,Y,ne={})=>{const _e=xe(s,z),pe=h.array.has(z),fe=an(Y);_t(l,z,fe),pe?(E.array.next({name:z,values:an(l)}),(g.isDirty||g.dirtyFields||b.isDirty||b.dirtyFields)&&ne.shouldDirty&&E.state.next({name:z,dirtyFields:pc(a,l),isDirty:B(z,fe)})):_e&&!_e._f&&!Nn(fe)?we(z,fe,ne):ve(z,fe,ne),OA(z,h)&&E.state.next({...n,name:z}),E.state.next({name:u.mount?z:void 0,values:an(l)})},te=async z=>{u.mount=!0;const Y=z.target;let ne=Y.name,_e=!0;const pe=xe(s,ne),fe=ze=>{_e=Number.isNaN(ze)||fo(ze)&&isNaN(ze.getTime())||ra(ze,xe(l,ne,ze))},ye=MA(e.mode),Ae=MA(e.reValidateMode);if(pe){let ze,rt;const Ri=Y.type?PA(pe._f):n8(z),rs=z.type===RA.BLUR||z.type===RA.FOCUS_OUT,Ii=!g8(pe._f)&&!e.resolver&&!xe(n.errors,ne)&&!pe._f.deps||_8(rs,xe(n.touchedFields,ne),n.isSubmitted,Ae,ye),xs=OA(ne,h,rs);_t(l,ne,Ri),rs?(!Y||!Y.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(z),d&&d(0)):pe._f.onChange&&pe._f.onChange(z);const Ss=X(ne,Ri,rs),Hn=!Ln(Ss)||xs;if(!rs&&E.state.next({name:ne,type:z.type,values:an(l)}),Ii)return(g.isValid||b.isValid)&&(e.mode==="onBlur"?rs&&M():rs||M()),Hn&&E.state.next({name:ne,...xs?{}:Ss});if(!rs&&xs&&E.state.next({...n}),e.resolver){const{errors:Ci}=await j([ne]);if(fe(Ri),_e){const Ni=kA(n.errors,s,ne),Tr=kA(Ci,s,Ni.name||ne);ze=Tr.error,ne=Tr.name,rt=Ln(Ci)}}else k([ne],!0),ze=(await LA(pe,h.disabled,l,S,e.shouldUseNativeValidation))[ne],k([ne]),fe(Ri),_e&&(ze?rt=!1:(g.isValid||b.isValid)&&(rt=await N(s,!0)));_e&&(pe._f.deps&&Ne(pe._f.deps),ce(ne,rt,ze,Ss))}},me=(z,Y)=>{if(xe(n.errors,Y)&&z.focus)return z.focus(),1},Ne=async(z,Y={})=>{let ne,_e;const pe=Uc(z);if(e.resolver){const fe=await A(Gt(z)?z:pe);ne=Ln(fe),_e=z?!pe.some(ye=>xe(fe,ye)):ne}else z?(_e=(await Promise.all(pe.map(async fe=>{const ye=xe(s,fe);return await N(ye&&ye._f?{[fe]:ye}:ye)}))).every(Boolean),!(!_e&&!n.isValid)&&M()):_e=ne=await N(s);return E.state.next({...!mi(z)||(g.isValid||b.isValid)&&ne!==n.isValid?{}:{name:z},...e.resolver||!z?{isValid:ne}:{},errors:n.errors}),Y.shouldFocus&&!_e&&Bc(s,me,z?pe:h.mount),_e},F=z=>{const Y={...u.mount?l:a};return Gt(z)?Y:mi(z)?xe(Y,z):z.map(ne=>xe(Y,ne))},ue=(z,Y)=>({invalid:!!xe((Y||n).errors,z),isDirty:!!xe((Y||n).dirtyFields,z),error:xe((Y||n).errors,z),isValidating:!!xe(n.validatingFields,z),isTouched:!!xe((Y||n).touchedFields,z)}),ge=z=>{z&&Uc(z).forEach(Y=>Ft(n.errors,Y)),E.state.next({errors:z?n.errors:{}})},he=(z,Y,ne)=>{const _e=(xe(s,z,{_f:{}})._f||{}).ref,pe=xe(n.errors,z)||{},{ref:fe,message:ye,type:Ae,...ze}=pe;_t(n.errors,z,{...ze,...Y,ref:_e}),E.state.next({name:z,errors:n.errors,isValid:!1}),ne&&ne.shouldFocus&&_e&&_e.focus&&_e.focus()},Ie=(z,Y)=>ks(z)?E.state.subscribe({next:ne=>"values"in ne&&z(C(void 0,Y),ne)}):C(z,Y,!0),Be=z=>E.state.subscribe({next:Y=>{v8(z.name,Y.name,z.exact)&&y8(Y,z.formState||g,Vn,z.reRenderRoot)&&z.callback({values:{...l},...n,...Y,defaultValues:a})}}).unsubscribe,Oe=z=>(u.mount=!0,b={...b,...z.formState},Be({...z,formState:b})),At=(z,Y={})=>{for(const ne of z?Uc(z):h.mount)h.mount.delete(ne),h.array.delete(ne),Y.keepValue||(Ft(s,ne),Ft(l,ne)),!Y.keepError&&Ft(n.errors,ne),!Y.keepDirty&&Ft(n.dirtyFields,ne),!Y.keepTouched&&Ft(n.touchedFields,ne),!Y.keepIsValidating&&Ft(n.validatingFields,ne),!e.shouldUnregister&&!Y.keepDefaultValue&&Ft(a,ne);E.state.next({values:an(l)}),E.state.next({...n,...Y.keepDirty?{isDirty:B()}:{}}),!Y.keepIsValid&&M()},it=({disabled:z,name:Y})=>{(ci(z)&&u.mount||z||h.disabled.has(Y))&&(z?h.disabled.add(Y):h.disabled.delete(Y))},Mn=(z,Y={})=>{let ne=xe(s,z);const _e=ci(Y.disabled)||ci(e.disabled);return _t(s,z,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:z}},name:z,mount:!0,...Y}}),h.mount.add(z),ne?it({disabled:ci(Y.disabled)?Y.disabled:e.disabled,name:z}):se(z,!0,Y.value),{..._e?{disabled:Y.disabled||e.disabled}:{},...e.progressive?{required:!!Y.required,min:gc(Y.min),max:gc(Y.max),minLength:gc(Y.minLength),maxLength:gc(Y.maxLength),pattern:gc(Y.pattern)}:{},name:z,onChange:te,onBlur:te,ref:pe=>{if(pe){Mn(z,Y),ne=xe(s,z);const fe=Gt(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ye=h8(fe),Ae=ne._f.refs||[];if(ye?Ae.find(ze=>ze===fe):fe===ne._f.ref)return;_t(s,z,{_f:{...ne._f,...ye?{refs:[...Ae.filter(jy),fe,...Array.isArray(xe(a,z))?[{}]:[]],ref:{type:fe.type,name:z}}:{ref:fe}}}),se(z,!1,void 0,fe)}else ne=xe(s,z,{}),ne._f&&(ne._f.mount=!1),(e.shouldUnregister||Y.shouldUnregister)&&!(i8(h.array,z)&&u.action)&&h.unMount.add(z)}}},is=()=>e.shouldFocusError&&Bc(s,me,h.mount),ws=z=>{ci(z)&&(E.state.next({disabled:z}),Bc(s,(Y,ne)=>{const _e=xe(s,ne);_e&&(Y.disabled=_e._f.disabled||z,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(pe=>{pe.disabled=_e._f.disabled||z}))},0,!1))},Gs=(z,Y)=>async ne=>{let _e;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let pe=an(l);if(E.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:ye}=await j();n.errors=fe,pe=an(ye)}else await N(s);if(h.disabled.size)for(const fe of h.disabled)Ft(pe,fe);if(Ft(n.errors,"root"),Ln(n.errors)){E.state.next({errors:{}});try{await z(pe,ne)}catch(fe){_e=fe}}else Y&&await Y({...n.errors},ne),is(),setTimeout(is);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ln(n.errors)&&!_e,submitCount:n.submitCount+1,errors:n.errors}),_e)throw _e},Ai=(z,Y={})=>{xe(s,z)&&(Gt(Y.defaultValue)?Z(z,an(xe(a,z))):(Z(z,Y.defaultValue),_t(a,z,an(Y.defaultValue))),Y.keepTouched||Ft(n.touchedFields,z),Y.keepDirty||(Ft(n.dirtyFields,z),n.isDirty=Y.defaultValue?B(z,an(xe(a,z))):B()),Y.keepError||(Ft(n.errors,z),g.isValid&&M()),E.state.next({...n}))},$s=(z,Y={})=>{const ne=z?an(z):a,_e=an(ne),pe=Ln(z),fe=pe?a:_e;if(Y.keepDefaultValues||(a=ne),!Y.keepValues){if(Y.keepDirtyValues){const ye=new Set([...h.mount,...Object.keys(pc(a,l))]);for(const Ae of Array.from(ye))xe(n.dirtyFields,Ae)?_t(fe,Ae,xe(l,Ae)):Z(Ae,xe(fe,Ae))}else{if(j_&&Gt(z))for(const ye of h.mount){const Ae=xe(s,ye);if(Ae&&Ae._f){const ze=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(mm(ze)){const rt=ze.closest("form");if(rt){rt.reset();break}}}}if(Y.keepFieldsRef)for(const ye of h.mount)Z(ye,xe(fe,ye));else s={}}l=e.shouldUnregister?Y.keepDefaultValues?an(a):{}:an(fe),E.array.next({values:{...fe}}),E.state.next({values:{...fe}})}h={mount:Y.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,u.watch=!!e.shouldUnregister,E.state.next({submitCount:Y.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:Y.keepDirty?n.isDirty:!!(Y.keepDefaultValues&&!ra(z,a)),isSubmitted:Y.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:Y.keepDirtyValues?Y.keepDefaultValues&&l?pc(a,l):n.dirtyFields:Y.keepDefaultValues&&z?pc(a,z):Y.keepDirty?n.dirtyFields:{},touchedFields:Y.keepTouched?n.touchedFields:{},errors:Y.keepErrors?n.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},br=(z,Y)=>$s(ks(z)?z(l):z,Y),No=(z,Y={})=>{const ne=xe(s,z),_e=ne&&ne._f;if(_e){const pe=_e.refs?_e.refs[0]:_e.ref;pe.focus&&(pe.focus(),Y.shouldSelect&&ks(pe.select)&&pe.select())}},Vn=z=>{n={...n,...z}},Er={control:{register:Mn,unregister:At,getFieldState:ue,handleSubmit:Gs,setError:he,_subscribe:Be,_runSchema:j,_focusError:is,_getWatch:C,_getDirty:B,_setValid:M,_setFieldArray:V,_setDisabledField:it,_setErrors:q,_getFieldArray:I,_reset:$s,_resetDefaultValues:()=>ks(e.defaultValues)&&e.defaultValues().then(z=>{br(z,e.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:ws,_subjects:E,_proxyFormState:g,get _fields(){return s},get _formValues(){return l},get _state(){return u},set _state(z){u=z},get _defaultValues(){return a},get _names(){return h},set _names(z){h=z},get _formState(){return n},get _options(){return e},set _options(z){e={...e,...z}}},subscribe:Oe,trigger:Ne,register:Mn,handleSubmit:Gs,watch:Ie,setValue:Z,getValues:F,reset:br,resetField:Ai,clearErrors:ge,unregister:At,setError:he,setFocus:No,getFieldState:ue};return{...Er,formControl:Er}}function z_(t={}){const e=mn.useRef(void 0),n=mn.useRef(void 0),[s,a]=mn.useState({isDirty:!1,isValidating:!1,isLoading:ks(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ks(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!ks(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...h}=w8(t);e.current={...h,formState:s}}const l=e.current.control;return l._options=t,l8(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>a({...l._formState}),reRenderRoot:!0});return a(h=>({...h,isReady:!0})),l._formState.isReady=!0,u},[l]),mn.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),mn.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),mn.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),mn.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),mn.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==s.isDirty&&l._subjects.state.next({isDirty:u})}},[l,s.isDirty]),mn.useEffect(()=>{t.values&&!ra(t.values,n.current)?(l._reset(t.values,{keepFieldsRef:!0,...l._options.resetOptions}),n.current=t.values,a(u=>({...u}))):l._resetDefaultValues()},[l,t.values]),mn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=o8(s,l),e.current}const x8=()=>{const[t,e]=O.useState(!1),{login:n,isLoading:s,error:a,clearError:l}=Ht(),u=Ea(),{register:h,handleSubmit:d,formState:{errors:p,isSubmitting:g}}=z_({defaultValues:{email:"",password:"",rememberMe:!1}}),b=async E=>{try{l(),await n(E.email,E.password),Se.success("Welcome back!"),u("/",{replace:!0})}catch{Se.error("Login failed. Please check your credentials.")}};return v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:v.jsxs(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-2xl mb-4",children:v.jsx(ha,{className:"w-8 h-8 text-white fill-current"})}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"Sign in to continue growing together"})]}),v.jsxs(ns.form,{onSubmit:d(b),className:"bg-white rounded-2xl shadow-xl p-6 space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),v.jsx("input",{...h("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email"}}),type:"email",id:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Enter your email"}),p.email&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.email.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{...h("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:t?"text":"password",id:"password",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors",placeholder:"Enter your password"}),v.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:t?v.jsx(om,{className:"w-5 h-5"}):v.jsx(lm,{className:"w-5 h-5"})})]}),p.password&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.password.message})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("label",{className:"flex items-center",children:[v.jsx("input",{...h("rememberMe"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),v.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),v.jsx(Jn,{to:"/auth/forgot-password",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Forgot password?"})]}),a&&v.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:v.jsx("p",{className:"text-sm text-red-600",children:a})}),v.jsx(hi,{type:"submit",loading:s||g,fullWidth:!0,className:"h-12",children:"Sign In"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-gray-300"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),v.jsx(Jn,{to:"/auth/signup",children:v.jsx(hi,{variant:"secondary",fullWidth:!0,children:"Create Account"})})]}),v.jsxs("p",{className:"text-center text-xs text-gray-500 mt-8",children:["By signing in, you agree to our"," ",v.jsx("a",{href:"#",className:"text-primary-600 hover:underline",children:"Terms of Service"})," ","and"," ",v.jsx("a",{href:"#",className:"text-primary-600 hover:underline",children:"Privacy Policy"})]})]})})},S8=()=>{const t=Ea(),{signup:e,isLoading:n,error:s,clearError:a}=Ht(),[l,u]=O.useState(!1),[h,d]=O.useState(!1),{register:p,handleSubmit:g,formState:{errors:b,isValid:E},watch:S,reset:D}=z_({mode:"onChange"}),M=S("password"),k=async V=>{if(V.password!==V.confirmPassword){Se.error("Passwords do not match");return}try{a(),await e(V.email,V.password,V.displayName,V.age,V.gender),Se.success("Account created successfully!"),D(),t("/dashboard")}catch(P){console.error("Signup error:",P);const q=P instanceof Error?P.message:"Failed to create account";Se.error(q)}};return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Create your account"}),v.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Start building deeper connections today"})]}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g(k),children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(_C,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{...p("displayName",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"},maxLength:{value:50,message:"Name must be less than 50 characters"}}),type:"text",autoComplete:"name",className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.displayName?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,placeholder:"Enter your full name"})]}),b.displayName&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.displayName.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(yC,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{...p("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",autoComplete:"email",className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.email?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,placeholder:"Enter your email"})]}),b.email&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.email.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700",children:"Age"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(e_,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{...p("age",{required:"Age is required",min:{value:18,message:"You must be at least 18 years old"},max:{value:120,message:"Please enter a valid age"},valueAsNumber:!0}),type:"number",className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.age?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,placeholder:"Enter your age"})]}),b.age&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.age.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Gl,{className:"h-5 w-5 text-gray-400"})}),v.jsxs("select",{...p("gender",{required:"Please select your gender"}),className:`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.gender?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,children:[v.jsx("option",{value:"",children:"Select gender"}),v.jsx("option",{value:"male",children:"Male"}),v.jsx("option",{value:"female",children:"Female"}),v.jsx("option",{value:"other",children:"Other"})]})]}),b.gender&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.gender.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(wv,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{...p("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain uppercase, lowercase, and number"}}),type:l?"text":"password",autoComplete:"new-password",className:`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.password?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,placeholder:"Create a strong password"}),v.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!l),children:l?v.jsx(om,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):v.jsx(lm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),b.password&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.password.message})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),v.jsxs("div",{className:"mt-1 relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(wv,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{...p("confirmPassword",{required:"Please confirm your password",validate:V=>V===M||"Passwords do not match"}),type:h?"text":"password",autoComplete:"new-password",className:`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 ${b.confirmPassword?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-green-500"}`,placeholder:"Confirm your password"}),v.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!h),children:h?v.jsx(om,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):v.jsx(lm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),b.confirmPassword&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.confirmPassword.message})]})]}),s&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:v.jsx("p",{className:"text-sm text-red-600",children:s})}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:!E||n,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors ${!E||n?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:n?v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"})}),v.jsx("div",{className:"text-center",children:v.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",v.jsx(Jn,{to:"/login",className:"font-medium text-green-600 hover:text-green-500 transition-colors",children:"Sign in here"})]})})]})]})})};var a2="basil",A8=function(e){return e===3?"v3":e},o2="https://js.stripe.com",R8="".concat(o2,"/").concat(a2,"/stripe.js"),I8=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C8=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var N8=function(e){return I8.test(e)||C8.test(e)},D8=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o2,'"]')),n=0;n<e.length;n++){var s=e[n];if(N8(s.src))return s}return null},UA=function(e){var n="",s=document.createElement("script");s.src="".concat(R8).concat(n);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},P8=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},yc=null,gd=null,yd=null,M8=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},V8=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},O8=function(e){return yc!==null?yc:(yc=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var a=D8();if(!(a&&e)){if(!a)a=UA(e);else if(a&&yd!==null&&gd!==null){var l;a.removeEventListener("load",yd),a.removeEventListener("error",gd),(l=a.parentNode)===null||l===void 0||l.removeChild(a),a=UA(e)}}yd=V8(n,s),gd=M8(s),a.addEventListener("load",yd),a.addEventListener("error",gd)}catch(u){s(u);return}}),yc.catch(function(n){return yc=null,Promise.reject(n)}))},k8=function(e,n,s){if(e===null)return null;var a=n[0],l=a.match(/^pk_test/),u=A8(e.version),h=a2;l&&u!==h&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,n);return P8(d,s),d},vc,l2=!1,u2=function(){return vc||(vc=O8(null).catch(function(e){return vc=null,Promise.reject(e)}),vc)};Promise.resolve().then(function(){return u2()}).catch(function(t){l2||console.warn(t)});var j8=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];l2=!0;var a=Date.now();return u2().then(function(l){return k8(l,n,a)})};let Ly;const L8=()=>(Ly||(Ly=j8("")),Ly),Uy=[{id:"free",name:"Free",description:"Perfect for trying out your first Innermost",price:0,currency:"USD",interval:"month",maxInnermosts:1,features:["1 Active Innermost","Basic Wants & Willing Lists","Weekly Guessing Game","Basic Scoring System"]},{id:"premium",name:"Premium",description:"Full access to grow multiple relationships",price:1,currency:"USD",interval:"month",maxInnermosts:3,features:["Up to 3 Active Innermosts","Advanced Analytics & Insights","Priority Support","Export Data","Custom Wants Categories","Extended Score History"],stripePriceId:"price_1234567890abcdef"}];class fi{static canAccessPremiumFeatures(e){return e.subscriptionStatus==="premium"&&(!e.subscriptionEndDate||e.subscriptionEndDate>new Date)}static canCreateInnermost(e,n){const s=this.getUserPlan(e);return n<s.maxInnermosts}static getUserPlan(e){return this.canAccessPremiumFeatures(e)?Uy.find(n=>n.id==="premium"):Uy.find(n=>n.id==="free")}static async createCheckoutSession(e,n,s,a){const l=Uy.find(u=>u.id===n);if(!l||!l.stripePriceId)throw new Error("Invalid subscription plan");try{const h=await fetch("http://localhost:3001/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.id}`},body:JSON.stringify({priceId:l.stripePriceId,userId:e.id,userEmail:e.email,successUrl:s,cancelUrl:a,mode:"subscription"})});if(!h.ok){const p=await h.json();throw new Error(p.message||"Failed to create checkout session")}const{sessionId:d}=await h.json();return{sessionId:d}}catch(u){throw console.error("Stripe checkout session creation failed:",u),new Error("Unable to start checkout process. Please try again.")}}static async redirectToCheckout(e,n){try{const s=await L8();if(!s)throw new Error("Stripe failed to initialize");const a=window.location.origin,{sessionId:l}=await this.createCheckoutSession(e,n,`${a}/subscription/success`,`${a}/subscription/cancel`),{error:u}=await s.redirectToCheckout({sessionId:l});if(u)throw console.error("Stripe redirect error:",u),new Error(u.message||"Checkout redirect failed")}catch(s){throw console.error("Checkout error:",s),new Error(s instanceof Error?s.message:"Failed to start checkout process")}}static async cancelSubscription(e){try{const s=await fetch("http://localhost:3001/api/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.id}`},body:JSON.stringify({userId:e.id})});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to cancel subscription")}const{message:a}=await s.json();return a}catch(n){throw console.error("Subscription cancellation failed:",n),new Error("Unable to cancel subscription. Please contact support.")}}static async getBillingInfo(e){try{const s=await fetch(`http://localhost:3001/api/billing-info/${e.id}`,{headers:{Authorization:`Bearer ${e.id}`}});if(!s.ok)return{status:e.subscriptionStatus==="premium"?"active":"canceled",currentPeriodEnd:e.subscriptionEndDate,cancelAtPeriodEnd:!1};const a=await s.json();return{status:a.status,currentPeriodEnd:a.currentPeriodEnd?new Date(a.currentPeriodEnd):void 0,cancelAtPeriodEnd:a.cancelAtPeriodEnd||!1}}catch(n){return console.error("Failed to fetch billing info:",n),{status:e.subscriptionStatus==="premium"?"active":"canceled",currentPeriodEnd:e.subscriptionEndDate,cancelAtPeriodEnd:!1}}}static formatPrice(e){return e.price===0?"Free":`$${e.price}/${e.interval}`}static getFeatureComparison(){return[{feature:"Active Innermosts",free:"1",premium:"3"},{feature:"Wants & Willing Lists",free:!0,premium:!0},{feature:"Weekly Scoring",free:!0,premium:!0},{feature:"Advanced Analytics",free:!1,premium:!0},{feature:"Data Export",free:!1,premium:!0},{feature:"Priority Support",free:!1,premium:!0},{feature:"Custom Categories",free:!1,premium:!0}]}}const U8=()=>{const{user:t}=Ht(),[e,n]=O.useState([]),[s,a]=O.useState(!0),[l,u]=O.useState(!1),[h,d]=O.useState({email:"",message:""}),[p,g]=O.useState(!1);O.useEffect(()=>{t?.id&&b()},[t?.id]);const b=async()=>{if(t?.id)try{a(!0);const V=await yn.getUserInnermosts(t.id);n(V)}catch(V){console.error("Error loading innermosts:",V),Se.error("Failed to load your relationships")}finally{a(!1)}},E=()=>t?fi.canCreateInnermost(t,e.length):!1,S=async()=>{if(!t||!h.email.trim()){Se.error("Please enter a valid email address");return}if(h.email===t.email){Se.error("You cannot pair with yourself");return}try{g(!0);const V=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),P={partnerA:t.id,partnerB:"",partnerAEmail:t.email,partnerBEmail:h.email.trim().toLowerCase(),status:"pending",pairingCode:V,inviteMessage:h.message?.trim()||void 0},q=await yn.createInnermost(P);n(se=>[...se,q]),d({email:"",message:""}),u(!1),Se.success(`Invitation sent to ${h.email}!`)}catch(V){console.error("Error creating innermost:",V),Se.error("Failed to send invitation")}finally{g(!1)}},D=V=>{switch(V){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"paused":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=V=>{switch(V){case"active":return v.jsx(ha,{className:"w-4 h-4"});case"pending":return v.jsx(e_,{className:"w-4 h-4"});case"paused":return v.jsx(t_,{className:"w-4 h-4"});default:return v.jsx(Gl,{className:"w-4 h-4"})}},k=V=>V.partnerA===t?.id?V.partnerBEmail:V.partnerAEmail;return s?v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"animate-pulse space-y-4",children:[v.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3"}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-20 bg-gray-300 rounded"}),v.jsx("div",{className:"h-20 bg-gray-300 rounded"})]})]})}):v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[v.jsx(ha,{className:"w-6 h-6 text-red-500"}),"My Innermosts"]}),v.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[e.length," of ",fi.getUserPlan(t).maxInnermosts," relationships"]})]}),E()&&v.jsxs("button",{onClick:()=>u(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[v.jsx(eh,{className:"w-4 h-4"}),"New Innermost"]})]}),v.jsx(R_,{children:l&&v.jsx(ns.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>u(!1),children:v.jsxs(ns.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 w-full max-w-md",onClick:V=>V.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-bold mb-4",children:"Invite Someone Special"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Their Email Address"}),v.jsx("input",{type:"email",value:h.email,onChange:V=>d(P=>({...P,email:V.target.value})),placeholder:"partner@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Personal Message (Optional)"}),v.jsx("textarea",{value:h.message,onChange:V=>d(P=>({...P,message:V.target.value})),placeholder:"Hey! I'd love to grow our relationship together using Willing Box...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),v.jsxs("div",{className:"flex gap-3 mt-6",children:[v.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:S,disabled:!h.email.trim()||p,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:p?"Sending...":"Send Invitation"})]})]})})}),v.jsx("div",{className:"space-y-4",children:e.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Innermosts Yet"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"Start building deeper connections by inviting someone special."}),E()&&v.jsxs("button",{onClick:()=>u(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg inline-flex items-center gap-2 transition-colors",children:[v.jsx(eh,{className:"w-5 h-5"}),"Create Your First Innermost"]})]}):e.map(V=>v.jsx(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${D(V.status)}`,children:[M(V.status),V.status.charAt(0).toUpperCase()+V.status.slice(1)]}),v.jsxs("span",{className:"text-sm text-gray-500",children:["Created ",V.createdAt.toLocaleDateString()]})]}),v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx(Gl,{className:"w-4 h-4 text-gray-400"}),v.jsx("span",{className:"text-gray-900 font-medium",children:k(V)})]}),V.inviteMessage&&v.jsxs("p",{className:"text-sm text-gray-600 italic ml-6",children:['"',V.inviteMessage,'"']})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[V.status==="active"&&v.jsx(Jn,{to:`/innermosts/${V.id}`,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-md text-sm transition-colors",children:"View"}),V.status==="pending"&&v.jsx("span",{className:"text-sm text-yellow-600 font-medium",children:"Waiting for response"})]})]})},V.id))}),!E()&&e.length>=1&&v.jsx(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-green-200 rounded-lg p-4 mt-6",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(go,{className:"w-6 h-6 text-green-600"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"font-semibold text-green-900",children:"Want More Relationships?"}),v.jsx("p",{className:"text-sm text-green-700",children:"Upgrade to Premium to manage up to 3 active Innermosts and unlock advanced features."})]}),v.jsx(Jn,{to:"/subscription",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Upgrade"})]})})]})},By=[{id:"communication",label:"Communication",icon:"💬",description:"How you want to connect and talk"},{id:"affection",label:"Affection & Romance",icon:"💕",description:"Physical and emotional intimacy"},{id:"time",label:"Quality Time",icon:"⏰",description:"How you want to spend time together"},{id:"household",label:"Home & Lifestyle",icon:"🏠",description:"Daily life and household matters"},{id:"personal",label:"Personal Support",icon:"🌟",description:"Individual growth and support needs"}],B8=()=>{const{innermostId:t}=Qv(),e=Ea(),{user:n}=Ht(),[s,a]=O.useState(null),[l,u]=O.useState([]),[h,d]=O.useState({text:"",category:"communication",isMostWanted:!1}),[p,g]=O.useState(1),[b,E]=O.useState(null),[S,D]=O.useState(!0),[M,k]=O.useState(!1),V=20,P=3,q=l.filter(C=>C.isMostWanted).length;O.useEffect(()=>{if(!t||!n){e("/innermosts");return}se()},[t,n]);const se=async()=>{if(!(!t||!n))try{D(!0);const I=(await yn.getUserInnermosts(n.id)).find(we=>we.id===t);if(!I){Se.error("Innermost not found"),e("/innermosts");return}a(I);const ve=await yn.getWillingBox(t);ve&&u(ve.wants||[])}catch(C){console.error("Error loading data:",C),Se.error("Failed to load wants")}finally{D(!1)}},X=()=>{if(!h.text.trim()){Se.error("Please enter what you want");return}if(l.length>=V){Se.error(`Maximum ${V} wants allowed`);return}if(h.isMostWanted&&q>=P){Se.error(`Maximum ${P} Most Wanted items allowed`);return}const C={id:Date.now().toString(),text:h.text.trim(),category:h.category,isMostWanted:h.isMostWanted,order:l.length,createdBy:n.id};u(I=>[...I,C]),d({text:"",category:b||"communication",isMostWanted:!1})},ce=C=>{u(I=>I.filter(ve=>ve.id!==C).map((ve,we)=>({...ve,order:we})))},j=C=>{const I=l.find(ve=>ve.id===C);if(I){if(!I.isMostWanted&&q>=P){Se.error(`Maximum ${P} Most Wanted items allowed`);return}u(ve=>ve.map(we=>we.id===C?{...we,isMostWanted:!we.isMostWanted}:we))}},A=async()=>{if(!(!t||!n)){if(l.length===0){Se.error("Please add at least one want before continuing");return}try{k(!0);let C=await yn.getWillingBox(t);C?C.wants=l:C={id:t,innermostId:t,partnerA:s.partnerA,partnerB:s.partnerB,wants:l,partnerAWilling:[],partnerBWilling:[],isLocked:!1},await yn.saveWillingBox(C),Se.success("Your wants have been saved!"),e(`/innermosts/${t}/willing`)}catch(C){console.error("Error saving wants:",C),Se.error("Failed to save wants")}finally{k(!1)}}},N=C=>l.filter(I=>I.category===C);if(S)return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"animate-pulse space-y-4",children:[v.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"}),v.jsx("div",{className:"h-32 bg-gray-300 rounded"})]})});if(p===1)return v.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("button",{onClick:()=>e("/innermosts"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[v.jsx(po,{className:"w-4 h-4"}),"Back to Innermosts"]}),v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Your Wants List"}),v.jsxs("p",{className:"text-gray-600",children:["Choose categories that matter to you in this relationship. You can add up to ",V," wants total, with up to ",P,' marked as "Most Wanted" for extra scoring.']})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:By.map(C=>{const I=N(C.id),ve=b===C.id;return v.jsx(ns.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 border-2 rounded-lg cursor-pointer transition-all ${ve?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>E(ve?null:C.id),children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("div",{className:"text-3xl",children:C.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:C.label}),v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:C.description}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"text-sm text-gray-500",children:[I.length," wants added"]}),I.filter(we=>we.isMostWanted).length>0&&v.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[v.jsx(go,{className:"w-4 h-4 fill-current"}),v.jsx("span",{className:"text-sm",children:I.filter(we=>we.isMostWanted).length})]})]})]})]})},C.id)})}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{className:"text-sm text-gray-500",children:[l.length,"/",V," wants • ",q,"/",P," Most Wanted"]}),v.jsxs("div",{className:"flex gap-3",children:[b&&v.jsxs("button",{onClick:()=>g(2),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors",children:["Add Wants to ",By.find(C=>C.id===b)?.label,v.jsx(k5,{className:"w-4 h-4"})]}),l.length>0&&v.jsxs("button",{onClick:A,disabled:M,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors disabled:bg-gray-400",children:[v.jsx(Al,{className:"w-4 h-4"}),M?"Saving...":"Continue to Willing List"]})]})]})]});const L=By.find(C=>C.id===b),B=N(b);return v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("button",{onClick:()=>g(1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[v.jsx(po,{className:"w-4 h-4"}),"Back to Categories"]}),v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx("span",{className:"text-2xl",children:L.icon}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:L.label})]}),v.jsx("p",{className:"text-gray-600",children:L.description})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What do you want in this area?"}),v.jsx("textarea",{value:h.text,onChange:C=>d(I=>({...I,text:C.target.value,category:b})),placeholder:'Example: "I want us to have deeper conversations about our day"',rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:h.isMostWanted,onChange:C=>d(I=>({...I,isMostWanted:C.target.checked})),disabled:!h.isMostWanted&&q>=P,className:"w-4 h-4 text-yellow-600 rounded focus:ring-yellow-500"}),v.jsx(go,{className:`w-4 h-4 ${h.isMostWanted?"text-yellow-600 fill-current":"text-gray-400"}`}),v.jsx("span",{className:"text-sm font-medium",children:"Most Wanted (2x points!)"})]}),v.jsxs("span",{className:"text-xs text-gray-500",children:[q,"/",P," used"]})]})]}),v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-500",children:[l.length,"/",V," total wants"]}),v.jsxs("button",{onClick:X,disabled:!h.text.trim()||l.length>=V,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[v.jsx(eh,{className:"w-4 h-4"}),"Add Want"]})]})]}),B.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Your ",L.label," Wants (",B.length,")"]}),v.jsx("div",{className:"space-y-2",children:v.jsx(R_,{children:B.map(C=>v.jsxs(ns.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"bg-gray-50 border border-gray-200 rounded-lg p-3 flex items-start gap-3",children:[v.jsx("button",{onClick:()=>j(C.id),className:"mt-0.5 flex-shrink-0",children:v.jsx(go,{className:`w-4 h-4 ${C.isMostWanted?"text-yellow-600 fill-current":"text-gray-400 hover:text-yellow-400"}`})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-gray-900",children:C.text}),C.isMostWanted&&v.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Most Wanted • 2x Points"})]}),v.jsx("button",{onClick:()=>ce(C.id),className:"text-gray-400 hover:text-red-600 flex-shrink-0",children:v.jsx(vC,{className:"w-4 h-4"})})]},C.id))})})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsxs("button",{onClick:()=>g(1),className:"text-gray-600 hover:text-gray-900 px-4 py-2 flex items-center gap-2",children:[v.jsx(po,{className:"w-4 h-4"}),"Choose Another Category"]}),l.length>0&&v.jsxs("button",{onClick:A,disabled:M,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[v.jsx(Al,{className:"w-4 h-4"}),M?"Saving...":"Continue to Willing List"]})]})]})},F8={communication:{label:"Communication",icon:"💬"},affection:{label:"Affection & Romance",icon:"💕"},time:{label:"Quality Time",icon:"⏰"},household:{label:"Home & Lifestyle",icon:"🏠"},personal:{label:"Personal Support",icon:"🌟"}},z8=()=>{const{innermostId:t}=Qv(),e=Ea(),{user:n}=Ht(),[s,a]=O.useState(null),[l,u]=O.useState(null),[h,d]=O.useState([]),[p,g]=O.useState([]),[b,E]=O.useState(!0),[S,D]=O.useState(!1),[M,k]=O.useState(!0);O.useEffect(()=>{if(!t||!n){e("/innermosts");return}V()},[t,n]);const V=async()=>{if(!(!t||!n))try{E(!0);const N=(await yn.getUserInnermosts(n.id)).find(I=>I.id===t);if(!N){Se.error("Innermost not found"),e("/innermosts");return}a(N);const L=await yn.getWillingBox(t);if(!L||!L.wants||L.wants.length===0){Se.error("No wants found. Please create your wants list first."),e(`/innermosts/${t}/wants`);return}u(L),d(L.wants);const C=n.id===N.partnerA?L.partnerAWilling:L.partnerBWilling;C&&g(C.map(I=>I.wantId))}catch(A){console.error("Error loading data:",A),Se.error("Failed to load willing selection")}finally{E(!1)}},P=A=>{g(N=>N.includes(A)?N.filter(L=>L!==A):[...N,A])},q=async()=>{if(!(!l||!n||!s)){if(p.length===0){Se.error("Please select at least one item you're willing to work on");return}try{D(!0);const A=n.id===s.partnerA,N=p.map(B=>({wantId:B,effort:""})),L={...l,[A?"partnerAWilling":"partnerBWilling"]:N};await yn.saveWillingBox(L),Se.success("Your willing selections have been saved!"),e(`/innermosts/${t}`)}catch(A){console.error("Error saving willing selections:",A),Se.error("Failed to save willing selections")}finally{D(!1)}}},se=()=>{const A={};return h.forEach(N=>{A[N.category]||(A[N.category]=[]),A[N.category].push(N)}),A};if(b)return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"animate-pulse space-y-4",children:[v.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"}),v.jsx("div",{className:"h-32 bg-gray-300 rounded"})]})});if(!h.length)return v.jsxs("div",{className:"p-4 text-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Wants Found"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"You need to create your wants list first."}),v.jsx("button",{onClick:()=>e(`/innermosts/${t}/wants`),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg",children:"Create Wants List"})]});const X=se(),ce=p.length,j=h.length;return v.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("button",{onClick:()=>e(`/innermosts/${t}`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[v.jsx(po,{className:"w-4 h-4"}),"Back to Innermost"]}),v.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[v.jsx(ha,{className:"w-8 h-8 text-red-500"}),"Select What You're Willing to Work On"]}),v.jsx("p",{className:"text-gray-600",children:"Choose which of your partner's wants you're willing to put effort into. Your selections are completely private - your partner will never see what you didn't choose."})]}),v.jsx(R_,{children:M&&v.jsx(ns.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(wv,{className:"w-5 h-5 text-green-600 mt-0.5"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-green-900 font-semibold mb-1",children:"Privacy Protected"}),v.jsx("p",{className:"text-green-800 text-sm mb-3",children:"Your partner will only see what you choose to work on. Items you don't select remain completely hidden, preserving your autonomy and preventing any pressure or judgment."}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(om,{className:"w-4 h-4 text-green-600"}),v.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Unselected items = Invisible to partner"})]})]}),v.jsx("button",{onClick:()=>k(!1),className:"text-green-600 hover:text-green-800",children:v.jsx(Al,{className:"w-5 h-5"})})]})})}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:v.jsx(ha,{className:"w-6 h-6 text-green-600"})}),v.jsxs("div",{children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[ce," of ",j," Selected"]}),v.jsx("p",{className:"text-sm text-gray-600",children:"Choose what feels authentic to work on right now"})]})]}),ce>0&&v.jsxs("button",{onClick:q,disabled:S,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[v.jsx(Al,{className:"w-4 h-4"}),S?"Saving...":"Save Selections"]})]}),ce>0&&v.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:v.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${ce/j*100}%`}})})]}),v.jsx("div",{className:"space-y-8",children:Object.entries(X).map(([A,N])=>{const L=F8[A],B=N.filter(C=>p.includes(C.id)).length;return v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("span",{className:"text-2xl",children:L.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:L.label}),v.jsxs("p",{className:"text-sm text-gray-600",children:[B," of ",N.length," selected"]})]})]}),v.jsx("div",{className:"grid grid-cols-1 gap-3",children:N.sort((C,I)=>C.isMostWanted&&!I.isMostWanted?-1:!C.isMostWanted&&I.isMostWanted?1:C.order-I.order).map(C=>{const I=p.includes(C.id);return v.jsx(ns.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${I?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>P(C.id),children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center mt-0.5 ${I?"bg-green-600 border-green-600":"border-gray-300"}`,children:I&&v.jsx(Al,{className:"w-3 h-3 text-white"})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"flex items-start gap-2 mb-1",children:C.isMostWanted&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(go,{className:"w-4 h-4 text-yellow-600 fill-current"}),v.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-medium",children:"Most Wanted • 2x Points"})]})}),v.jsx("p",{className:`text-gray-900 font-medium mb-1 ${C.isMostWanted?"text-base":"text-sm"}`,children:C.text}),I&&v.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.jsx(lm,{className:"w-4 h-4 text-green-600"}),v.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Your partner will see your effort on this"})]})]})]})},C.id)})})]},A)})}),ce>0&&v.jsx("div",{className:"sticky bottom-4 mt-8",children:v.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("p",{className:"font-semibold text-gray-900",children:[ce," items selected"]}),v.jsx("p",{className:"text-sm text-gray-600",children:"Ready to commit to working on these together?"})]}),v.jsxs("button",{onClick:q,disabled:S,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-8 py-3 rounded-lg flex items-center gap-2 transition-colors font-semibold",children:[v.jsx(Al,{className:"w-5 h-5"}),S?"Saving...":"Save & Continue"]})]})})})]})};class ym{static calculateGuessPoints(e,n,s){if(!e.guessedWantId||!n)return{guesserPoints:0,performerPoints:0};if(!(e.guessedWantId===n.wishId))return{guesserPoints:0,performerPoints:0};const u=s.find(g=>g.id===n.wishId)?.isMostWanted||!1,h=n.priority===1;let d=1,p=1;return u&&(d=3,p=3),h&&(p*=2),{guesserPoints:1*d,performerPoints:2*p}}static calculateWeeklyScore(e,n,s,a,l,u){const h=e?this.calculateGuessPoints(e,a,u):{guesserPoints:0,performerPoints:0},d=n?this.calculateGuessPoints(n,s,l):{guesserPoints:0,performerPoints:0};return{partnerAGuess:e?.guessedWantId||null,partnerBGuess:n?.guessedWantId||null,partnerAActualEffort:s,partnerBActualEffort:a,partnerAGuessingPoints:h.guesserPoints,partnerAPerformingPoints:d.performerPoints,partnerAScore:h.guesserPoints+d.performerPoints,partnerBGuessingPoints:d.guesserPoints,partnerBPerformingPoints:h.performerPoints,partnerBScore:d.guesserPoints+h.performerPoints}}static validateWishList(e){return e.length!==12?!1:e.filter(s=>s.isMostWanted).length===1}static validateWishlist=ym.validateWishList;static validateMostWanted=ym.validateWishList;static validateWillingList(e,n){if(e.length!==3)return!1;const s=Object.values(n).sort(),a=[1,2,3];return JSON.stringify(s)===JSON.stringify(a)}static calculateCumulativeScore(e){const n=e.reduce((s,a)=>({partnerAGuessing:s.partnerAGuessing+a.partnerAGuessingPoints,partnerAPerforming:s.partnerAPerforming+a.partnerAPerformingPoints,partnerBGuessing:s.partnerBGuessing+a.partnerBGuessingPoints,partnerBPerforming:s.partnerBPerforming+a.partnerBPerformingPoints}),{partnerAGuessing:0,partnerAPerforming:0,partnerBGuessing:0,partnerBPerforming:0});return{partnerATotal:n.partnerAGuessing+n.partnerAPerforming,partnerBTotal:n.partnerBGuessing+n.partnerBPerforming,breakdown:n}}}const q8=()=>{const{innermostId:t,weekNumber:e}=Qv(),n=Ea(),{user:s}=Ht(),[a,l]=O.useState(null),[u,h]=O.useState(null),[d,p]=O.useState({}),[g,b]=O.useState(null),[E,S]=O.useState(!0),[D,M]=O.useState(!1),[k,V]=O.useState(!1),P=e?parseInt(e):1;O.useEffect(()=>{if(!t||!s){n("/innermosts");return}q()},[t,s,e]);const q=async()=>{if(!(!t||!s))try{S(!0);const I=(await yn.getUserInnermosts(s.id)).find(te=>te.id===t);if(!I){Se.error("Innermost not found"),n("/innermosts");return}l(I);const ve=await yn.getWillingBox(t);if(!ve){Se.error("No willing box found"),n(`/innermosts/${t}`);return}h(ve);const Z=(await yn.getWeeklyScores(t)).find(te=>te.weekNumber===P);if(Z){b(Z),V(!0);const me=s.id===I.partnerA?Z.partnerAGuesses:Z.partnerBGuesses;if(me){const Ne={};me.forEach(F=>{Ne[F.wantId]=F.effort}),p(Ne)}}}catch(C){console.error("Error loading data:",C),Se.error("Failed to load weekly game")}finally{S(!1)}},se=(C,I)=>{p(ve=>({...ve,[C]:I}))},X=async()=>{if(!u||!s||!a)return;const C=ce();if(C.filter(ve=>!d[ve.wantId]||d[ve.wantId].trim()==="").length>0){Se.error(`Please make guesses for all ${C.length} items`);return}try{M(!0);const ve=s.id===a.partnerA,we=Object.entries(d).map(([te,me])=>({wantId:te,effort:me.trim()})),Z=g;if(Z){const te={...Z,[ve?"partnerAGuesses":"partnerBGuesses"]:we};await yn.saveWeeklyScore(te),b(te)}else{const te={id:`${t}_week_${P}`,innermostId:t,weekNumber:P,partnerA:a.partnerA,partnerB:a.partnerB,partnerAGuesses:ve?we:[],partnerBGuesses:ve?[]:we,partnerAScore:0,partnerBScore:0,isComplete:!1};await yn.saveWeeklyScore(te),b(te)}Se.success("Your guesses have been submitted!"),V(!0)}catch(ve){console.error("Error submitting guesses:",ve),Se.error("Failed to submit guesses")}finally{M(!1)}},ce=()=>!u||!a||!s?[]:(s.id===a.partnerA?u.partnerBWilling:u.partnerAWilling)||[],j=C=>u?.wants?.find(I=>I.id===C),A=()=>!g||!u?null:ym.calculateWeeklyScores(g,u.wants||[],u.partnerAWilling||[],u.partnerBWilling||[]);if(E)return v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"animate-pulse space-y-4",children:[v.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/2"}),v.jsx("div",{className:"h-32 bg-gray-300 rounded"})]})});if(k&&g){const C=A(),I=s?.id===a?.partnerA,ve=I?C?.partnerAScore||0:C?.partnerBScore||0,we=I?C?.partnerBScore||0:C?.partnerAScore||0;return v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("button",{onClick:()=>n(`/innermosts/${t}`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[v.jsx(po,{className:"w-4 h-4"}),"Back to Innermost"]}),v.jsxs("div",{className:"text-center",children:[v.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Week ",P," Results"]}),v.jsx("p",{className:"text-gray-600",children:"Here's how you both did this week!"})]})]}),v.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:v.jsxs("div",{className:"flex items-center justify-center gap-8",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-2",children:v.jsx(Mc,{className:"w-10 h-10 text-green-600"})}),v.jsx("p",{className:"text-sm text-gray-600",children:"Your Score"}),v.jsx("p",{className:"text-3xl font-bold text-green-600",children:ve})]}),v.jsx("div",{className:"text-center text-gray-400",children:v.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center mb-2",children:v.jsx("span",{className:"text-lg font-bold",children:"VS"})})}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-2",children:v.jsx(Mc,{className:"w-10 h-10 text-green-600"})}),v.jsx("p",{className:"text-sm text-gray-600",children:"Partner Score"}),v.jsx("p",{className:"text-3xl font-bold text-green-600",children:we})]})]})}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Guesses"}),ce().map(Z=>{const te=j(Z.wantId);if(!te)return null;const me=d[Z.wantId]||"",Ne=Z.effort||"";return v.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[te.isMostWanted&&v.jsx(go,{className:"w-5 h-5 text-yellow-600 fill-current mt-0.5"}),v.jsx("p",{className:"font-medium text-gray-900 flex-1",children:te.text})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-600 font-medium",children:"Your Guess:"}),v.jsx("p",{className:"text-gray-900",children:me||"No guess"})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-600 font-medium",children:"Actual Effort:"}),v.jsx("p",{className:"text-gray-900",children:Ne||"Not completed"})]})]}),me===Ne&&v.jsxs("div",{className:"flex items-center gap-2 mt-2 text-green-600",children:[v.jsx(z5,{className:"w-4 h-4"}),v.jsxs("span",{className:"text-sm font-medium",children:["Perfect match! +",te.isMostWanted?2:1," point"]})]})]},Z.wantId)})]})]})}const N=ce(),L=N.length,B=Object.keys(d).filter(C=>d[C]?.trim()).length;return v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("button",{onClick:()=>n(`/innermosts/${t}`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[v.jsx(po,{className:"w-4 h-4"}),"Back to Innermost"]}),v.jsxs("div",{className:"text-center",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[v.jsx(mS,{className:"w-6 h-6 text-green-600"}),v.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Week ",P," Guessing Game"]})]}),v.jsx("p",{className:"text-gray-600",children:"Guess how your partner put effort into the items they selected. Correct guesses earn you points!"})]})]}),v.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-green-900 font-semibold",children:"Scoring Rules"}),v.jsx("p",{className:"text-green-800 text-sm",children:"1 point for correct guesses • 2 points for Most Wanted items"})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("p",{className:"text-green-900 font-semibold",children:[B,"/",L]}),v.jsx("p",{className:"text-green-800 text-sm",children:"Guesses made"})]})]})}),N.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(mS,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Items to Guess"}),v.jsx("p",{className:"text-gray-600",children:"Your partner hasn't selected any willing items yet."})]}):v.jsx("div",{className:"space-y-4 mb-8",children:N.map((C,I)=>{const ve=j(C.wantId);return ve?v.jsxs(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.1},className:"bg-white border border-gray-200 rounded-lg p-4",children:[v.jsx("div",{className:"flex items-start gap-3 mb-4",children:ve.isMostWanted&&v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(go,{className:"w-4 h-4 text-yellow-600 fill-current"}),v.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-medium",children:"2x Points"})]})}),v.jsx("p",{className:"font-medium text-gray-900 mb-4",children:ve.text}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you think your partner put effort into this?"}),v.jsx("textarea",{value:d[C.wantId]||"",onChange:we=>se(C.wantId,we.target.value),placeholder:"Describe the specific effort you think they made...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]},C.wantId):null})}),N.length>0&&v.jsx("div",{className:"sticky bottom-4",children:v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("p",{className:"font-semibold text-gray-900",children:[B,"/",L," guesses complete"]}),v.jsx("p",{className:"text-sm text-gray-600",children:"Make your best guesses to earn points!"})]}),v.jsxs("button",{onClick:X,disabled:B!==L||D,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors font-semibold",children:[v.jsx(Mc,{className:"w-5 h-5"}),D?"Submitting...":"Submit Guesses"]})]}),B>0&&v.jsx("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-2",children:v.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${B/L*100}%`}})})]})})]})},H8=()=>{const{user:t,setUser:e,logout:n}=Ht(),[s,a]=O.useState(!1),[l,u]=O.useState(!1),[h,d]=O.useState(null),[p,g]=O.useState(!1),{register:b,handleSubmit:E,reset:S,formState:{errors:D,isDirty:M}}=z_({defaultValues:{displayName:t?.displayName||"",age:t?.age||18,gender:t?.gender||"other"}});O.useEffect(()=>{t&&(S({displayName:t.displayName,age:t.age,gender:t.gender}),k())},[t,S]);const k=async()=>{if(t)try{g(!0);const ce=await fi.getBillingInfo(t);d(ce)}catch(ce){console.error("Error loading billing info:",ce)}finally{g(!1)}},V=async ce=>{if(t)try{u(!0),await yn.updateUserProfile(t.id,{displayName:ce.displayName,age:ce.age,gender:ce.gender});const j={...t,displayName:ce.displayName,age:ce.age,gender:ce.gender};e(j),a(!1),Se.success("Profile updated successfully!")}catch(j){console.error("Error updating profile:",j),Se.error("Failed to update profile")}finally{u(!1)}},P=()=>{S({displayName:t?.displayName||"",age:t?.age||18,gender:t?.gender||"other"}),a(!1)},q=async()=>{try{await n(),Se.success("Logged out successfully")}catch{Se.error("Failed to log out")}};if(!t)return v.jsx("div",{className:"p-4",children:v.jsx("div",{className:"text-center py-12",children:v.jsx("p",{className:"text-gray-600",children:"Please log in to view your profile."})})});const se=fi.getUserPlan(t),X=fi.canAccessPremiumFeatures(t);return v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),v.jsx("p",{className:"text-gray-600",children:"Manage your personal information and preferences"})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-6",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:v.jsx(_C,{className:"w-8 h-8 text-green-600"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.displayName}),v.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[v.jsx(yC,{className:"w-4 h-4"}),t.email]}),v.jsxs("p",{className:"text-sm text-gray-500",children:["Member since ",t.createdAt.toLocaleDateString()]})]})]}),!s&&v.jsxs("button",{onClick:()=>a(!0),className:"text-green-600 hover:text-green-700 flex items-center gap-2",children:[v.jsx(i9,{className:"w-4 h-4"}),"Edit"]})]}),v.jsxs("form",{onSubmit:E(V),className:"space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s?v.jsx("input",{...b("displayName",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}):v.jsx("p",{className:"py-2 text-gray-900",children:t.displayName}),D.displayName&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.displayName.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),s?v.jsx("input",{...b("age",{required:"Age is required",min:{value:18,message:"Must be 18 or older"},max:{value:120,message:"Please enter a valid age"},valueAsNumber:!0}),type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}):v.jsxs("p",{className:"py-2 text-gray-900 flex items-center gap-2",children:[v.jsx(e_,{className:"w-4 h-4 text-gray-400"}),t.age," years old"]}),D.age&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.age.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),s?v.jsxs("select",{...b("gender",{required:"Please select your gender"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[v.jsx("option",{value:"male",children:"Male"}),v.jsx("option",{value:"female",children:"Female"}),v.jsx("option",{value:"other",children:"Other"})]}):v.jsxs("p",{className:"py-2 text-gray-900 flex items-center gap-2",children:[v.jsx(Gl,{className:"w-4 h-4 text-gray-400"}),t.gender.charAt(0).toUpperCase()+t.gender.slice(1)]}),D.gender&&v.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.gender.message})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),v.jsxs("p",{className:"py-2 text-gray-500 text-sm",children:[t.email,v.jsx("br",{}),v.jsx("span",{className:"text-xs",children:"Contact support to change email"})]})]})]}),s&&v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsxs("button",{type:"submit",disabled:!M||l,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[v.jsx(o9,{className:"w-4 h-4"}),l?"Saving...":"Save Changes"]}),v.jsxs("button",{type:"button",onClick:P,className:"text-gray-600 hover:text-gray-800 px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[v.jsx(E9,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[X?v.jsx(K5,{className:"w-6 h-6 text-yellow-600"}):v.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[se.name," Plan"]}),v.jsx("p",{className:"text-gray-600 text-sm",children:se.description})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"text-2xl font-bold text-gray-900",children:fi.formatPrice(se)}),X&&t.subscriptionEndDate&&v.jsxs("p",{className:"text-sm text-gray-600",children:["Renews ",t.subscriptionEndDate.toLocaleDateString()]})]})]}),v.jsx("div",{className:"space-y-2 mb-4",children:se.features.map((ce,j)=>v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[v.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),ce]},j))}),p?v.jsx("div",{className:"text-sm text-gray-600",children:"Loading billing info..."}):h&&v.jsxs("div",{className:"text-sm text-gray-600",children:["Status: ",h.status,h.currentPeriodEnd&&v.jsxs("span",{children:[" • Next billing: ",h.currentPeriodEnd.toLocaleDateString()]})]}),v.jsx("div",{className:"flex gap-3 mt-4",children:!X&&v.jsx(ns.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>fi.redirectToCheckout(t,"premium"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-4 py-2 rounded-md font-medium transition-all",children:"Upgrade to Premium"})})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Actions"}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("button",{onClick:q,className:"w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"Sign Out"}),v.jsx("div",{className:"text-sm text-gray-500 px-4",children:"Need help? Contact us at support@willingbox.com"})]})]})]})},G8=()=>{const{user:t}=Ht(),[e,n]=O.useState({emailNotifications:!0,pushNotifications:!0,weeklyReminders:!0,scoreNotifications:!0}),[s,a]=O.useState(!1),[l,u]=O.useState(!1),[h,d]=O.useState(null),[p,g]=O.useState(!1);O.useEffect(()=>{b(),t&&E()},[t]);const b=async()=>{const P=localStorage.getItem(`settings_${t?.id}`);if(P)try{n(JSON.parse(P))}catch(q){console.error("Error loading settings:",q)}},E=async()=>{if(t)try{g(!0);const P=await fi.getBillingInfo(t);d(P)}catch(P){console.error("Error loading billing info:",P)}finally{g(!1)}},S=async(P,q)=>{const se={...e,[P]:q};n(se);try{a(!0),localStorage.setItem(`settings_${t?.id}`,JSON.stringify(se)),await new Promise(X=>setTimeout(X,500))}catch(X){console.error("Error saving setting:",X),Se.error("Failed to save setting"),n(e)}finally{a(!1)}},D=async()=>{if(t)try{Se.success("Data export started. This may take a few minutes.");const P={user:{id:t.id,email:t.email,displayName:t.displayName,age:t.age,gender:t.gender,createdAt:t.createdAt,subscriptionStatus:t.subscriptionStatus},exportedAt:new Date().toISOString(),note:"This is a demo export. In production, this would include all your Innermost data, scores, and preferences."},q=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),se=URL.createObjectURL(q),X=document.createElement("a");X.href=se,X.download=`willing-box-data-${t.id}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(se),Se.success("Data exported successfully!")}catch(P){console.error("Error exporting data:",P),Se.error("Failed to export data")}},M=async()=>{if(t)try{await fi.cancelSubscription(t),Se.success("Subscription cancelled successfully"),E()}catch(P){console.error("Error cancelling subscription:",P),Se.error("Failed to cancel subscription")}},k=async()=>{t&&(Se.error("Account deletion not implemented in demo. Contact support for assistance."),u(!1))};if(!t)return v.jsx("div",{className:"p-4",children:v.jsx("div",{className:"text-center py-12",children:v.jsx("p",{className:"text-gray-600",children:"Please log in to access settings."})})});const V=fi.canAccessPremiumFeatures(t);return v.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[v.jsx(t_,{className:"w-8 h-8 text-green-600"}),"Settings"]}),v.jsx("p",{className:"text-gray-600",children:"Manage your preferences and account settings"})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[v.jsx(L5,{className:"w-5 h-5 text-green-600"}),"Notifications"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Email Notifications"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Receive updates and reminders via email"})]}),v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:e.emailNotifications,onChange:P=>S("emailNotifications",P.target.checked),className:"sr-only",disabled:s}),v.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${e.emailNotifications?"bg-green-600":"bg-gray-300"}`,children:v.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${e.emailNotifications?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Push Notifications"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Get notified on your device"})]}),v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:e.pushNotifications,onChange:P=>S("pushNotifications",P.target.checked),className:"sr-only",disabled:s}),v.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${e.pushNotifications?"bg-green-600":"bg-gray-300"}`,children:v.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${e.pushNotifications?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Weekly Reminders"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Reminders to complete your weekly activities"})]}),v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:e.weeklyReminders,onChange:P=>S("weeklyReminders",P.target.checked),className:"sr-only",disabled:s}),v.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${e.weeklyReminders?"bg-green-600":"bg-gray-300"}`,children:v.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${e.weeklyReminders?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Score Notifications"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when scores are updated"})]}),v.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:e.scoreNotifications,onChange:P=>S("scoreNotifications",P.target.checked),className:"sr-only",disabled:s}),v.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${e.scoreNotifications?"bg-green-600":"bg-gray-300"}`,children:v.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${e.scoreNotifications?"translate-x-5":"translate-x-0"} mt-0.5 ml-0.5`})})]})]})]})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[v.jsx(c9,{className:"w-5 h-5 text-green-600"}),"Privacy & Security"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"End-to-End Privacy"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Your willing selections are never shared with your partner"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Secure Data Storage"}),v.jsx("p",{className:"text-sm text-gray-600",children:"All data is encrypted and stored securely in the cloud"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"No Data Selling"}),v.jsx("p",{className:"text-sm text-gray-600",children:"We never sell or share your personal data with third parties"})]})]})]})]}),v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[v.jsx(f9,{className:"w-5 h-5 text-purple-600"}),"App Settings"]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:D,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[v.jsx(Y5,{className:"w-5 h-5 text-green-600"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Export My Data"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Download all your data in JSON format"})]})]}),v.jsx("div",{className:"border-t border-gray-200 my-4"}),v.jsxs("div",{className:"text-sm text-gray-500",children:[v.jsx("p",{children:"App Version: 1.0.0"}),v.jsxs("p",{children:["Last Updated: ",new Date().toLocaleDateString()]})]})]})]}),V&&v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[v.jsx(G5,{className:"w-5 h-5 text-green-600"}),"Subscription Management"]}),p?v.jsx("div",{className:"text-gray-600",children:"Loading billing information..."}):v.jsxs("div",{className:"space-y-4",children:[h&&v.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[v.jsx("p",{className:"font-medium text-green-900",children:"Premium Active"}),v.jsxs("p",{className:"text-sm text-green-700",children:["Status: ",h.status,h.currentPeriodEnd&&v.jsxs(v.Fragment,{children:[" • Next billing: ",h.currentPeriodEnd.toLocaleDateString()]})]})]}),v.jsx("button",{onClick:M,className:"text-red-600 hover:text-red-700 text-sm underline",children:"Cancel Subscription"})]})]}),v.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-6",children:[v.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-4 flex items-center gap-2",children:[v.jsx(g9,{className:"w-5 h-5 text-red-600"}),"Danger Zone"]}),v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[v.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Delete Account"}),v.jsx("p",{className:"text-sm text-red-700 mb-3",children:"Permanently delete your account and all associated data. This action cannot be undone."}),l?v.jsxs("div",{className:"space-y-3",children:[v.jsx("p",{className:"text-sm font-medium text-red-900",children:"Are you absolutely sure? This will permanently delete everything."}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm transition-colors",children:"Yes, Delete Everything"}),v.jsx("button",{onClick:()=>u(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md text-sm transition-colors",children:"Cancel"})]})]}):v.jsxs("button",{onClick:()=>u(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm flex items-center gap-2 transition-colors",children:[v.jsx(vC,{className:"w-4 h-4"}),"Delete Account"]})]})})]}),v.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:v.jsx("p",{children:"Questions? Contact us at support@willingbox.com"})})]})},$8=new OM({defaultOptions:{queries:{staleTime:300*1e3,gcTime:600*1e3}}}),io=({children:t})=>{const{user:e,isInitialized:n,error:s}=Ht();return console.log("[AuthGuard] Render - isInitialized:",n,"user:",e?.email,"error:",s),n?(s&&console.error("[AuthGuard] Auth error:",s),e?(console.log("[AuthGuard] User authenticated, rendering children"),v.jsx(v.Fragment,{children:t})):(console.log("[AuthGuard] No user, redirecting to login"),v.jsx(QA,{to:"/auth/login",replace:!0}))):v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"animate-pulse text-gray-600",children:"Loading..."})})},ro=({children:t})=>v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx(e8,{}),v.jsx("main",{className:"safe-area-top",children:t})]});function K8(){console.log("[App] Component rendering"),O.useEffect(()=>{console.log("[App] useEffect - calling initializeAuth()"),I5()},[]),console.log("[App] Rendering QueryClientProvider and Router");const t="/willing-tree";return console.log("[App] Router basename:",t,"Mode:","production"),v.jsx(jM,{client:$8,children:v.jsx(sM,{basename:t,children:v.jsxs("div",{className:"App",children:[v.jsxs(VP,{children:[v.jsx(Ps,{path:"/auth/login",element:v.jsx(x8,{})}),v.jsx(Ps,{path:"/auth/signup",element:v.jsx(S8,{})}),v.jsx(Ps,{path:"/",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(t8,{})})})}),v.jsx(Ps,{path:"/innermosts",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(U8,{})})})}),v.jsx(Ps,{path:"/innermosts/:innermostId/wants",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(B8,{})})})}),v.jsx(Ps,{path:"/innermosts/:innermostId/willing",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(z8,{})})})}),v.jsx(Ps,{path:"/innermosts/:innermostId/guess/:weekNumber?",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(q8,{})})})}),v.jsx(Ps,{path:"/profile",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(H8,{})})})}),v.jsx(Ps,{path:"/settings",element:v.jsx(io,{children:v.jsx(ro,{children:v.jsx(G8,{})})})}),v.jsx(Ps,{path:"*",element:v.jsx(QA,{to:"/",replace:!0})})]}),v.jsx(SV,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"}}})]})})})}class W8 extends O.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?v.jsxs("div",{style:{padding:"20px",backgroundColor:"#fee",border:"1px solid #fcc",margin:"20px"},children:[v.jsx("h2",{style:{color:"#c00"},children:"Something went wrong!"}),v.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"10px"},children:[v.jsx("summary",{children:"Error Details (click to expand)"}),v.jsxs("p",{children:[v.jsx("strong",{children:"Error:"})," ",this.state.error?.toString()]}),v.jsx("p",{children:v.jsx("strong",{children:"Stack:"})}),v.jsx("pre",{style:{fontSize:"12px",overflow:"auto"},children:this.state.error?.stack}),this.state.errorInfo&&v.jsxs(v.Fragment,{children:[v.jsx("p",{children:v.jsx("strong",{children:"Component Stack:"})}),v.jsx("pre",{style:{fontSize:"12px",overflow:"auto"},children:this.state.errorInfo.componentStack})]})]})]}):this.props.children}}const BA=document.getElementById("root");BA?HD.createRoot(BA).render(v.jsx(O.StrictMode,{children:v.jsx(W8,{children:v.jsx(K8,{})})})):(console.error("Root element not found!"),document.body.innerHTML='<h1 style="color:red">Root element not found!</h1>');
